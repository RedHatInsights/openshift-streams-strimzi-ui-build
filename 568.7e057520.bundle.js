(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[568],{40568:(e,t,n)=>{"use strict";n.d(t,{e:()=>I});var a=n(97522),i=n.n(a),r=n(37539),o=n(10107),l=function(e){var t=e.isSwitchChecked,n=e.setIsSwitchChecked,a=e.kafkaName,l=e.kafkaPageLink,c=(0,r.useTranslation)().t,m=i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,{to:l||"#"},"Kafka Instances"),i().createElement(o.BreadcrumbItem,{to:"#",isActive:!0},a||c("common.kafka_instance_name")),i().createElement(o.BreadcrumbItem,{to:"#",isActive:!0},c("topic.create_topic")));return i().createElement(i().Fragment,null,i().createElement("section",{className:"pf-c-page__main-breadcrumb"},m),i().createElement(o.PageSection,{variant:o.PageSectionVariants.light},i().createElement(o.Title,{headingLevel:"h1",size:"2xl"},c("topic.create_topic")),i().createElement("br",null),i().createElement(o.Switch,{id:"simple-switch",label:c("topic.show_all_options"),labelOff:c("topic.show_all_options"),isChecked:t,onChange:n,className:"create-topic-wizard"})))},c=(n(63168),function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}),m=function(e){var t=e.topicData,n=e.setTopicData,l=e.topicNameValidated,m=e.setTopicNameValidated,s=e.invalidText,u=e.setInvalidText,p=(0,r.useTranslation)().t,d=t&&t.name;(0,a.useEffect)((function(){E(d)}),[]);var E=function(e){var t=new RegExp("^[a-zA-Z0-9._-]+$");e.length&&!t.test(e)?(u(p("topic.topic_name_helper_text")),m("error")):e.length>249?(m("error"),u(p("topic.cannot_exceed_characters"))):"."===e||".."===e?(m("error"),u(p("topic.invalid_name_with_dot"))):m("default")};return i().createElement(o.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(o.FormSection,{title:p("topic.topic_name"),id:"topic-name",titleElement:"h2"},i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.p},p("topic.topic_name_info")),i().createElement(o.Text,{component:o.TextVariants.small},p("topic.topic_name_info_note"))),i().createElement(o.FormGroup,{label:p("topic.topic_name"),fieldId:"step-topic-name-form",helperText:p("topic.topic_name_helper_text"),helperTextInvalid:s,validated:l,isRequired:!0},i().createElement(o.TextInput,{isRequired:!0,type:"text",id:"step-topic-name-input",name:"step-topic-name",value:d,onChange:function(e){E(e),n(c(c({},t),{name:e}))},placeholder:p("topic.enter_name"),validated:l}))))},s=n(63595),u=function(){return(u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e){var t=e.topicData,n=e.setTopicData,a=(0,r.useTranslation)().t,l=t&&t.numPartitions;return i().createElement(o.Form,null,i().createElement(o.FormSection,{title:a("topic.partitions"),id:"partitions",titleElement:"h2"},i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.p},a("topic.partition_info")),i().createElement(o.Text,{component:o.TextVariants.small},a("topic.partition_info_note"))),i().createElement(o.FormGroup,{label:"Partitions",fieldId:"step-topic-name-form",helperText:a("topic.partition_helper_text"),isRequired:!0},i().createElement(o.NumberInput,{onPlus:function(){n(u(u({},t),{numPartitions:Number(t.numPartitions)+1}))},onMinus:function(){n(u(u({},t),{numPartitions:Number(t.numPartitions)-1}))},value:l,inputName:"input",onChange:function(e){var a=Number(e.target.value);a<s.jR?a=s.jR:a>s.TE&&(a=s.TE),n(u(u({},t),{numPartitions:a}))},widthChars:20,min:s.jR,max:s.TE}))))},d=function(e){var t,n,l=e.setMsgRetentionValue,c=e.currentPeriod,m=e.currentSize,s=e.setCurrentPeriod,u=e.setCurrentSize,p=e.setRetentionSize,d=(0,r.useTranslation)().t;!function(e){e[e.MILLISECOND=1]="MILLISECOND",e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(t||(t={})),function(e){e[e.BYTE=1]="BYTE",e[e.KILOBYTE=1e3]="KILOBYTE",e[e.MEGABYTE=1e6]="MEGABYTE",e[e.GIGABYTE=1e9]="GIGABYTE",e[e.TERABYTE=1e12]="TERABYTE",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(n||(n={}));var E=(0,a.useState)(7),f=E[0],v=E[1],T=(0,a.useState)(1),h=T[0],S=T[1],k=(0,a.useState)(!1),b=k[0],g=k[1],y=(0,a.useState)(!1),C=y[0],I=y[1],_=(0,a.useState)(!1),x=_[0],N=_[1],D=(0,a.useState)(!1),O=D[0],L=D[1],M=(0,a.useState)(t.DAY),w=M[0],U=M[1],B=(0,a.useState)(n.BYTE),A=B[0],P=B[1];(0,a.useEffect)((function(){c===t.DAY?l(t.DAY):c===t.WEEK?l(t.WEEK):c===t.UNLIMITED?l(t.UNLIMITED):c===t.CUSTOM&&l(w*f),m===n.UNLIMITED?p(n.UNLIMITED):m===n.CUSTOM&&p(A*h)}),[c,m,f,h,w,A]);var F=function(e,a){var i=a.target.name;"radioDay"===i?s(t.DAY):"radioWeek"===i?s(t.WEEK):"radioUnlimitedTime"===i?s(t.UNLIMITED):"radioCustomTime"===i&&s(t.CUSTOM),"radioCustomSize"===i?u(n.CUSTOM):"radioUnlimitedSize"===i&&u(n.UNLIMITED)};return i().createElement(i().Fragment,null,i().createElement(o.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(o.FormSection,{title:d("topic.message_retention"),id:"message-retention",titleElement:"h2"},i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.p},d("topic.message_retention_info")),i().createElement(o.Text,{component:o.TextVariants.small},d("topic.message_retention_info_note"))),i().createElement(o.FormGroup,{fieldId:"form-group-retention-time-in-wizard",label:d("topic.retention_time")},i().createElement(o.Stack,{hasGutter:!0},i().createElement(o.Radio,{isChecked:c===t.DAY,name:"radioDay",onChange:F,label:"A day","aria-label":"A day",id:"radio-controlled-1",value:"day"}),i().createElement(o.Radio,{isChecked:c===t.WEEK,name:"radioWeek",onChange:F,label:"A week","aria-label":"A week",id:"radio-controlled-2",value:"week"}),i().createElement(o.Radio,{isChecked:c===t.CUSTOM,name:"radioCustomTime",onChange:F,label:"Custom duration","aria-label":"custom input",id:"radio-controlled-4",value:"custom"}),c===t.CUSTOM&&i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(o.Flex,null,i().createElement(o.FlexItem,null,i().createElement(o.NumberInput,{onMinus:function(){v(f-1)},onPlus:function(){v(f+1)},value:f,onChange:function(e){v(Number(e.target.value))},min:0})),i().createElement(o.FlexItem,null,i().createElement(o.Select,{variant:o.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){g(e)},onSelect:function(e,n){"days"===n?U(t.DAY):"unlimited"===n?U(t.UNLIMITED):"milliseconds"===n?U(t.MILLISECOND):"seconds"===n?U(t.SECOND):"minutes"===n?U(t.MINUTE):"hours"===n&&U(t.HOUR),N(n),g(!1)},selections:x,isOpen:b},i().createElement(o.SelectOption,{key:0,value:"days",isPlaceholder:!0}),i().createElement(o.SelectOption,{key:1,value:"seconds"}),i().createElement(o.SelectOption,{key:2,value:"minutes"}),i().createElement(o.SelectOption,{key:3,value:"hours"}),i().createElement(o.SelectOption,{key:4,value:"milliseconds"}))))),i().createElement(o.Radio,{isChecked:c===t.UNLIMITED,name:"radioUnlimitedTime",onChange:F,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-3",value:"unlimited"}))),i().createElement(o.FormGroup,{fieldId:"form-group-retention-size-in-wizard",label:"Retention size"},i().createElement(o.Stack,{hasGutter:!0},i().createElement(o.Radio,{isChecked:m===n.UNLIMITED,name:"radioUnlimitedSize",onChange:F,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-6",value:"unlimited"}),i().createElement(o.Radio,{isChecked:m===n.CUSTOM,name:"radioCustomSize",onChange:F,label:"Custom size","aria-label":"custom input",id:"radio-controlled-5",value:"custom"}),m===n.CUSTOM&&i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(o.Flex,null,i().createElement(o.FlexItem,null,i().createElement(o.NumberInput,{onMinus:function(){S(h-1)},onPlus:function(){S(h+1)},value:h,onChange:function(e){S(Number(e.target.value))},min:0})),i().createElement(o.FlexItem,null,i().createElement(o.Select,{variant:o.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){I(e)},onSelect:function(e,t){"unlimited"===t?P(n.UNLIMITED):"bytes"===t?P(n.BYTE):"kilobytes"===t?P(n.KILOBYTE):"megabytes"===t?P(n.MEGABYTE):"gigabytes"===t?P(n.GIGABYTE):"terabytes"===t&&P(n.TERABYTE),L(t),I(!1)},selections:O,isOpen:C},i().createElement(o.SelectOption,{key:5,value:"bytes",isPlaceholder:!0}),i().createElement(o.SelectOption,{key:6,value:"kilobytes"}),i().createElement(o.SelectOption,{key:7,value:"megabytes"}),i().createElement(o.SelectOption,{key:8,value:"gigabytes"}),i().createElement(o.SelectOption,{key:9,value:"terabytes"}))))))))))},E=n(95574),f=function(e){var t=e.replicationFactor,n=e.minInSyncReplica,a=(0,r.useTranslation)().t;return i().createElement(o.Form,null,i().createElement(o.FormSection,{title:a("common.replicas"),id:"replica-section",titleElement:"h2"},i().createElement(o.TextContent,null,i().createElement(o.Text,{component:o.TextVariants.p},a("topic.replicas_info")),i().createElement(o.Text,{component:o.TextVariants.small},a("topic.replicas_detail"))),i().createElement(o.Alert,{variant:"info",isInline:!0,title:a("topic.replicas_helper_text")}),i().createElement(E.R,{fieldId:"replicas",btnAriaLabel:a("common.replicas"),fieldLabel:a("common.replicas"),fieldValue:t.toString(),popoverBody:a("topic.replicas_description"),popoverHeader:a("topic.replicas")}),i().createElement(E.R,{fieldId:"min-insync-replicas",btnAriaLabel:"topic detail min-in-sync replica",fieldLabel:"Minimum in-sync replicas",fieldValue:n.toString(),popoverBody:a("topic.min_insync_replicas_description"),popoverHeader:a("topic.min_insync_replicas")})))},v=n(72645),T=function(e){var t=e.isLoading,n=e.onValidate,a=e.topicNameValidated,l=e.closeWizard,c=(0,r.useTranslation)().t;return i().createElement(o.WizardFooter,null,i().createElement(o.WizardContextConsumer,null,(function(e){var r=e.activeStep,m=e.onNext,s=e.onBack;return r.name==c("topic.topic_name")?i().createElement(i().Fragment,null,i().createElement(o.Button,{variant:"primary",type:"submit",isLoading:t,onClick:function(){return n(m)},isDisabled:"default"!=a},c("common.next")),i().createElement(o.Button,{variant:"secondary",isDisabled:!0},c("common.back")),i().createElement(o.Button,{variant:"link",onClick:l},c("common.cancel"))):"Replicas"==r.name?i().createElement(i().Fragment,null,i().createElement(o.Button,{variant:"primary",type:"submit",onClick:m,isLoading:t},c("common.finish")),i().createElement(o.Button,{variant:"secondary",onClick:s},c("common.back")),i().createElement(o.Button,{variant:"link",onClick:l},c("common.cancel"))):i().createElement(i().Fragment,null,i().createElement(o.Button,{variant:"primary",type:"submit",onClick:m},c("common.next")),i().createElement(o.Button,{variant:"secondary",onClick:s},c("common.back")),i().createElement(o.Button,{variant:"link",onClick:l},c("common.cancel")))})))},h=n(28696),S=n(53443),k=n(26585),b=n(71302),g=n(57473),y=function(e){var t=e.isSwitchChecked,n=e.onCloseCreateTopic,l=(0,a.useContext)(k.E),c=(0,r.useTranslation)().t,s=(0,g.useAlert)().addAlert,u=(0,a.useState)(1),E=u[0],y=u[1],C=(0,a.useState)(1),I=C[0],_=C[1],x=(0,a.useState)(3)[0],N=(0,a.useState)(2)[0],D=(0,a.useState)("default"),O=D[0],L=D[1],M=(0,a.useState)(!1),w=M[0],U=M[1],B=(0,a.useState)(""),A=B[0],P=B[1],F=(0,a.useState)({name:"",numPartitions:"1","retention.ms":"7","retention.ms.unit":"days","retention.bytes":"-1","retention.bytes.unit":"bytes","cleanup.policy":"delete"}),R=F[0],V=F[1],z=i().useState(6048e5),Y=z[0],G=z[1],W=i().useState(-1),K=W[0],j=W[1],H=function(){n&&n()},q=function(){U(!0);var e=t?(0,S.hM)((0,S.L3)(R)):{name:null==R?void 0:R.name,settings:{numPartitions:Number(null==R?void 0:R.numPartitions),config:[{key:"retention.ms",value:E.toString()},{key:"retention.bytes",value:I.toString()}]}};new h.DefaultApi(new h.Configuration({basePath:null==l?void 0:l.basePath,accessToken:null==l?void 0:l.getToken})).createTopic(e).then((function(e){s({variant:o.AlertVariant.success,title:c("topic.topic_successfully_created")}),U(!1),H()})).catch((function(e){U(!1),s({variant:o.AlertVariant.danger,title:e.response.data.error_message}),H()}))},J=[{name:c("topic.topic_name"),enableNext:""!==(null==R?void 0:R.name.trim())&&"default"===O,component:i().createElement(m,{topicData:R,setTopicData:V,topicNameValidated:O,setTopicNameValidated:L,invalidText:A,setInvalidText:P})},{name:c("common.partitions"),canJumpTo:""!==(null==R?void 0:R.name.trim()),component:i().createElement(p,{topicData:R,setTopicData:V})},{name:c("topic.message_retention"),canJumpTo:""!==(null==R?void 0:R.name.trim()),component:i().createElement(d,{setMsgRetentionValue:y,currentPeriod:Y,currentSize:K,setCurrentPeriod:G,setCurrentSize:j,setRetentionSize:_})},{name:c("common.replicas"),canJumpTo:""!==(null==R?void 0:R.name.trim()),component:i().createElement(f,{replicationFactor:x,minInSyncReplica:N}),nextButtonText:c("common.finish")}],Z=c("topic.wizard_title");return i().createElement(i().Fragment,null,t?i().createElement(i().Fragment,null,i().createElement(o.Divider,{className:"kafka-ui--divider--FlexShrink"}),i().createElement(o.PageSection,{variant:o.PageSectionVariants.light},i().createElement(v.W,{isCreate:!0,saveTopic:q,handleCancel:n,topicData:R,setTopicData:V}))):i().createElement(o.PageSection,{variant:o.PageSectionVariants.light,type:o.PageSectionTypes.wizard,isFilled:!0},i().createElement(o.Wizard,{navAriaLabel:Z+" steps",mainAriaLabel:Z+" content",steps:J,onClose:H,onSave:q,"data-testid":"topicBasicCreate-Wizard",footer:i().createElement(T,{isLoading:w,onValidate:function(e){(null==R?void 0:R.name.length)<1?(P(c("topic.required")),L("error")):"."===(null==R?void 0:R.name)||".."===(null==R?void 0:R.name)?(P(c("topic.invalid_name_with_dot")),L("error")):(U(!0),function(e,t){var n,a,i,r;n=void 0,a=void 0,r=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,b.BN)(e,l)];case 1:return n.sent()&&(P(c("topic.already_exists",{name:e})),L("error"),U(!1)),[3,3];case 2:return"404"==n.sent().response.status&&(L("default"),U(!1),t()),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{c(r.next(e))}catch(e){t(e)}}function l(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,l)}c((r=r.apply(n,a||[])).next())}))}(null==R?void 0:R.name,e))},topicNameValidated:O,closeWizard:H})})))},C=n(37009),I=(n(41781),function(e){var t=e.onCloseCreateTopic,n=(0,C.S)(),r=n.kafkaName,o=n.kafkaPageLink,c=n.kafkaInstanceLink,m=(0,a.useState)(!1),s=m[0],u=m[1];return i().createElement(i().Fragment,null,i().createElement(l,{isSwitchChecked:s,setIsSwitchChecked:u,kafkaName:r,kafkaInstanceLink:c,kafkaPageLink:o}),i().createElement(y,{isSwitchChecked:s,onCloseCreateTopic:t}))})}}]);
//# sourceMappingURL=568.7e057520.bundle.js.map