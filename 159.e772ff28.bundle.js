(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[159],{42159:(e,t,n)=>{"use strict";n.d(t,{v:()=>S});var a=n(97522),o=n.n(a),i=n(37539),r=n(10107),l=n(55399),c=n(51826),s=n(72721),u=n(89941),p=n(4426),m=n(19937),d=n(37009),g=n(66057),f=n(22273),b=function(e){var t=e.total,n=void 0===t?0:t,l=e.page,c=e.perPage,s=e.setFilteredValue,u=e.filteredValue,p=void 0===u?"":u,d=e.onCreateTopic,b=(0,i.useTranslation)().t,v=(0,a.useState)(""),h=v[0],k=v[1],T=o().createElement(o().Fragment,null,o().createElement(r.ToolbarFilter,{chips:p?[p]:[],deleteChip:function(){s("")},categoryName:""},o().createElement(r.InputGroup,null,o().createElement(r.TextInput,{name:"searchName",id:"search-topics-input",type:"search","aria-label":b("topic.topic_search_input"),placeholder:b("common.search"),value:h,onChange:function(e){k(e)}}),o().createElement(r.Button,{variant:r.ButtonVariant.control,isDisabled:!h.length,onClick:function(){s(h),k("")},"aria-label":b("topic.topic_search")},o().createElement(g.SearchIcon,null))))),_=[{item:o().createElement(r.Button,{id:"topic-list-create-topic-button",className:"topics-per-page","data-testid":"actionCreateTopic",onClick:d},b("topic.create_topic"))}];return n>0&&_.push({item:o().createElement(m.w,{widgetId:"consumer-group-pagination-options-menu-top",itemCount:n,page:l,perPage:c,titles:{paginationTitle:b("common.minimal_pagination"),perPageSuffix:b("common.per_page_suffix"),toFirstPage:b("common.to_first_page"),toPreviousPage:b("common.to_previous_page"),toLastPage:b("common.to_last_page"),toNextPage:b("common.to_next_page"),optionsToggle:b("common.options_toggle"),currPage:b("common.curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),o().createElement(f.L,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s("")},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:"",breakpoint:"md"},toggleGroupItems:T,toolbarItems:_})},v=n(53555),h=n(18416),k=function(e){var t,n=e.total,a=e.page,c=e.perPage,g=e.setFilteredValue,f=e.filteredValue,k=e.onCreateTopic,T=e.topicItems,_=e.rowDataTestId,E=e.onEdit,y=e.onDeleteTopic,P=e.refreshTopics,C=e.onSort,S=e.sortBy,w=(0,i.useTranslation)().t,I=(0,h.QK)().showModal,N=(0,d.S)(),x=N.onConnectToRoute,D=N.getConnectToRoutePath,B=[{title:w("common.name")},{title:w("common.partitions"),transforms:[s.sortable]},{title:w("topic.retention_time"),transforms:[s.sortable]},{title:w("topic.retention_size"),transforms:[s.sortable]}],L=function(e,t,n){var a,o,i,r,l,c=t.name,s=void 0===c?"":c;"delete"===n?(l=s,I(h.Ny.DELETE_TOPIC,{topicName:l,onDeleteTopic:y,refreshTopics:P})):"edit"===n&&E&&E(s),null===(r=null===(i=null===(o=null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.parentElement)||void 0===o?void 0:o.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===r||r.focus()},F=(t=[],null==T||T.map((function(e){var n,a,i=e.name,r=e.partitions,c=e.config;t.push({cells:[{title:o().createElement(l.Link,{"data-testid":"tableTopics-linkTopic",to:D&&D("topics/"+i,i)||"",onClick:function(e){e.preventDefault(),x&&x("topics/"+i)}},i)},null==r?void 0:r.length,(0,v.B4)(Number((null===(n=null==c?void 0:c.filter((function(e){return"retention.ms"===e.key}))[0])||void 0===n?void 0:n.value)||0)),(0,v.yI)(Number((null===(a=null==c?void 0:c.filter((function(e){return"retention.bytes"===e.key}))[0])||void 0===a?void 0:a.value)||0))],originalData:e})})),t);return o().createElement(o().Fragment,null,o().createElement(b,{total:n,page:a,perPage:c,onCreateTopic:k,setFilteredValue:g,filteredValue:f}),o().createElement(u.w,{tableProps:{cells:B,rows:F,"aria-label":w("topic.topic_list_table"),actionResolver:function(e){var t,n,a=e.originalData;return[(t={title:w("common.delete")},t["data-testid"]="tableTopics-actionDelete",t.onClick=function(e){return L(e,a,"delete")},t),(n={title:w("common.edit")},n["data-testid"]="tableTopics-actionEdit",n.onClick=function(e){return L(e,a,"edit")},n)]},shouldDefaultCustomRowWrapper:!0,variant:s.TableVariant.compact,onSort:C,sortBy:S},rowDataTestId:_||"tableTopics-row"}),(null==T?void 0:T.length)<1&&f.length>0&&o().createElement(p.u,{emptyStateProps:{variant:p.j.NoResult},titleProps:{title:w("common.no_results_title")},emptyStateBodyProps:{body:w("common.no_results_body")}}),n>0&&o().createElement(m.w,{widgetId:"consumer-group-pagination-options-menu-bottom",itemCount:n,variant:r.PaginationVariant.bottom,page:a,perPage:c,titles:{paginationTitle:w("common.full_pagination"),perPageSuffix:w("common.per_page_suffix"),toFirstPage:w("common.to_first_page"),toPreviousPage:w("common.to_previous_page"),toLastPage:w("common.to_last_page"),toNextPage:w("common.to_next_page"),optionsToggle:w("common.options_toggle"),currPage:w("common.curr_page")}}))},T=n(87887),_=n(71302),E=n(26585),y=n(57473),P=function(e){var t=e.onCreateTopic,n=e.onEditTopic,s=(0,d.S)(),u=s.dispatchKafkaAction,m=s.onError,g=(0,i.useTranslation)().t,f=(0,y.useAlert)().addAlert,b=(0,a.useContext)(E.E),h=(0,l.useLocation)(),P=new URLSearchParams(h.search),C=parseInt(P.get("page")||"",10)||1,S=parseInt(P.get("perPage")||"",10)||10,w=(0,a.useState)(),I=(w[0],w[1]),N=(0,a.useState)(),x=N[0],D=N[1],B=(0,a.useState)(""),L=B[0],F=B[1],V=(0,a.useState)(0),K=V[0],R=V[1],G=(0,a.useState)(),A=G[0],O=G[1],j=(0,a.useState)(),M=j[0],z=j[1],J=(0,a.useState)({index:0,direction:"asc"}),Q=J[0],U=J[1];(0,a.useEffect)((function(){W()}),[L,A,M]),(0,c.K)((function(){return W()}),5e3),(0,a.useEffect)((function(){var e=Number(S)*Number(C-1);R(e)}),[C,S]);var W=function(){return e=void 0,t=void 0,a=function(){var e;return function(e,t){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,_.BB)(b,100,S,L,K,A,M).then((function(e){I(e),D(null==e?void 0:e.items)}))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),m&&401===e.response.data.code?m(e.response.data.code,e.response.data.error_message):f({title:e.response.data.error_message,variant:r.AlertVariant.danger}),[3,3];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function r(e){try{c(a.next(e))}catch(e){i(e)}}function l(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}c((a=a.apply(e,t||[])).next())}));var e,t,n,a};return o().createElement(o().Fragment,null,o().createElement(r.Card,{className:"kafka-ui-m-full-height","data-ouia-page-id":"tableTopics"},void 0===x?o().createElement(r.PageSection,{className:"kafka-ui-m-full-height",variant:r.PageSectionVariants.light,padding:{default:"noPadding"}},o().createElement(T.y,null)):x.length<1&&L.length<1?o().createElement(p.u,{emptyStateProps:{variant:p.j.NoItems,"data-ouia-page-id":"emptyStateTopics"},titleProps:{title:g("topic.empty_topics_title")},emptyStateBodyProps:{body:g("topic.empty_topics_body")},buttonProps:{title:g("topic.create_topic"),onClick:function(){t&&t(),u&&u(v.wT.CreateTopic)},"data-testid":"actionCreateTopic"}}):x?o().createElement(k,{total:x.length||0,page:C,perPage:S,onCreateTopic:t,topicItems:L?null==x?void 0:x.slice(0,S):null==x?void 0:x.slice(K,K+S),filteredValue:L,setFilteredValue:F,refreshTopics:W,onEdit:n,onSort:function(e,t,n){z({0:"name",1:"partitions",2:"retention.ms",3:"retention.bytes"}[t]),O(n),U({index:t,direction:n})},sortBy:Q}):o().createElement(o().Fragment,null)))},C=n(45546),S=(n(41781),function(e){var t=e.onCreateTopic,n=e.onEditTopic,l=e.activeTab,c=(0,i.useTranslation)().t,s=(0,d.S)(),u=s.kafkaPageLink,p=s.kafkaName,m=s.handleInstanceDrawer,g=s.setIsOpenDeleteInstanceModal,f=(0,a.useState)(l),b=f[0],v=f[1],h=o().createRef(),k=o().createRef(),T=(0,a.useState)(),_=T[0],E=T[1],y=function(e){m&&m(!0,e)},S=[o().createElement(r.DropdownItem,{key:"view-kafka",onClick:function(){return y("details")}},c("common.view_instance")),o().createElement(r.DropdownItem,{key:"connect-kafka",onClick:function(){return y("connection")}},c("common.view_connection")),o().createElement(r.DropdownItem,{key:"delete-kafka",onClick:function(){g&&g(!0)}},c("common.delete_instance"))],w=o().createElement(r.Breadcrumb,null,o().createElement(r.BreadcrumbItem,{to:u||"#"},c("common.kafka_instance")),o().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},p||c("common.kafka_instance_name")));return o().createElement(o().Fragment,null,o().createElement("section",{className:"pf-c-page__main-breadcrumb"},w),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light},o().createElement(r.Level,null,o().createElement(r.Title,{headingLevel:"h1"},p||c("common.kafka_instance_name")),o().createElement(r.Dropdown,{onSelect:function(){E(!_)},toggle:o().createElement(r.KebabToggle,{onToggle:function(e){E(e)},id:"toggle-data-plane"}),isOpen:_,isPlain:!0,dropdownItems:S,position:r.DropdownPosition.right}))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light,padding:{default:"noPadding"},className:"pf-c-page__main-tabs"},o().createElement(r.Tabs,{activeKey:b,onSelect:function(e,t){v(t)},"data-testid":"pageKafka-tabProperties",className:"pf-m-page-insets"},o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,c("topic.topics")),eventKey:1,"data-testid":"pageKafka-tabTopics",id:"topics-tab-section","aria-label":c("topic.topics"),tabContentRef:k,tabContentId:"kafka-ui-TabcontentTopicsList"}),o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,c("consumerGroup.consumer_groups")),eventKey:2,"data-testid":"pageKafka-tabConsumers",id:"consumer-groups-tab-section","aria-label":c("consumerGroup.consumer_groups"),tabContentRef:h,tabContentId:"kafka-ui-TabcontentConsumersList"}))),o().createElement(r.PageSection,{isFilled:!0},o().createElement(r.TabContent,{eventKey:1,ref:k,id:"kafka-ui-TabcontentTopicsList",className:"kafka-ui-m-full-height","aria-label":c("topic.topics")},o().createElement(P,{onCreateTopic:t,onEditTopic:n})),o().createElement(r.TabContent,{eventKey:2,ref:h,id:"kafka-ui-TabcontentConsumersList",className:"kafka-ui-m-full-height","aria-label":c("consumerGroup.consumer_groups"),hidden:!0},o().createElement(C.J,{consumerGroupByTopic:!1}))))})}}]);
//# sourceMappingURL=159.e772ff28.bundle.js.map