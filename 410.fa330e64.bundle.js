(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[410],{9410:(e,t,a)=>{"use strict";a.d(t,{e:()=>I});var n=a(7522),i=a.n(n),r=a(8612),l=a(3006),o=function(e){var t=e.isSwitchChecked,a=e.setIsSwitchChecked,n=e.kafkaName,o=e.kafkaPageLink,c=(0,l.useTranslation)().t,s=i().createElement(r.Breadcrumb,null,i().createElement(r.BreadcrumbItem,{to:o||"#"},"Kafka Instances"),i().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},n||c("common.kafka_instance_name")),i().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},c("topic.create_topic")));return i().createElement(i().Fragment,null,i().createElement("section",{className:"pf-c-page__main-breadcrumb"},s),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(r.Title,{headingLevel:"h1",size:"2xl"},c("topic.create_topic")),i().createElement("br",null),i().createElement(r.Switch,{id:"simple-switch",label:c("topic.show_all_options"),labelOff:c("topic.show_all_options"),isChecked:t,onChange:a,className:"create-topic-wizard"})))},c=(a(3174),function(e){var t=e.topicNameInput,a=e.setTopicNameInput,o=e.topicNameValidated,c=e.setTopicNameValidated,s=(0,n.useState)("This is a required field"),m=s[0],u=s[1],p=(0,l.useTranslation)().t;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},p("topic.topic_name")),i().createElement(r.Text,{component:r.TextVariants.p},p("topic.topic_name_info")),i().createElement(r.Text,{component:r.TextVariants.small},p("topic.topic_name_info_note"))),i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormGroup,{label:p("topic.topic_name"),fieldId:"step-topic-name-form",helperText:p("topic.topic_name_helper_text"),helperTextInvalid:m,validated:o,isRequired:!0},i().createElement(r.TextInput,{isRequired:!0,type:"text",id:"step-topic-name-input",name:"step-topic-name",value:t,onChange:function(e){!function(e){var t=new RegExp("^[0-9A-Za-z_-]+$");e.length&&!t.test(e)?(u('Invalid input. Only letters (Aa-Zz) , numbers " _ " and " - " are accepted.'),c("error")):e.length<1?(u("This is a required field"),c("error")):e.length>249?(c("error"),u("Topic name cannot exceed 249 characters")):c("default")}(e),a(e)},placeholder:p("topic.enter_name"),validated:o}))))}),s=function(e){var t=e.partitionTouchspinValue,a=e.setPartitionTouchspinValue,n=(0,l.useTranslation)().t;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},"Partitions"),i().createElement(r.Text,{component:r.TextVariants.p},n("topic.partition_info")),i().createElement(r.Text,{component:r.TextVariants.small},n("topic.partition_info_note"))),i().createElement(r.Form,null,i().createElement(r.FormGroup,{label:"Partitions",fieldId:"step-topic-name-form",helperText:n("topic.partition_helper_text"),isRequired:!0},i().createElement(r.NumberInput,{onPlus:function(){a(t+1)},onMinus:function(){a(t-1)},value:t,inputName:"input",onChange:function(e){var t=Number(e.target.value);t<1&&(t=1),a(t)},widthChars:20,min:1}))))},m=function(e){var t,a,o=e.setMsgRetentionValue,c=e.currentPeriod,s=e.currentSize,m=e.setCurrentPeriod,u=e.setCurrentSize,p=e.setRetentionSize,d=(0,l.useTranslation)().t;!function(e){e[e.MILLISECOND=1]="MILLISECOND",e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(t||(t={})),function(e){e[e.BYTE=1]="BYTE",e[e.KILOBYTE=1e3]="KILOBYTE",e[e.MEGABYTE=1e6]="MEGABYTE",e[e.GIGABYTE=1e9]="GIGABYTE",e[e.TERABYTE=1e12]="TERABYTE",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(a||(a={}));var E=(0,n.useState)(7),T=E[0],S=E[1],k=(0,n.useState)(1),f=k[0],h=k[1],I=(0,n.useState)(!1),C=I[0],g=I[1],b=(0,n.useState)(!1),v=b[0],_=b[1],y=(0,n.useState)(!1),x=y[0],N=y[1],M=(0,n.useState)(!1),L=M[0],U=M[1],D=(0,n.useState)(t.DAY),O=D[0],A=D[1],V=(0,n.useState)(a.BYTE),w=V[0],z=V[1];(0,n.useEffect)((function(){c===t.DAY?o(t.DAY):c===t.WEEK?o(t.WEEK):c===t.UNLIMITED?o(t.UNLIMITED):c===t.CUSTOM&&o(O*T),s===a.UNLIMITED?p(a.UNLIMITED):s===a.CUSTOM&&p(w*f)}),[c,s,T,f,O,w]);var P=function(e,n){var i=n.target.name;"radioDay"===i?m(t.DAY):"radioWeek"===i?m(t.WEEK):"radioUnlimitedTime"===i?m(t.UNLIMITED):"radioCustomTime"===i&&m(t.CUSTOM),"radioCustomSize"===i?u(a.CUSTOM):"radioUnlimitedSize"===i&&u(a.UNLIMITED)};return i().createElement(i().Fragment,null,i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},d("topic.message_retention")),i().createElement(r.Text,{component:r.TextVariants.p},d("topic.message_retention_info")),i().createElement(r.Text,{component:r.TextVariants.small},d("topic.message_retention_info_note"))),i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormGroup,{fieldId:"form-group-retention-time-in-wizard",label:d("topic.retention_time")},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:c===t.DAY,name:"radioDay",onChange:P,label:"A day","aria-label":"A day",id:"radio-controlled-1",value:"day"}),i().createElement(r.Radio,{isChecked:c===t.WEEK,name:"radioWeek",onChange:P,label:"A week","aria-label":"A week",id:"radio-controlled-2",value:"week"}),i().createElement(r.Radio,{isChecked:c===t.CUSTOM,name:"radioCustomTime",onChange:P,label:"Custom duration","aria-label":"custom input",id:"radio-controlled-4",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){S(T-1)},onPlus:function(){S(T+1)},value:T,onChange:function(e){S(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){g(e)},onSelect:function(e,a){"days"===a?A(t.DAY):"unlimited"===a?A(t.UNLIMITED):"milliseconds"===a?A(t.MILLISECOND):"seconds"===a?A(t.SECOND):"minutes"===a?A(t.MINUTE):"hours"===a&&A(t.HOUR),N(a),g(!1)},selections:x,isOpen:C},i().createElement(r.SelectOption,{key:0,value:"days",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:1,value:"seconds"}),i().createElement(r.SelectOption,{key:2,value:"minutes"}),i().createElement(r.SelectOption,{key:3,value:"hours"}),i().createElement(r.SelectOption,{key:4,value:"milliseconds"}))))),i().createElement(r.Radio,{isChecked:c===t.UNLIMITED,name:"radioUnlimitedTime",onChange:P,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-3",value:"unlimited"}))),i().createElement(r.FormGroup,{fieldId:"form-group-retention-size-in-wizard",label:"Retention size"},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:s===a.UNLIMITED,name:"radioUnlimitedSize",onChange:P,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-6",value:"unlimited"}),i().createElement(r.Radio,{isChecked:s===a.CUSTOM,name:"radioCustomSize",onChange:P,label:"Custom size","aria-label":"custom input",id:"radio-controlled-5",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){h(f-1)},onPlus:function(){h(f+1)},value:f,onChange:function(e){h(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){_(e)},onSelect:function(e,t){"unlimited"===t?z(a.UNLIMITED):"bytes"===t?z(a.BYTE):"kilobytes"===t?z(a.KILOBYTE):"megabytes"===t?z(a.MEGABYTE):"gigabytes"===t?z(a.GIGABYTE):"terabytes"===t&&z(a.TERABYTE),U(t),_(!1)},selections:L,isOpen:v},i().createElement(r.SelectOption,{key:5,value:"bytes",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:6,value:"kilobytes"}),i().createElement(r.SelectOption,{key:7,value:"megabytes"}),i().createElement(r.SelectOption,{key:8,value:"gigabytes"}),i().createElement(r.SelectOption,{key:9,value:"terabytes"}))))))))))},u=a(7253),p=function(e){var t=e.replicationFactor,a=e.minInSyncReplica,n=(0,l.useTranslation)().t;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},n("common.replicas")),i().createElement(r.Text,{component:r.TextVariants.p},n("topic.replicas_info")),i().createElement(r.Text,{component:r.TextVariants.small},n("topic.replicas_detail"))),i().createElement(r.Alert,{variant:"info",isInline:!0,title:n("topic.replicas_helper_text")}),i().createElement(u.R,{btnAriaLabel:n("common.replicas"),fieldLabel:n("common.replicas"),fieldValue:t.toString(),popoverBody:n("topic.replicas_description"),popoverHeader:n("topic.replicas")}),i().createElement(u.R,{btnAriaLabel:"topic detail min-in-sync replica",fieldLabel:"Minimum in-sync replicas",fieldValue:a.toString(),popoverBody:n("topic.min_insync_replicas_description"),popoverHeader:n("topic.min_insync_replicas")}))},d=a(3921),E=a(7887),T=a(1249),S=a(9115),k=a(7830),f=a(6304),h=function(e){var t=e.setIsCreateTopic,a=e.isSwitchChecked,o=e.onCloseCreateTopic,u=(0,n.useContext)(S.E),h=(0,l.useTranslation)().t,I=(0,n.useContext)(f.w).addAlert,C=(0,n.useState)(1),g=C[0],b=C[1],v=(0,n.useState)(1),_=v[0],y=v[1],x=(0,n.useState)(""),N=x[0],M=x[1],L=(0,n.useState)(1),U=L[0],D=L[1],O=(0,n.useState)(3)[0],A=(0,n.useState)(2)[0],V=(0,n.useState)("default"),w=V[0],z=V[1],P=(0,n.useState)({name:"",numPartitions:"1","retention.ms":"7","retention.ms.unit":"days","retention.bytes":"-1","retention.bytes.unit":"bytes","cleanup.policy":"delete"}),R=P[0],B=P[1],Y=i().useState(6048e5),F=Y[0],G=Y[1],K=i().useState(-1),W=K[0],q=K[1],H=function(){t&&t(!1)},J=function(){var e=a?(0,T.hM)((0,T.L3)(R)):{name:N,settings:{numPartitions:U,config:[{key:"retention.ms",value:g.toString()},{key:"retention.bytes",value:_.toString()}]}};new E.M2(new k.VK({basePath:null==u?void 0:u.basePath,accessToken:null==u?void 0:u.getToken})).createTopic(e).then((function(e){200===e.status&&I(h("topic.topic_successfully_created"),r.AlertVariant.success),H()})).catch((function(e){I(e.response.data.error_message,r.AlertVariant.danger),H()}))},Z=[{name:h("topic.topic_name"),enableNext:""!==N.trim()&&"default"===w,component:i().createElement(c,{topicNameInput:N,setTopicNameInput:M,topicNameValidated:w,setTopicNameValidated:z})},{name:h("common.partitions"),canJumpTo:""!==N.trim(),component:i().createElement(s,{partitionTouchspinValue:U,setPartitionTouchspinValue:D})},{name:h("topic.message_retention"),canJumpTo:""!==N.trim(),component:i().createElement(m,{setMsgRetentionValue:b,currentPeriod:F,currentSize:W,setCurrentPeriod:G,setCurrentSize:q,setRetentionSize:y})},{name:h("common.replicas"),canJumpTo:""!==N.trim(),component:i().createElement(p,{replicationFactor:O,minInSyncReplica:A}),nextButtonText:h("common.finish")}],$=h("topic.wizard_title");return i().createElement(i().Fragment,null,a?i().createElement(i().Fragment,null,i().createElement(r.Divider,{className:"kafka-ui--divider--FlexShrink"}),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(d.W,{isCreate:!0,saveTopic:J,handleCancel:o,topicData:R,setTopicData:B}))):i().createElement(r.PageSection,{variant:r.PageSectionVariants.light,type:r.PageSectionTypes.wizard,isFilled:!0},i().createElement(r.Wizard,{navAriaLabel:$+" steps",mainAriaLabel:$+" content",steps:Z,onClose:H,onSave:J,"data-testid":"topicBasicCreate-Wizard"})))},I=function(e){var t=e.setIsCreateTopic,a=e.kafkaInstanceLink,r=e.kafkaName,l=e.kafkaPageLink,c=e.onCloseCreateTopic,s=(0,n.useState)(!1),m=s[0],u=s[1];return i().createElement(i().Fragment,null,i().createElement(o,{isSwitchChecked:m,setIsSwitchChecked:u,kafkaName:r,kafkaInstanceLink:a,kafkaPageLink:l}),i().createElement(h,{isSwitchChecked:m,setIsCreateTopic:t,onCloseCreateTopic:c}))}}}]);
//# sourceMappingURL=410.fa330e64.bundle.js.map