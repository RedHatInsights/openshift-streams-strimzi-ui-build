/*! For license information please see 3450.5f220624.js.LICENSE.txt */
"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[3450,5893],{55140:(e,a,t)=>{t.d(a,{Z:()=>o});var n=t(54025),i=function(){return i=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var i in a=arguments[t])Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);return e},i.apply(this,arguments)};const o=function(e){var a,t=(0,n.useScalprum)(),o=(null===(a=t.api)||void 0===a?void 0:a.chrome)||{};return o=i(i({},o),{initialized:t.initialized}),"function"==typeof e?e(o):o}},27958:()=>{},27418:e=>{var a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var a={},t=0;t<10;t++)a["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(a).map((function(e){return a[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,s,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))t.call(o,l)&&(r[l]=o[l]);if(a){s=a(o);for(var d=0;d<s.length;d++)n.call(o,s[d])&&(r[s[d]]=o[s[d]])}}return r}},75251:(e,a,t)=>{t(27418);var n=t(93264),i=60103;if(a.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),a.Fragment=o("react.fragment")}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,a,t){var n,o={},l=null,d=null;for(n in void 0!==t&&(l=""+t),void 0!==a.key&&(l=""+a.key),void 0!==a.ref&&(d=a.ref),a)r.call(a,n)&&!c.hasOwnProperty(n)&&(o[n]=a[n]);if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===o[n]&&(o[n]=a[n]);return{$$typeof:i,type:e,key:l,ref:d,props:o,_owner:s.current}}a.jsx=l,a.jsxs=l},85893:(e,a,t)=>{e.exports=t(75251)},68640:(e,a,t)=>{t.d(a,{J:()=>c});var n=t(85893),i=t(93264),o=t.n(i),s=t(15847),r=t(97644);const c=()=>{const{registerModals:e}=(0,r.useModal)();return e((()=>{const{t:e}=(0,s.useTranslation)(["kafkaTemporaryFixMe"]),a=new URLSearchParams(document.location.search).get("testRelease");return{[r.ModalType.KafkaDeleteTopic]:{lazyComponent:o().lazy((()=>t.e(7290).then(t.bind(t,37290)))),variant:"small"},[r.ModalType.KafkaUpdatePartitions]:{lazyComponent:o().lazy((()=>t.e(1356).then(t.bind(t,21356)))),variant:"small"},[r.ModalType.KafkaDeleteConsumerGroup]:{lazyComponent:o().lazy((()=>Promise.all([t.e(3444),t.e(2546)]).then(t.bind(t,12546)))),variant:"small"},[r.ModalType.KafkaConsumerGroupResetOffset]:{lazyComponent:o().lazy((()=>Promise.all([t.e(3444),t.e(9537)]).then(t.bind(t,69537)))),variant:"large"},[r.ModalType.KafkaManagePermissions]:{lazyComponent:o().lazy((()=>a?Promise.all([t.e(2650),t.e(4303)]).then(t.bind(t,84303)):Promise.all([t.e(3304),t.e(6429),t.e(3444),t.e(5138),t.e(3644),t.e(2650),t.e(4888)]).then(t.bind(t,14888)))),variant:"large",title:e("permission.manage_permissions_dialog.title")}}})()),(0,n.jsx)(n.Fragment,{})}},82639:(e,a,t)=>{t.d(a,{bN:()=>l,hI:()=>c,wu:()=>d});var n=t(87967),i=t(85893),o=t(93264),s=t(3669);const r=(0,o.createContext)(void 0),c=()=>(0,o.useContext)(r),l=({children:e})=>{const[a,t]=(0,o.useState)(1),[n,s]=(0,o.useState)(10);return(0,i.jsx)(r.Provider,Object.assign({value:{page:a,perPage:n,setPage:t,setPerPage:s}},{children:e}))},d=e=>{var{itemCount:a,variant:t=s.PaginationVariant.top,isCompact:r,titles:l}=e,d=(0,n.__rest)(e,["itemCount","variant","isCompact","titles"]);const{setPage:u,setPerPage:p,perPage:b,page:g}=c()||{},v=(0,o.useCallback)(((e,a)=>{u&&u(a)}),[u]),m=(0,o.useCallback)(((e,a)=>{u&&u(1),p&&p(a)}),[u,p]);return(0,i.jsx)(s.Pagination,Object.assign({itemCount:a,perPage:b,page:g,onSetPage:v,variant:t,onPerPageSelect:m,isCompact:r},d,{titles:l}))}},2766:(e,a,t)=>{t.d(a,{$:()=>l});var n=t(85893),i=t(93264),o=t(15847),s=t(73685),r=t(3669),c=t(64517);const l=({activeTabKey:e})=>{const{t:a}=(0,o.useTranslation)(["kafkaTemporaryFixMe"]),t=(0,s.useHistory)(),{kafkaPageLink:l,kafkaName:d,handleInstanceDrawer:u,onDeleteInstance:p}=(0,c.S)()||{},[b,g]=(0,i.useState)(),v=e=>{u&&u(!0,e)},m=(0,n.jsxs)(r.Breadcrumb,Object.assign({ouiaId:"breadcrumb"},{children:[(0,n.jsx)(r.BreadcrumbItem,{render:()=>(0,n.jsx)(s.Link,Object.assign({to:l||"#"},{children:a("common.kafka_instance")}))}),(0,n.jsx)(r.BreadcrumbItem,Object.assign({to:"#",isActive:!0},{children:d||a("common.kafka_instance_name")}))]})),f=[(0,n.jsx)(r.DropdownItem,Object.assign({onClick:()=>v("details")},{children:a("common.view_instance")}),"view-kafka"),(0,n.jsx)(r.DropdownItem,Object.assign({onClick:()=>v("connection")},{children:a("common.view_connection")}),"connect-kafka"),(0,n.jsx)(r.DropdownItem,Object.assign({onClick:p},{children:a("common.delete_instance")}),"delete-kafka")];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("section",Object.assign({className:"pf-c-page__main-breadcrumb"},{children:m})),(0,n.jsx)(r.PageSection,Object.assign({variant:r.PageSectionVariants.light},{children:(0,n.jsxs)(r.Level,{children:[(0,n.jsx)(r.Title,Object.assign({headingLevel:"h1"},{children:d||a("common.kafka_instance_name")})),(0,n.jsx)(r.Dropdown,{onSelect:()=>{g(!b)},toggle:(0,n.jsx)(r.KebabToggle,{"data-ouia-component-id":"kebab-menu",onToggle:e=>{g(e)},id:"toggle-data-plane"}),isOpen:b,isPlain:!0,dropdownItems:f,position:r.DropdownPosition.right})]})})),(0,n.jsx)(r.PageSection,Object.assign({variant:r.PageSectionVariants.light,padding:{default:"noPadding"},className:"pf-c-page__main-tabs"},{children:(0,n.jsxs)(r.Tabs,Object.assign({activeKey:e,onSelect:(e,a)=>{let n;switch(a){case 1:default:n="dashboard";break;case 2:n="topics";break;case 3:n="consumer-groups";break;case 4:n="acls";break;case 5:n="settings"}t.push(n)},"data-testid":"pageKafka-tabProperties",className:"pf-m-page-insets"},{children:[(0,n.jsx)(r.Tab,{title:(0,n.jsx)(r.TabTitleText,{children:a("dashboard.dashboard")}),eventKey:1,"data-testid":"pageKafka-tabDashboard",id:"dashboard-tab-section","aria-label":a("dashboard.dashboard"),tabContentId:"kafka-ui-TabcontentDashboard",ouiaId:"tab-Dashboard"}),(0,n.jsx)(r.Tab,{title:(0,n.jsx)(r.TabTitleText,{children:a("topic.topics")}),eventKey:2,"data-testid":"pageKafka-tabTopics",id:"topics-tab-section","aria-label":a("topic.topics"),tabContentId:"kafka-ui-TabcontentTopicsList",ouiaId:"tab-Topics"}),(0,n.jsx)(r.Tab,{title:(0,n.jsx)(r.TabTitleText,{children:a("consumerGroup.consumer_groups")}),eventKey:3,"data-testid":"pageKafka-tabConsumers",id:"consumer-groups-tab-section","aria-label":a("consumerGroup.consumer_groups"),tabContentId:"kafka-ui-TabcontentConsumersList",ouiaId:"tab-Consumers"}),(0,n.jsx)(r.Tab,{title:(0,n.jsx)(r.TabTitleText,{children:a("permission.tab.label")}),eventKey:4,"data-testid":"pageKafka-tabPermissions",id:"permissions-tab-section","aria-label":a("permission.tab.label"),tabContentId:"kafka-ui-TabcontentPermissions",ouiaId:"tab-Permissions"}),(0,n.jsx)(r.Tab,{title:(0,n.jsx)(r.TabTitleText,{children:a("settings.settings")}),eventKey:5,"data-testid":"pageKafka-tabSettings",id:"settings-tab-section","aria-label":a("settings.settings"),tabContentId:"kafka-ui-TabcontentSettings",ouiaId:"tab-Settings"})]}))}))]})}},3654:(e,a,t)=>{t.d(a,{E:()=>i});var n=t(93264);const i=t.n(n)().createContext(void 0)},64517:(e,a,t)=>{t.d(a,{J:()=>i,S:()=>o});var n=t(93264);const i=t.n(n)().createContext(void 0),o=()=>(0,n.useContext)(i)},63052:(e,a,t)=>{t.d(a,{K:()=>i});var n=t(93264);const i=(e,a)=>{const t=(0,n.useRef)();(0,n.useEffect)((()=>{t.current=e}),[e]),(0,n.useEffect)((()=>{if(null!==a){const e=setTimeout((function(){void 0!==t.current&&t.current()}),a);return()=>{clearInterval(e)}}}),[e,a])}},73450:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var n=t(85893),i=t(3669),o=t(87967),s=t(55140),r=t(93264),c=t(73685),l=t(83463),d=t(64517),u=t(3654),p=t(97644),b=t(63052),g=t(60540),v=t(5736);const m=()=>{const{analytics:e}=(0,s.Z)(),{kafka:a,onError:t}=(0,d.S)()||{},m=(0,l.useTopicLabels)(),{showModal:f}=(0,p.useModal)(),k=(0,r.useContext)(u.E),h=(0,c.useHistory)(),{getBasename:T}=(0,p.useBasename)()||{getBasename:()=>""},y=T(),[j,P]=(0,r.useState)(null),[C,x]=(0,r.useState)(),{page:_,perPage:w,setPagination:O,setPaginationQuery:S}=(0,l.usePaginationSearchParams)(),I=(0,r.useCallback)((()=>S(1,w)),[w,S]),K=(0,l.useURLSearchParamsChips)("topics",I),[D,E,M]=(0,l.useSortableSearchParams)(g.CW,m.fields),N=e=>{h.push(`${y}/topic/update/${e}`)},R=(0,r.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){var e,a;try{yield(0,g.BB)(k,_,w,E,M,K.chips[0]).then((({topics:e,count:a})=>{P(e),x(a)}))}catch(n){let i,o;n&&(0,v.I)(n)&&(o=null===(e=n.response)||void 0===e?void 0:e.data.code,i=null===(a=n.response)||void 0===a?void 0:a.data.error_message),t&&401===o&&t(o,i)}}))),[k,t,_,w,E,M,K.chips]);(0,r.useEffect)((()=>{R()}),[K.chips,E,M,_,w,R]),(0,b.K)((()=>R()),1e3);const L=(0,r.useCallback)((()=>{P(void 0),K.clear()}),[K]);return(0,n.jsx)(i.Card,Object.assign({className:"kafka-ui-m-full-height","data-ouia-page-id":"tableTopics"},{children:(0,n.jsx)(l.KafkaTopics,{topics:j,getUrlFortopic:e=>`${y}/topics/${e.name}`,onDelete:t=>{return n=t.name,e.track("RHOSAK Delete Topic",{entityId:null==a?void 0:a.id,topic:n,status:"prompt"}),void f(p.ModalType.KafkaDeleteTopic,{topicName:n,onDeleteTopic:()=>{e.track("RHOSAK Delete Topic",{entityId:null==a?void 0:a.id,topic:n,status:"success"})}});var n},onEdit:e=>{return a=e.name,void(N&&N(a));var a},onSearchTopic:e=>{K.clear(),K.toggle(e)},onClearAllFilters:L,topicName:K.chips,onRemoveTopicChip:K.clear,onRemoveTopicChips:K.clear,onTopicLinkClick:e=>{e.name},page:_,perPage:w,itemCount:C,onPageChange:O,onCreateTopic:()=>{h.push(`${y}/topic/create`)},isColumnSortable:D})}))};var f=t(82639),k=t(2766),h=t(68640);t(27958);const T=({kafkaName:e,kafkaPageLink:a,handleInstanceDrawer:t,redirectAfterDeleteInstance:o,kafka:s,onError:r,apiBasePath:c,getToken:b})=>{const{showModal:g}=(0,p.useModal)();return(0,n.jsx)(u.E.Provider,Object.assign({value:{basePath:c,getToken:b}},{children:(0,n.jsx)(d.J.Provider,Object.assign({value:{kafkaName:e,kafkaPageLink:a,handleInstanceDrawer:t,kafka:s,redirectAfterDeleteInstance:o,onError:r,onDeleteInstance:()=>{g&&g(p.ModalType.KasDeleteInstance,{kafka:s,onDelete:o})}}},{children:(0,n.jsx)(l.ModalProvider,{children:(0,n.jsxs)(f.bN,{children:[(0,n.jsx)(k.$,{activeTabKey:2}),(0,n.jsxs)(i.PageSection,Object.assign({hasOverflowScroll:!0},{children:[(0,n.jsx)(m,{}),(0,n.jsx)(h.J,{})]}))]})})}))}))}},60540:(e,a,t)=>{t.d(a,{BB:()=>s,BK:()=>u,BN:()=>d,CW:()=>p,Rh:()=>r,eR:()=>l});var n,i=t(87967),o=t(29827);!function(e){e.name="name",e.partitions="partitions",e.retentionMs="retention.ms",e.retentionSize="retention.bytes"}(n||(n={}));const s=(e,a,t,n,s,r)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const i=yield null==e?void 0:e.getToken(),c=new o.TopicsApi(new o.Configuration({accessToken:i,basePath:null==e?void 0:e.basePath})),l=yield c.getTopics(void 0,void 0,t,r,a,s,n),d=(l.data.items||[]).map((e=>{var a,t,n,i,o;return{name:e.name,partitions:(null===(a=e.partitions)||void 0===a?void 0:a.length)||0,"retention.bytes":(null===(n=null===(t=e.config)||void 0===t?void 0:t.find((({key:e})=>"retention.bytes"===e)))||void 0===n?void 0:n.value)||"","retention.ms":(null===(o=null===(i=e.config)||void 0===i?void 0:i.find((({key:e})=>"retention.ms"===e)))||void 0===o?void 0:o.value)||""}}));return{count:l.data.total,topics:d}})),r=(e,a)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield null==a?void 0:a.getToken(),n=new o.TopicsApi(new o.Configuration({accessToken:t,basePath:null==a?void 0:a.basePath})),{data:i}=yield n.getTopic(e);return c(i)})),c=e=>{var a,t,n;const i={name:"",numPartitions:"0"};return e&&e.name&&(i.name=e.name),null===(a=e.config)||void 0===a||a.forEach((e=>{if(e.key&&e.value){const a=e.key;i[a]=e.value}})),i.numPartitions=(null===(t=null==e?void 0:e.partitions)||void 0===t?void 0:t.length.toString())||"0",i.replicationFactor=(null==e?void 0:e.partitions)&&(null===(n=null==e?void 0:e.partitions[0].replicas)||void 0===n?void 0:n.length.toString())||"0",i},l=(e,a,t)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const n=yield null==t?void 0:t.getToken(),i=new o.TopicsApi(new o.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath}));return(yield i.updateTopic(e,a)).status})),d=(e,a)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield null==a?void 0:a.getToken(),n=new o.TopicsApi(new o.Configuration({accessToken:t,basePath:null==a?void 0:a.basePath})),i=yield n.getTopic(e),s=(i.data.partitions||[]).map((e=>{var a;return(null===(a=e.replicas)||void 0===a?void 0:a.length)||0})).reduce(((e=0,a=0)=>e+a)).toString(),r=i.data;return r.config=r.config||[],r.config.push({key:"replicationFactor",value:s}),i.data})),u=(e,a)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield null==a?void 0:a.getToken(),n=new o.TopicsApi(new o.Configuration({accessToken:t,basePath:null==a?void 0:a.basePath}));yield n.deleteTopic(e)})),p=["partitions","retention.ms","retention.bytes"]},5736:(e,a,t)=>{t.d(a,{I:()=>n});const n=e=>void 0!==e}}]);
//# sourceMappingURL=3450.5f220624.js.map