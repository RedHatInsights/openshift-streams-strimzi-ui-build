(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[410],{9410:(e,t,a)=>{"use strict";a.d(t,{e:()=>k});var n=a(7522),i=a.n(n),r=a(3004),l=function(e){var t=e.isSwitchChecked,a=e.setIsSwitchChecked,n=i().createElement(r.Breadcrumb,null,i().createElement(r.BreadcrumbItem,{to:"/openshiftstreams"},"Kafka Instances"),i().createElement(r.BreadcrumbItem,{to:"/openshiftstreams"},"Kafka Instance Name"),i().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},"Create topic"));return i().createElement(i().Fragment,null,i().createElement("section",{className:"pf-c-page__main-breadcrumb"},n),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(r.Title,{headingLevel:"h1",size:"2xl"},"Create topic"),i().createElement("br",null),i().createElement(r.Switch,{id:"simple-switch",label:"Show all available options",labelOff:"Show all available options",isChecked:t,onChange:a,className:"create-topic-wizard"})))},o=(a(3174),a(3006)),c=function(e){var t=e.topicNameInput,a=e.setTopicNameInput,l=e.topicNameValidated,c=e.setTopicNameValidated,s=(0,n.useState)("This is a required field"),m=s[0],u=s[1],d=(0,o.useTranslation)().t;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},"Topic name"),i().createElement(r.Text,{component:r.TextVariants.p},"Unique name used to recognize your topic"),i().createElement(r.Text,{component:r.TextVariants.small},"The topic name is also used by your producers and consumers as part of the connection information, so make it something easy to recognize.")),i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormGroup,{label:"Topic name",fieldId:"step-topic-name-form",helperText:"Must be letters (Aa-Zz), numbers, underscores( _ ), or hyphens ( - ).",helperTextInvalid:m,validated:l,isRequired:!0},i().createElement(r.TextInput,{isRequired:!0,type:"text",id:"step-topic-name-input",name:"step-topic-name","aria-describedby":"step-topic-name-helper",value:t,onChange:function(e){!function(e){var t=new RegExp("^[0-9A-Za-z_-]+$");e.length&&!t.test(e)?(u('Invalid input. Only letters (Aa-Zz) , numbers " _ " and " - " are accepted.'),c("error")):e.length<1?(u("This is a required field"),c("error")):e.length>249?(c("error"),u("Topic name cannot exceed 249 characters")):c("default")}(e),a(e)},placeholder:d("createTopic.enterName"),validated:l}))))},s=function(e){var t=e.partitionTouchspinValue,a=e.setPartitionTouchspinValue;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},"Partitions"),i().createElement(r.Text,{component:r.TextVariants.p},"An ordered list of messages"),i().createElement(r.Text,{component:r.TextVariants.small},"One or more partitions make up a topic. Partitions are distributed across the brokers to increase the scalability of your topic. You can also use them to distribute messages across the members of the consumer group.")),i().createElement(r.Form,null,i().createElement(r.FormGroup,{label:"Partitions",fieldId:"step-topic-name-form",helperText:"One partition is sufficient for getting started, but production systems often have more.",isRequired:!0},i().createElement(r.NumberInput,{onPlus:function(){a(t+1)},onMinus:function(){a(t-1)},value:t,inputName:"input",onChange:function(e){a(Number(e.target.value))},widthChars:20,min:1}))))},m=function(e){var t,a,l=e.setMsgRetentionValue,o=e.currentPeriod,c=e.currentSize,s=e.setCurrentPeriod,m=e.setCurrentSize,u=e.setRetentionSize;!function(e){e[e.MILLISECOND=1]="MILLISECOND",e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(t||(t={})),function(e){e[e.BYTE=1]="BYTE",e[e.KILOBYTE=1e3]="KILOBYTE",e[e.MEGABYTE=1e6]="MEGABYTE",e[e.GIGABYTE=1e9]="GIGABYTE",e[e.TERABYTE=1e12]="TERABYTE",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(a||(a={}));var d=(0,n.useState)(7),p=d[0],E=d[1],T=(0,n.useState)(1),h=T[0],f=T[1],S=(0,n.useState)(!1),b=S[0],g=S[1],k=(0,n.useState)(!1),I=k[0],y=k[1],v=(0,n.useState)(!1),C=v[0],N=v[1],x=(0,n.useState)(!1),M=x[0],U=x[1],O=(0,n.useState)(t.DAY),w=O[0],A=O[1],D=(0,n.useState)(a.BYTE),L=D[0],V=D[1];(0,n.useEffect)((function(){o===t.DAY?l(t.DAY):o===t.WEEK?l(t.WEEK):o===t.UNLIMITED?l(t.UNLIMITED):o===t.CUSTOM&&l(w*p),c===a.UNLIMITED?u(a.UNLIMITED):c===a.CUSTOM&&u(L*h)}),[o,c,p,h,w,L]);var z=function(e,n){var i=n.target.name;"radioDay"===i?s(t.DAY):"radioWeek"===i?s(t.WEEK):"radioUnlimitedTime"===i?s(t.UNLIMITED):"radioCustomTime"===i&&s(t.CUSTOM),"radioCustomSize"===i?m(a.CUSTOM):"radioUnlimitedSize"===i&&m(a.UNLIMITED)};return i().createElement(i().Fragment,null,i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},"Message retention"),i().createElement(r.Text,{component:r.TextVariants.p},"How long messages are retained and the maximum total size of all log segments in a partition before they are deleted to free up space"),i().createElement(r.Text,{component:r.TextVariants.small},"Messages that aren't read by a consumer within this time will be missed. By default, a limit is only applied to retention time.")),i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormGroup,{fieldId:"form-group-retention-time-in-wizard",label:"Retention time"},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:o===t.DAY,name:"radioDay",onChange:z,label:"A day","aria-label":"A day",id:"radio-controlled-1",value:"day"}),i().createElement(r.Radio,{isChecked:o===t.WEEK,name:"radioWeek",onChange:z,label:"A week","aria-label":"A week",id:"radio-controlled-2",value:"week"}),i().createElement(r.Radio,{isChecked:o===t.CUSTOM,name:"radioCustomTime",onChange:z,label:"Custom duration","aria-label":"custom input",id:"radio-controlled-4",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){E(p-1)},onPlus:function(){E(p+1)},value:p,onChange:function(e){E(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){g(e)},onSelect:function(e,a){"days"===a?A(t.DAY):"unlimited"===a?A(t.UNLIMITED):"milliseconds"===a?A(t.MILLISECOND):"seconds"===a?A(t.SECOND):"minutes"===a?A(t.MINUTE):"hours"===a&&A(t.HOUR),N(a),g(!1)},selections:C,isOpen:b},i().createElement(r.SelectOption,{key:0,value:"days",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:1,value:"seconds"}),i().createElement(r.SelectOption,{key:2,value:"minutes"}),i().createElement(r.SelectOption,{key:3,value:"hours"}),i().createElement(r.SelectOption,{key:4,value:"milliseconds"}))))),i().createElement(r.Radio,{isChecked:o===t.UNLIMITED,name:"radioUnlimitedTime",onChange:z,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-3",value:"unlimited"}))),i().createElement(r.FormGroup,{fieldId:"form-group-retention-size-in-wizard",label:"Retention size"},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:c===a.UNLIMITED,name:"radioUnlimitedSize",onChange:z,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-6",value:"unlimited"}),i().createElement(r.Radio,{isChecked:c===a.CUSTOM,name:"radioCustomSize",onChange:z,label:"Custom size","aria-label":"custom input",id:"radio-controlled-5",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){f(h-1)},onPlus:function(){f(h+1)},value:h,onChange:function(e){f(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){y(e)},onSelect:function(e,t){"unlimited"===t?V(a.UNLIMITED):"bytes"===t?V(a.BYTE):"kilobytes"===t?V(a.KILOBYTE):"megabytes"===t?V(a.MEGABYTE):"gigabytes"===t?V(a.GIGABYTE):"terabytes"===t&&V(a.TERABYTE),U(t),y(!1)},selections:M,isOpen:I},i().createElement(r.SelectOption,{key:5,value:"bytes",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:6,value:"kilobytes"}),i().createElement(r.SelectOption,{key:7,value:"megabytes"}),i().createElement(r.SelectOption,{key:8,value:"gigabytes"}),i().createElement(r.SelectOption,{key:9,value:"terabytes"}))))))))))},u=a(7253),d=function(e){var t=e.replicationFactor,a=e.minInSyncReplica,n=(0,o.useTranslation)().t;return i().createElement(r.Stack,{hasGutter:!0,className:"kafka-ui--wizard-main-body__stack"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.h2},"Replicas"),i().createElement(r.Text,{component:r.TextVariants.p},"How many copies of a topic will be made for high availability."),i().createElement(r.Text,{component:r.TextVariants.small},"The partitions of each topic can be replicated across a configurable number of brokers.")),i().createElement(r.Alert,{variant:"info",isInline:!0,title:"Streams for Apache Kafka only supports 3 replicas and a minimum in-sync replica factor of 2."}),i().createElement(u.R,{btnAriaLabel:"topic detail replicas",fieldLabel:"Replicas",fieldValue:t.toString(),popoverBody:n("createTopic.replicasLabelBody"),popoverHeader:n("createTopic.replicasLabelHead")}),i().createElement(u.R,{btnAriaLabel:"topic detail min-in-sync replica",fieldLabel:"Minimum in-sync replicas",fieldValue:a.toString(),popoverBody:n("createTopic.inSyncReplicasLabelBody"),popoverHeader:n("createTopic.inSyncReplicasLabelHead")}))},p=a(3921),E=a(7887),T=a(1249),h=a(9115),f=a(7830),S=a(3526),b=a(5977),g=function(e){var t=e.setIsCreateTopic,a=e.isSwitchChecked,l=(0,n.useContext)(h.E),o=(0,b.k6)(),u=(0,n.useContext)(S.w).addAlert,g=(0,n.useState)(1),k=g[0],I=g[1],y=(0,n.useState)(1),v=y[0],C=y[1],N=(0,n.useState)(""),x=N[0],M=N[1],U=(0,n.useState)(1),O=U[0],w=U[1],A=(0,n.useState)(3)[0],D=(0,n.useState)(2)[0],L=(0,n.useState)("default"),V=L[0],z=L[1],R=(0,n.useState)({name:"",numPartitions:"1","retention.ms":"7","retention.ms.unit":"days","retention.bytes":"-1","retention.bytes.unit":"bytes","cleanup.policy":"delete"}),B=R[0],P=R[1],Y=i().useState(864e5),F=Y[0],_=Y[1],G=i().useState(-1),K=G[0],W=G[1],H=function(){t&&t(!1)},q=function(){var e=a?(0,T.hM)((0,T.L3)(B)):{name:x,settings:{numPartitions:O,config:[{key:"retention.ms",value:k.toString()},{key:"retention.bytes",value:v.toString()}]}};new E.M2(new f.VK({basePath:null==l?void 0:l.basePath,accessToken:null==l?void 0:l.getToken})).createTopic(e).then((function(e){200===e.status&&u("The topic was successfully created in the Kafka instance",r.AlertVariant.success),H()})).catch((function(e){u(e.response.data.error_message,r.AlertVariant.danger),H()}))},J=[{name:"Topic name",enableNext:""!==x.trim()&&"default"===V,component:i().createElement(c,{topicNameInput:x,setTopicNameInput:M,topicNameValidated:V,setTopicNameValidated:z})},{name:"Partitions",canJumpTo:""!==x.trim(),component:i().createElement(s,{partitionTouchspinValue:O,setPartitionTouchspinValue:w})},{name:"Message retention",canJumpTo:""!==x.trim(),component:i().createElement(m,{setMsgRetentionValue:I,currentPeriod:F,currentSize:K,setCurrentPeriod:_,setCurrentSize:W,setRetentionSize:C})},{name:"Replicas",canJumpTo:""!==x.trim(),component:i().createElement(d,{replicationFactor:A,minInSyncReplica:D}),nextButtonText:"Finish"}],Z="Create topics wizard";return i().createElement(i().Fragment,null,a?i().createElement(i().Fragment,null,i().createElement(r.Divider,{className:"kafka-ui--divider--FlexShrink"}),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(p.W,{isCreate:!0,saveTopic:q,handleCancel:function(){o.push("/topics")},topicData:B,setTopicData:P}))):i().createElement(r.PageSection,{variant:r.PageSectionVariants.light,type:r.PageSectionTypes.wizard,isFilled:!0},i().createElement(r.Wizard,{navAriaLabel:Z+" steps",mainAriaLabel:Z+" content",steps:J,onClose:H,onSave:q,"data-testid":"topicBasicCreate-Wizard"})))},k=function(e){var t=e.setIsCreateTopic,a=(0,n.useState)(!1),r=a[0],o=a[1];return i().createElement(i().Fragment,null,i().createElement(l,{isSwitchChecked:r,setIsSwitchChecked:o}),i().createElement(g,{isSwitchChecked:r,setIsCreateTopic:t}))}}}]);
//# sourceMappingURL=410.69684027.bundle.js.map