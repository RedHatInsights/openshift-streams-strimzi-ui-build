{"version":3,"file":"6195.f2d442e1.js","mappings":"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","sources":["webpack://kafka-ui/./src/components/FormGroupWithPopover/FormGroupWithPopover.tsx","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/SelectAccount.tsx","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/CreateSelect.tsx","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/CreateTypeahead.tsx","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/acls.ts","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/CreatePermissions.tsx","webpack://kafka-ui/./src/modules/Permissions/components/ManagePermissionsDialog/ExistingAclTable.tsx","webpack://kafka-ui/./src/modules/Permissions/dialogs/ManagePermissions/ManagePermissions.tsx","webpack://kafka-ui/./src/services/topicNameValidation.ts"],"sourcesContent":["import { FormGroup, Popover } from '@patternfly/react-core';\nimport HelpIcon from '@patternfly/react-icons/dist/js/icons/help-icon';\nimport React from 'react';\n\ninterface IFormGroupWithPopoverProps {\n  children: React.ReactNode;\n  labelHead: string;\n  fieldId: string;\n  fieldLabel?: string;\n  labelBody: string;\n  buttonAriaLabel: string;\n  validated?: 'default' | 'error' | 'success' | 'warning' | undefined;\n  helperText?: string;\n  helperTextInvalid?: string;\n  isRequired?: boolean;\n}\n\nexport const FormGroupWithPopover: React.FC<IFormGroupWithPopoverProps> = ({\n  children,\n  labelHead,\n  fieldId,\n  fieldLabel,\n  labelBody,\n  buttonAriaLabel,\n  validated,\n  helperText,\n  helperTextInvalid,\n  isRequired,\n}) => {\n  const preventButtonSubmit = (event) => event.preventDefault();\n\n  return (\n    <FormGroup\n      fieldId={fieldId}\n      label={fieldLabel}\n      validated={validated}\n      helperText={helperText}\n      helperTextInvalid={helperTextInvalid}\n      isRequired={isRequired}\n      labelIcon={\n        <Popover\n          headerContent={<div>{labelHead}</div>}\n          bodyContent={<div>{labelBody}</div>}\n        >\n          <button\n            aria-label={buttonAriaLabel}\n            onClick={preventButtonSubmit}\n            className='pf-c-form__group-label-help'\n          >\n            <HelpIcon noVerticalAlign />\n          </button>\n        </Popover>\n      }\n    >\n      {children}\n    </FormGroup>\n  );\n};\n","import React, { useState } from 'react';\nimport { Principal, PrincipalType } from '@rhoas/app-services-ui-shared';\nimport { useTranslation } from 'react-i18next';\nimport { FormGroupWithPopover } from '@app/components';\nimport {\n  Divider,\n  Select,\n  SelectGroup,\n  SelectOption,\n  SelectVariant,\n} from '@patternfly/react-core';\nimport { Validated } from '@app/modules/Permissions/components/ManagePermissionsDialog/validated';\n\nexport type SelectAccountProps = {\n  id: Validated<string | undefined>;\n  setId: React.Dispatch<React.SetStateAction<Validated<string | undefined>>>;\n  initialOptions: Principal[];\n  setEscapeClosesModal: (closes: boolean) => void;\n};\n\nexport const SelectAccount: React.FunctionComponent<SelectAccountProps> = ({\n  setId,\n  id,\n  initialOptions,\n  setEscapeClosesModal,\n}) => {\n  const { t } = useTranslation();\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const onToggle = (newState) => {\n    if (newState) {\n      setEscapeClosesModal(false);\n    } else {\n      setEscapeClosesModal(true);\n    }\n    setIsOpen(newState);\n  };\n\n  const clearSelection = () => {\n    setId({ value: undefined });\n    setIsOpen(false);\n  };\n\n  const onSelect = (event, selection, isPlaceholder) => {\n    if (selection === '') selection = undefined;\n    if (isPlaceholder) {\n      clearSelection();\n    } else {\n      setId(() => {\n        if (selection === undefined) {\n          return {\n            value: selection,\n            validated: 'error',\n            errorMessage: t(\n              'permission.manage_permissions_dialog.must_select_account_error'\n            ),\n          };\n        } else {\n          return {\n            validated: 'success',\n            value: selection,\n          };\n        }\n      });\n    }\n    setIsOpen(false);\n  };\n\n  return (\n    <FormGroupWithPopover\n      labelHead={t('permission.manage_permissions_dialog.account_id_title')}\n      fieldId='kafka-instance-name'\n      fieldLabel={t('permission.manage_permissions_dialog.account_id_title')}\n      labelBody={t('permission.manage_permissions_dialog.account_id_help')}\n      buttonAriaLabel={t(\n        'permission.manage_permissions_dialog.account_id_aria'\n      )}\n      isRequired={true}\n      helperTextInvalid={id.errorMessage}\n      validated={id.validated || 'default'}\n    >\n      <Select\n        variant={SelectVariant.typeahead}\n        typeAheadAriaLabel={t(\n          'permission.manage_permissions_dialog.account_id_typeahead_aria'\n        )}\n        onToggle={onToggle}\n        onSelect={onSelect}\n        onClear={clearSelection}\n        selections={id.value}\n        isOpen={isOpen}\n        isInputValuePersisted={true}\n        placeholderText={t(\n          'permission.manage_permissions_dialog.account_id_typeahead_placeholder'\n        )}\n        isCreatable={false}\n        menuAppendTo='parent'\n        maxHeight={400}\n        validated={id.validated || 'default'}\n        isGrouped={true}\n      >\n        {[\n          <SelectGroup key='all_accounts_group'>\n            <SelectOption\n              key='*'\n              value='*'\n              description={t(\n                'permission.manage_permissions_dialog.all_accounts_description'\n              )}\n            >\n              {t('permission.manage_permissions_dialog.all_accounts_title')}\n            </SelectOption>\n          </SelectGroup>,\n          <Divider key='divider' />,\n          <SelectGroup\n            label={t(\n              'permission.manage_permissions_dialog.all_accounts_service_account_group'\n            )}\n            key='service_accounts_group'\n          >\n            {initialOptions\n              .filter(\n                (principal) =>\n                  principal.principalType === PrincipalType.ServiceAccount\n              )\n              .map((principal, index) => (\n                <SelectOption\n                  key={index}\n                  value={principal.id}\n                  description={principal.displayName}\n                >\n                  {principal.id}\n                </SelectOption>\n              ))}\n          </SelectGroup>,\n          <Divider key='divider' />,\n          <SelectGroup\n            label={t(\n              'permission.manage_permissions_dialog.all_accounts_user_account_group'\n            )}\n            key='user_accounts_group'\n          >\n            {initialOptions\n              .filter(\n                (principal) =>\n                  principal.principalType === PrincipalType.UserAccount\n              )\n              .map((principal, index) => (\n                <SelectOption\n                  key={index}\n                  value={principal.id}\n                  description={principal.displayName}\n                >\n                  {principal.id}\n                </SelectOption>\n              ))}\n          </SelectGroup>,\n        ]}\n      </Select>\n    </FormGroupWithPopover>\n  );\n};\n","import { SelectOption } from '@app/modules/Permissions/components/ManagePermissionsDialog/select';\nimport { useTranslation } from 'react-i18next';\nimport React, { useState } from 'react';\nimport { Select as PFSelect } from '@patternfly/react-core/dist/js/components/Select/Select';\nimport { SelectVariant } from '@patternfly/react-core';\nimport { SelectOption as PFSelectOption } from '@patternfly/react-core/dist/js/components/Select/SelectOption';\nimport { Validated } from '@app/modules/Permissions/components/ManagePermissionsDialog/validated';\nimport { FormGroupWithPopover } from '@app/components';\nimport {\n  AclOperation,\n  AclPatternType,\n  AclPermissionType,\n  AclResourceType,\n} from '@rhoas/kafka-instance-sdk';\n\nexport type CreateSelectProps<T> = {\n  id: string;\n  options: SelectOption<T>[];\n  selected: Validated<string | undefined>;\n  setSelected: (row: number, id: T | undefined) => void;\n  row: number;\n  placeholder?: string;\n  setEscapeClosesModal: (closes: boolean) => void;\n  onSelect: (value: string) => void;\n  menuAppendTo:\n    | HTMLElement\n    | (() => HTMLElement)\n    | 'parent'\n    | 'inline'\n    | undefined;\n  onClear: () => T | undefined;\n};\n\nexport const CreateSelect = <\n  T extends AclPermissionType | AclResourceType | AclPatternType | AclOperation\n>({\n  options,\n  setSelected,\n  selected,\n  row,\n  id,\n  placeholder,\n  setEscapeClosesModal,\n  onSelect,\n  menuAppendTo,\n  onClear,\n}: CreateSelectProps<T>): React.ReactElement => {\n  const { t } = useTranslation();\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const onToggle = (newState) => {\n    if (newState) {\n      setEscapeClosesModal(false);\n    } else {\n      setEscapeClosesModal(true);\n    }\n    setIsOpen(newState);\n  };\n\n  const clearSelection = () => {\n    setSelected(row, onClear());\n    setIsOpen(false);\n  };\n\n  const select = (event, selection, isPlaceholder) => {\n    if (selection === '') selection = undefined;\n    if (isPlaceholder) clearSelection();\n    else {\n      setSelected(row, selection);\n      setIsOpen(false);\n      onSelect(selection);\n    }\n  };\n\n  return (\n    <FormGroupWithPopover\n      labelHead={t(\n        `permission.manage_permissions_dialog.assign_permissions.${id}.popover_head`\n      )}\n      fieldId={id}\n      labelBody={t(\n        `permission.manage_permissions_dialog.assign_permissions.${id}.popover_label`\n      )}\n      buttonAriaLabel={t(\n        '`permission.manage_permissions_dialog.assign_permissions.${id}.aria`'\n      )}\n      isRequired={true}\n      helperTextInvalid={selected.errorMessage}\n      validated={selected.validated || 'default'}\n    >\n      <PFSelect\n        variant={SelectVariant.single}\n        onToggle={onToggle}\n        onSelect={select}\n        onClear={clearSelection}\n        selections={selected.value}\n        isOpen={isOpen}\n        isInputValuePersisted={true}\n        placeholderText={placeholder}\n        validated={selected.validated || 'default'}\n        menuAppendTo={menuAppendTo}\n        maxHeight={200}\n      >\n        {options.map((option, index) => (\n          <PFSelectOption\n            isDisabled={option.disabled}\n            key={index}\n            value={option.value}\n            {...(option.description && { description: option.description })}\n          >\n            {option.title}\n          </PFSelectOption>\n        ))}\n      </PFSelect>\n    </FormGroupWithPopover>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { SelectOption } from '@app/modules/Permissions/components/ManagePermissionsDialog/select';\nimport { Select as PFSelect } from '@patternfly/react-core/dist/js/components/Select/Select';\nimport { SelectVariant } from '@patternfly/react-core';\nimport { SelectOption as PFSelectOption } from '@patternfly/react-core/dist/js/components/Select/SelectOption';\nimport { Validated } from '@app/modules/Permissions/components/ManagePermissionsDialog/validated';\nimport { FormGroupWithPopover } from '@app/components';\n\nexport type CreateTypeaheadProps = {\n  row: number;\n  value: Validated<string | undefined>;\n  setValue: (row: number, id: string | undefined) => void;\n  initialOptions: () => string[];\n  id: string;\n  placeholder?: string;\n  onSelect: (value: string) => void;\n  setEscapeClosesModal: (closes: boolean) => void;\n  menuAppendTo:\n    | HTMLElement\n    | (() => HTMLElement)\n    | 'parent'\n    | 'inline'\n    | undefined;\n};\n\nexport const CreateTypeahead: React.FunctionComponent<CreateTypeaheadProps> = ({\n  row,\n  setValue,\n  value,\n  initialOptions,\n  id,\n  placeholder,\n  onSelect,\n  setEscapeClosesModal,\n  menuAppendTo,\n}) => {\n  const { t } = useTranslation();\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const [options, setOptions] = useState<SelectOption<string>[]>([]);\n\n  useEffect(() => {\n    setOptions(\n      initialOptions().map((o) => {\n        return { value: o } as SelectOption<string>;\n      })\n    );\n  }, [initialOptions]);\n\n  const onToggle = (newState) => {\n    if (newState) {\n      setEscapeClosesModal(false);\n    } else {\n      setEscapeClosesModal(true);\n    }\n    setIsOpen(newState);\n  };\n\n  const clearSelection = () => {\n    setValue(row, undefined);\n    setIsOpen(false);\n  };\n\n  const select = (event, selection, isPlaceholder) => {\n    if (selection === '') selection = undefined;\n    if (isPlaceholder) clearSelection();\n    else {\n      setValue(row, selection);\n      setIsOpen(false);\n      onSelect(selection);\n    }\n  };\n\n  const onCreateOption = (newValue: string) => {\n    setOptions([...options, { value: newValue } as SelectOption<string>]);\n  };\n\n  return (\n    <FormGroupWithPopover\n      labelHead={t(\n        `permission.manage_permissions_dialog.assign_permissions.${id}.popover_head`\n      )}\n      fieldId={id}\n      labelBody={t(\n        `permission.manage_permissions_dialog.assign_permissions.${id}.popover_label`\n      )}\n      buttonAriaLabel={t(\n        '`permission.manage_permissions_dialog.assign_permissions.${id}.aria`'\n      )}\n      isRequired={true}\n      helperTextInvalid={value.errorMessage}\n      validated={value.validated || 'default'}\n    >\n      <PFSelect\n        variant={SelectVariant.typeahead}\n        typeAheadAriaLabel={t(\n          'permission.manage_permissions_dialog.assign_permissions.resource_name_aria'\n        )}\n        onToggle={onToggle}\n        onSelect={select}\n        onClear={clearSelection}\n        selections={value.value}\n        isOpen={isOpen}\n        isInputValuePersisted={true}\n        placeholderText={placeholder}\n        isCreatable={true}\n        onCreateOption={onCreateOption}\n        createText={t(\n          'permission.manage_permissions_dialog.assign_permissions.resource_name_typeahead_create_text'\n        )}\n        validated={value.validated || 'default'}\n        menuAppendTo={menuAppendTo}\n        maxHeight={200}\n      >\n        {options.map((option, index) => (\n          <PFSelectOption\n            isDisabled={option.disabled}\n            key={index}\n            value={option.value}\n            {...(option.description && { description: option.description })}\n          />\n        ))}\n      </PFSelect>\n    </FormGroupWithPopover>\n  );\n};\n","import { Validated } from '@app/modules/Permissions/components/ManagePermissionsDialog/validated';\nimport {\n  AclOperation,\n  AclPatternType,\n  AclPermissionType,\n  AclResourceType,\n} from '@rhoas/kafka-instance-sdk';\n\nexport const AllAccountsId = '*';\n\nexport const isNewAclModified = (value: NewAcl): boolean => {\n  const emptyAcl = createEmptyNewAcl();\n  return !(\n    value.permission.value === emptyAcl.permission.value &&\n    value.patternType.value === emptyAcl.patternType.value &&\n    value.resourceType.value === emptyAcl.resourceType.value &&\n    value.resource.value === emptyAcl.resource.value &&\n    value.operation.value === emptyAcl.operation.value\n  );\n};\n\nexport type NewAcl = {\n  permission: Validated<AclPermissionType | undefined>;\n  operation: Validated<AclOperation | undefined>;\n  resourceType: Validated<AclResourceType | undefined>;\n  patternType: Validated<AclPatternType | undefined>;\n  resource: Validated<string | undefined>;\n};\n\nexport const createEmptyNewAcl = (): NewAcl => {\n  return {\n    permission: {\n      value: AclPermissionType.Allow,\n    },\n    operation: {\n      value: undefined,\n    },\n    resourceType: {\n      value: undefined,\n    },\n    patternType: {\n      value: AclPatternType.Prefixed,\n    },\n    resource: {\n      value: undefined,\n    },\n  } as NewAcl;\n};\n","import {\n  AclOperation,\n  AclPatternType,\n  AclPermissionType,\n  AclResourceType,\n} from '@rhoas/kafka-instance-sdk';\nimport React from 'react';\nimport {\n  getOperations,\n  getPatternTypes,\n  getPermissionsTypes,\n  getResourceTypes,\n} from '@app/services/acls';\nimport {\n  cellWidth,\n  ICell,\n  IRowData,\n  TableVariant,\n} from '@patternfly/react-table';\nimport { useTranslation } from 'react-i18next';\nimport { MASTable } from '@app/components';\nimport { Button, FormGroup, GridItem, Tooltip } from '@patternfly/react-core';\nimport { CreateSelect } from '@app/modules/Permissions/components/ManagePermissionsDialog/CreateSelect';\nimport { sentenceCase } from 'sentence-case';\nimport { SelectOption } from '@app/modules/Permissions/components/ManagePermissionsDialog/select';\nimport { snakeCase } from 'snake-case';\nimport { CreateTypeahead } from '@app/modules/Permissions/components/ManagePermissionsDialog/CreateTypeahead';\nimport PlusCircleIcon from '@patternfly/react-icons/dist/js/icons/plus-circle-icon';\nimport TrashIcon from '@patternfly/react-icons/dist/js/icons/trash-icon';\nimport {\n  createEmptyNewAcl,\n  isNewAclModified,\n  NewAcl,\n} from '@app/modules/Permissions/components/ManagePermissionsDialog/acls';\nimport { displayName } from '@app/modules/Permissions/utils';\nimport { useValidateTopic } from '@app/services/topicNameValidation';\n\nexport type CreatePermissionsProps = {\n  selectedAccount?: string;\n  topicNames: string[];\n  consumerGroupIds: string[];\n  acls: NewAcl[];\n  setAcls: React.Dispatch<React.SetStateAction<NewAcl[]>>;\n  setEscapeClosesModal: (closes: boolean) => void;\n  resourceOperations: { [key: string]: Array<string> };\n  menuAppendTo:\n    | HTMLElement\n    | (() => HTMLElement)\n    | 'parent'\n    | 'inline'\n    | undefined;\n};\n\nexport const CreatePermissions: React.FunctionComponent<CreatePermissionsProps> =\n  ({\n    acls,\n    setAcls,\n    topicNames,\n    consumerGroupIds,\n    selectedAccount,\n    setEscapeClosesModal,\n    resourceOperations,\n    menuAppendTo,\n  }) => {\n    const { validateName } = useValidateTopic();\n    const { t } = useTranslation();\n\n    const tableColumns = [\n      {\n        title: t('permission.table.resource_column_title'),\n        columnTransforms: [cellWidth(20)],\n      },\n      {\n        title: '',\n        columnTransforms: [cellWidth(15)],\n      },\n      {\n        title: '',\n        columnTransforms: [cellWidth(25)],\n      },\n      {\n        title: t('permission.table.permissions_column_title'),\n        columnTransforms: [cellWidth(20)],\n      },\n      {\n        title: '',\n        columnTransforms: [cellWidth(20)],\n      },\n    ] as ICell[];\n\n    const setPermissionType = (row: number, value?: AclPermissionType) => {\n      setAcls((prevState) =>\n        prevState.map((v, k) => {\n          if (k === row) {\n            v.permission = { value };\n          }\n          return v;\n        })\n      );\n    };\n\n    const setOperation = (row: number, value?: AclOperation) => {\n      setAcls((prevState) =>\n        prevState.map((v, k) => {\n          if (k === row) {\n            v.operation = { value };\n          }\n          return v;\n        })\n      );\n    };\n\n    const setResourceType = (row: number, value?: AclResourceType) => {\n      setAcls((prevState) =>\n        prevState.map((v, k) => {\n          if (k === row) {\n            v.resourceType = { value };\n          }\n          return v;\n        })\n      );\n    };\n\n    const setPatternType = (row: number, value?: AclPatternType) => {\n      setAcls((prevState) =>\n        prevState.map((v, k) => {\n          if (k === row) {\n            v.patternType = { value };\n          }\n          return v;\n        })\n      );\n    };\n\n    const setResource = (row: number, value?: string) => {\n      setAcls((prevState) =>\n        prevState.map((v, k) => {\n          if (k === row) {\n            v.resource = { value };\n          }\n          return v;\n        })\n      );\n    };\n\n    const addRow = () => {\n      setAcls((prevState) => [...prevState, createEmptyNewAcl()]);\n    };\n\n    const removeRow = (row: number) => {\n      setAcls((prevState) => {\n        if (prevState.length > 1) {\n          return prevState.filter((v, k) => k !== row);\n        }\n        return [createEmptyNewAcl()];\n      });\n    };\n\n    const formGroupHelperText = () => {\n      if (selectedAccount === '*') {\n        return t(\n          'permission.manage_permissions_dialog.assign_permissions.help_all_accounts'\n        );\n      }\n      return t('permission.manage_permissions_dialog.assign_permissions.help', {\n        account_id: selectedAccount,\n      });\n    };\n\n    type CellProps = {\n      acl: NewAcl;\n      row: number;\n    };\n\n    const PatternTypeCell: React.FunctionComponent<CellProps> = ({\n      acl,\n      row,\n    }) => {\n      if (acl.resourceType.value === AclResourceType.Cluster) {\n        return <></>;\n      }\n      return (\n        <CreateSelect\n          options={getPatternTypes()\n            .map((value) => {\n              return {\n                value,\n                title:\n                  value === AclPatternType.Prefixed\n                    ? t(\n                        'permission.manage_permissions_dialog.assign_permissions.pattern_type_prefixed'\n                      )\n                    : t(\n                        'permission.manage_permissions_dialog.assign_permissions.pattern_type_literal'\n                      ),\n                description:\n                  value === AclPatternType.Prefixed\n                    ? t(\n                        'permission.manage_permissions_dialog.assign_permissions.pattern_type_prefixed_help'\n                      )\n                    : t(\n                        'permission.manage_permissions_dialog.assign_permissions.pattern_type_literal_help'\n                      ),\n              } as SelectOption<AclPatternType>;\n            })\n            .sort((a, b) => b.value.localeCompare(a.value))}\n          selected={acl.patternType}\n          setSelected={setPatternType}\n          row={row}\n          id='pattern-type'\n          setEscapeClosesModal={setEscapeClosesModal}\n          menuAppendTo={menuAppendTo}\n          onClear={() => createEmptyNewAcl().patternType.value}\n          onSelect={(value) => {\n            setAcls((prevState) => {\n              if (value === undefined) {\n                prevState[row].patternType.validated = 'error';\n                prevState[row].patternType.validated = t(\n                  'permission.manage_permissions_dialog.assign_permissions.must_select_pattern_type_error'\n                );\n              } else {\n                prevState[row].patternType.validated = 'success';\n              }\n              return prevState;\n            });\n          }}\n        />\n      );\n    };\n\n    const ResourceType: React.FunctionComponent<CellProps> = ({ row, acl }) => {\n      return (\n        <CreateSelect\n          options={getResourceTypes().map((value) => {\n            return {\n              value,\n              title: displayName(value),\n            } as SelectOption<AclResourceType>;\n          })}\n          selected={acl.resourceType}\n          setSelected={setResourceType}\n          row={row}\n          id='resource-type'\n          placeholder={t(\n            'permission.manage_permissions_dialog.assign_permissions.resource_type_placeholder'\n          )}\n          setEscapeClosesModal={setEscapeClosesModal}\n          menuAppendTo={menuAppendTo}\n          onClear={() => createEmptyNewAcl().resourceType.value}\n          onSelect={(value) => {\n            setAcls((prevState) => {\n              if (value === undefined) {\n                prevState[row].resourceType.validated = 'error';\n                prevState[row].resourceType.errorMessage = t(\n                  'permission.manage_permissions_dialog.assign_permissions.must_select_resource_type_error'\n                );\n              } else {\n                prevState[row].resourceType.validated = 'success';\n              }\n              return prevState;\n            });\n          }}\n        />\n      );\n    };\n\n    const ResourceCell: React.FunctionComponent<CellProps> = ({ row, acl }) => {\n      if (acl.resourceType.value === AclResourceType.Cluster) {\n        return <></>;\n      }\n      return (\n        <CreateTypeahead\n          row={row}\n          value={acl.resource}\n          setValue={setResource}\n          id='resource'\n          placeholder={t(\n            `permission.manage_permissions_dialog.assign_permissions.pattern_type_${\n              acl.patternType.value?.toLowerCase() || 'prefixed'\n            }_placeholder`\n          )}\n          setEscapeClosesModal={setEscapeClosesModal}\n          menuAppendTo={menuAppendTo}\n          initialOptions={() => {\n            if (acl.resourceType.value === AclResourceType.Topic) {\n              return topicNames;\n            }\n            if (acl.resourceType.value === AclResourceType.Group) {\n              return consumerGroupIds;\n            }\n            return [];\n          }}\n          onSelect={(value) => {\n            const errorMessage = validateName(value);\n            if (errorMessage !== undefined) {\n              setAcls((prevState) => {\n                prevState[row].resource.validated = 'error';\n                prevState[row].resource.errorMessage = errorMessage;\n                return prevState;\n              });\n            } else if (value !== undefined) {\n              setAcls((prevState) => {\n                prevState[row].resource.validated = 'success';\n                return prevState;\n              });\n            }\n          }}\n        />\n      );\n    };\n\n    const PermissionTypeCell: React.FunctionComponent<CellProps> = ({\n      acl,\n      row,\n    }) => {\n      return (\n        <CreateSelect\n          options={getPermissionsTypes().map((value) => {\n            return {\n              value,\n              title: sentenceCase(value),\n            } as SelectOption<AclPermissionType>;\n          })}\n          selected={acl.permission}\n          setSelected={setPermissionType}\n          row={row}\n          id='permission-type'\n          setEscapeClosesModal={setEscapeClosesModal}\n          menuAppendTo={menuAppendTo}\n          onClear={() => createEmptyNewAcl().permission.value}\n          onSelect={(value) => {\n            setAcls((prevState) => {\n              if (value === undefined) {\n                prevState[row].permission.validated = 'error';\n                prevState[row].permission.errorMessage = t(\n                  'permission.manage_permissions_dialog.assign_permissions.must_select_permission_error'\n                );\n              } else {\n                prevState[row].permission.validated = 'success';\n              }\n              return prevState;\n            });\n          }}\n        />\n      );\n    };\n\n    const OperationCell: React.FunctionComponent<CellProps> = ({\n      acl,\n      row,\n    }) => {\n      return (\n        <CreateSelect\n          options={getOperations()\n            .filter((value) => {\n              if (\n                acl.resourceType.value === undefined ||\n                acl.resourceType.value.toString() === ''\n              ) {\n                return true;\n              }\n              const resourceType = snakeCase(acl.resourceType.value.toString());\n              const operationType = snakeCase(value);\n              return resourceOperations[resourceType].some(\n                (p) => p === operationType\n              );\n            })\n            .map((value) => {\n              return {\n                value,\n                title: sentenceCase(value),\n              } as SelectOption<AclOperation>;\n            })}\n          selected={acl.operation}\n          setSelected={setOperation}\n          row={row}\n          id='operation'\n          placeholder={t(\n            'permission.manage_permissions_dialog.assign_permissions.operation_placeholder'\n          )}\n          setEscapeClosesModal={setEscapeClosesModal}\n          menuAppendTo={menuAppendTo}\n          onClear={() => createEmptyNewAcl().operation.value}\n          onSelect={(value) => {\n            setAcls((prevState) => {\n              if (value === undefined) {\n                prevState[row].operation.validated = 'error';\n                prevState[row].operation.errorMessage = t(\n                  'permission.manage_permissions_dialog.assign_permissions.must_select_operation_error'\n                );\n              } else {\n                prevState[row].operation.validated = 'success';\n              }\n              return prevState;\n            });\n          }}\n        />\n      );\n    };\n\n    const RemoveButtonCell: React.FunctionComponent<CellProps> = ({\n      row,\n      acl,\n    }) => {\n      return (\n        <Tooltip\n          content={t(\n            'permission.manage_permissions_dialog.assign_permissions.remove_row_help'\n          )}\n        >\n          <Button\n            variant='link'\n            icon={<TrashIcon />}\n            onClick={() => removeRow(row)}\n            isDisabled={!isNewAclModified(acl)}\n          />\n        </Tooltip>\n      );\n    };\n\n    return (\n      <GridItem span={12}>\n        <FormGroup\n          fieldId='createPermissions'\n          label={t(\n            'permission.manage_permissions_dialog.assign_permissions.title'\n          )}\n          helperText={formGroupHelperText()}\n          isHelperTextBeforeField={true}\n        >\n          <MASTable\n            tableProps={{\n              cells: tableColumns,\n              rows: acls.map((acl, row) => {\n                return {\n                  cells: [\n                    {\n                      title: <ResourceType row={row} acl={acl} />,\n                    },\n                    {\n                      title: <PatternTypeCell row={row} acl={acl} />,\n                    },\n                    {\n                      title: <ResourceCell acl={acl} row={row} />,\n                    },\n                    {\n                      title: <PermissionTypeCell acl={acl} row={row} />,\n                    },\n                    {\n                      title: (\n                        <div className='pf-u-display-flex pf-u-justify-content-space-between'>\n                          <div>\n                            <OperationCell acl={acl} row={row} />\n                          </div>\n                          <div>\n                            <RemoveButtonCell acl={acl} row={row} />\n                          </div>\n                        </div>\n                      ),\n                    },\n                  ],\n                } as IRowData;\n              }),\n              'aria-label': t('permission.table.table.permission_list_table'),\n              shouldDefaultCustomRowWrapper: true,\n              variant: TableVariant.compact,\n              canSelectAll: false,\n            }}\n            rowDataTestId={'tablePermissions-row'}\n          />\n          <Button variant='link' icon={<PlusCircleIcon />} onClick={addRow}>\n            {t(\n              'permission.manage_permissions_dialog.assign_permissions.add_row'\n            )}\n          </Button>\n        </FormGroup>\n      </GridItem>\n    );\n  };\n","import { EnhancedAclBinding } from '@app/services/acls';\nimport React, { useEffect, useState } from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\nimport {\n  CellBuilder,\n  permissionOperationCell,\n  resourceCell,\n} from '@app/modules/Permissions/components/PermissionsTable/Cells';\nimport { Button, FormGroup, GridItem, Label } from '@patternfly/react-core';\nimport { TrashIcon } from '@patternfly/react-icons';\nimport { cellWidth, ICell, TableVariant } from '@patternfly/react-table';\nimport { MASTable } from '@app/components';\nimport { AclBinding } from '@rhoas/kafka-instance-sdk';\n\nexport type ExistingAclTableProps = {\n  existingAcls: Array<AclBinding>;\n  selectedAccountId?: string;\n  onRemove: (acl: EnhancedAclBinding) => void;\n};\n\nexport const ExistingAclTable: React.FunctionComponent<ExistingAclTableProps> =\n  ({ existingAcls, selectedAccountId, onRemove }) => {\n    type RemovableEnhancedAclBinding = EnhancedAclBinding & {\n      removed: boolean;\n      index: number;\n    };\n\n    const { t } = useTranslation();\n    const [acls, setAcls] = useState<RemovableEnhancedAclBinding[]>([]);\n\n    useEffect(() => {\n      // Workaround as I can't work out how to pass initial state for an array\n      setAcls(\n        existingAcls.map((v, k) => {\n          const answer = v as RemovableEnhancedAclBinding;\n          answer.index = k;\n          return answer;\n        })\n      );\n    }, [existingAcls]);\n\n    const removeRow = (acl: RemovableEnhancedAclBinding) => {\n      setAcls(\n        acls.map((v) => {\n          if (v.hash() === acl.hash()) {\n            v.removed = true;\n          }\n          return v;\n        })\n      );\n      onRemove(acl);\n    };\n\n    const tableColumns = [\n      {\n        title: t('permission.table.resource_column_title'),\n        columnTransforms: [cellWidth(60)],\n      },\n      {\n        title: t('permission.table.permissions_column_title'),\n        columnTransforms: [cellWidth(20)],\n      },\n      {\n        title: '',\n        columnTransforms: [cellWidth(20)],\n      },\n    ] as ICell[];\n\n    const principalCell: CellBuilder<RemovableEnhancedAclBinding> = (item) => {\n      const RemoveButton: React.FunctionComponent = () => (\n        <div className='pf-u-display-flex pf-u-justify-content-flex-end'>\n          <Button\n            variant='link'\n            icon={<TrashIcon />}\n            onClick={() => removeRow(item)}\n          />\n        </div>\n      );\n\n      const AllAccountsLabel: React.FunctionComponent = () => (\n        <div className='pf-u-display-flex pf-u-justify-content-flex-end'>\n          <Label variant='outline'>{t('permission.table.all_accounts')}</Label>\n        </div>\n      );\n\n      if (selectedAccountId === '*' && item.principal === '*') {\n        return {\n          title: (\n            <>\n              <AllAccountsLabel /> <RemoveButton />\n            </>\n          ),\n          props: {},\n        };\n      } else if (item.principal === '*') {\n        return {\n          title: <AllAccountsLabel />,\n          props: {},\n        };\n      } else {\n        return {\n          title: <RemoveButton />,\n          props: {},\n        };\n      }\n    };\n\n    const cells = [resourceCell, permissionOperationCell, principalCell];\n\n    if (selectedAccountId === undefined || acls.length === 0) {\n      return <></>;\n    }\n\n    const HelperText: React.FunctionComponent = () => {\n      if (selectedAccountId === '*') {\n        return t(\n          'permission.manage_permissions_dialog.edit_existing.all_accounts_help'\n        );\n      }\n      return (\n        <Trans i18nKey='permission.manage_permissions_dialog.edit_existing.help'>\n          Review the list of existing permissions for the selected account. The\n          list includes account-specific permissions and permissions applied to\n          all accounts within this Kafka instance. Permissions labeled{' '}\n          <strong>All accounts</strong> cannot be removed when an individual\n          account ID is selected.\n        </Trans>\n      );\n    };\n\n    return (\n      <GridItem span={12}>\n        <FormGroup\n          fieldId='selectedAccount'\n          label={t('permission.manage_permissions_dialog.edit_existing.title')}\n          helperText={<HelperText />}\n          isHelperTextBeforeField={true}\n        >\n          <MASTable\n            tableProps={{\n              cells: tableColumns,\n              rows: [\n                ...acls\n                  .filter((acl) => !acl.removed)\n                  .map((item, row) => {\n                    return {\n                      cells: cells.map((f) => f(item, row)),\n                      originalData: item,\n                    };\n                  }),\n              ],\n              'aria-label': t('permission.table.table.permission_list_table'),\n              shouldDefaultCustomRowWrapper: true,\n              variant: TableVariant.compact,\n              canSelectAll: false,\n            }}\n            rowDataTestId={'tablePermissions-row'}\n          />\n        </FormGroup>\n      </GridItem>\n    );\n  };\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Grid,\n  GridItem,\n  Modal,\n} from '@patternfly/react-core';\nimport { useTranslation } from 'react-i18next';\nimport {\n  convertEnum,\n  EnhancedAclBinding,\n  usePermissionsService,\n} from '@app/services/acls';\nimport { ConfigContext } from '@app/contexts';\nimport {\n  BaseModalProps,\n  ManagePermissionsModalProps,\n  ManagePermissionsProps,\n  usePrincipals,\n} from '@rhoas/app-services-ui-shared';\nimport { SelectAccount } from '@app/modules/Permissions/components/ManagePermissionsDialog/SelectAccount';\nimport { CreatePermissions } from '@app/modules/Permissions/components/ManagePermissionsDialog/CreatePermissions';\nimport { Validated } from '@app/modules/Permissions/components/ManagePermissionsDialog/validated';\nimport {\n  createEmptyNewAcl,\n  isNewAclModified,\n  NewAcl,\n} from '@app/modules/Permissions/components/ManagePermissionsDialog/acls';\nimport { FormGroupWithPopover, MASLoading } from '@app/components';\nimport { useValidateTopic } from '@app/services/topicNameValidation';\nimport { ExistingAclTable } from '@app/modules/Permissions/components/ManagePermissionsDialog/ExistingAclTable';\nimport {\n  AclOperationFilter,\n  AclPatternType,\n  AclPatternTypeFilter,\n  AclPermissionTypeFilter,\n  AclResourceType,\n  AclResourceTypeFilter,\n} from '@rhoas/kafka-instance-sdk';\n\nexport const ManagePermissions: React.FC<\n  ManagePermissionsProps & BaseModalProps\n> = ({\n  hideModal,\n  onSave,\n  kafkaName,\n  selectedAccountId,\n  acls,\n  topicNames,\n  consumerGroupIds,\n  title,\n  variant,\n}) => {\n  const config = useContext(ConfigContext);\n  const permissionsService = usePermissionsService(config);\n  const [resourceOperations, setResourceOperations] = useState<\n    { [key: string]: Array<string> } | undefined\n  >();\n\n  useEffect(() => {\n    const fetchResourceOperations = async () => {\n      const answer = await permissionsService.getResourceOperations();\n      setResourceOperations(answer);\n    };\n    fetchResourceOperations();\n  }, []);\n\n  return (\n    <ManagePermissionsModal\n      topicNames={topicNames}\n      consumerGroupIds={consumerGroupIds}\n      acls={acls}\n      resourceOperations={resourceOperations}\n      hideModal={hideModal}\n      selectedAccountId={selectedAccountId}\n      onSave={onSave}\n      kafkaName={kafkaName}\n      variant={variant}\n      title={title}\n    />\n  );\n};\n\nexport const ManagePermissionsModal: React.FC<\n  ManagePermissionsModalProps & BaseModalProps\n> = ({\n  hideModal,\n  onSave,\n  kafkaName,\n  selectedAccountId,\n  acls,\n  topicNames,\n  consumerGroupIds,\n  resourceOperations,\n  title,\n  variant,\n}) => {\n  const { t } = useTranslation();\n\n  const [selectedAccount, setSelectedAccount] = useState<\n    Validated<string | undefined>\n  >({ value: selectedAccountId });\n  const [step, setStep] = useState<number>(\n    selectedAccountId === undefined ? 1 : 2\n  );\n  const [newAcls, setNewAcls] = useState<NewAcl[]>([createEmptyNewAcl()]);\n  const [removeAcls, setRemoveAcls] = useState<EnhancedAclBinding[]>([]);\n  const escapeClosesModal = useRef<boolean>(true);\n  const { validateName } = useValidateTopic();\n\n  const principals = usePrincipals();\n\n  const config = useContext(ConfigContext);\n  const permissionsService = usePermissionsService(config);\n\n  const save = async () => {\n    let valid = true;\n    if (selectedAccount.value === undefined) {\n      setSelectedAccount((v) => {\n        return {\n          ...v,\n          validated: 'error',\n          errorMessage: t(\n            'permission.manage_permissions_dialog.must_select_account_error'\n          ),\n        };\n      });\n      valid = false;\n    } else {\n      setSelectedAccount((v) => {\n        return {\n          ...v,\n          validated: 'success',\n        };\n      });\n    }\n\n    setNewAcls((prevState) => {\n      return prevState.map((value) => {\n        if (isNewAclModified(value)) {\n          const answer = Object.assign({}, value);\n          if (value.resourceType.value === undefined) {\n            answer.resourceType.validated = 'error';\n            answer.resourceType.errorMessage = t(\n              'permission.manage_permissions_dialog.assign_permissions.must_select_resource_type_error'\n            );\n            valid = false;\n          } else {\n            answer.resourceType.validated = 'success';\n          }\n          if (value.resourceType.value !== AclResourceType.Cluster) {\n            if (value.resource.value === undefined) {\n              answer.resource.validated = 'error';\n              answer.resource.errorMessage = t(\n                'permission.manage_permissions_dialog.assign_permissions.must_select_resource_error'\n              );\n              valid = false;\n            } else {\n              const errorMessage = validateName(value.resource.value);\n              if (errorMessage !== undefined) {\n                answer.resource.validated = 'error';\n                answer.resource.errorMessage = errorMessage;\n                valid = false;\n              } else {\n                answer.resource.validated = 'success';\n              }\n            }\n            if (value.patternType.value === undefined) {\n              answer.patternType.validated = 'error';\n              answer.patternType.errorMessage = t(\n                'permission.manage_permissions_dialog.assign_permissions.must_select_pattern_type_error'\n              );\n              valid = false;\n            } else {\n              answer.patternType.validated = 'success';\n            }\n          }\n          if (value.permission.value === undefined) {\n            answer.permission.validated = 'error';\n            answer.permission.errorMessage = t(\n              'permission.manage_permissions_dialog.assign_permissions.must_select_permission_error'\n            );\n            valid = false;\n          } else {\n            answer.permission.validated = 'success';\n          }\n          if (value.operation.value === undefined) {\n            answer.operation.validated = 'error';\n            answer.operation.errorMessage = t(\n              'permission.manage_permissions_dialog.assign_permissions.must_select_operation_error'\n            );\n            valid = false;\n          } else {\n            answer.operation.validated = 'success';\n          }\n          return answer;\n        } else {\n          return value;\n        }\n      });\n    });\n    if (valid) {\n      for (const value of newAcls.filter((value) => isNewAclModified(value))) {\n        if (value.resourceType.value === undefined) {\n          throw Error('resourceType must not be undefined');\n        }\n        if (value.resourceType.value !== AclResourceType.Cluster) {\n          if (value.resource.value === undefined) {\n            throw Error('resource must not be undefined');\n          }\n          if (value.patternType.value === undefined) {\n            throw Error('patternType must not be undefined');\n          }\n        } else {\n          value.resource.value = 'kafka-cluster';\n          value.patternType.value = AclPatternType.Literal;\n        }\n        if (value.permission.value === undefined) {\n          throw Error('permission must not be undefined');\n        }\n\n        if (value.operation.value === undefined) {\n          throw Error('operation must not be undefined');\n        }\n        await permissionsService.addPermission({\n          resourceName: value.resource.value,\n          patternType: value.patternType.value,\n          permission: value.permission.value,\n          resourceType: value.resourceType.value,\n          operation: value.operation.value,\n          principal: `User:${selectedAccount.value}`,\n        });\n      }\n      for (const value of removeAcls) {\n        await permissionsService.deletePermission({\n          resourceName: value.resourceName,\n          patternType: convertEnum(value.patternType, AclPatternTypeFilter),\n          permissionType: convertEnum(\n            value.permission,\n            AclPermissionTypeFilter\n          ),\n          resourceType: convertEnum(value.resourceType, AclResourceTypeFilter),\n          operation: convertEnum(value.operation, AclOperationFilter),\n          principal: `User:${selectedAccount.value}`,\n        });\n      }\n      onSave && (await onSave());\n      hideModal();\n    }\n  };\n\n  const Step2 = () => {\n    if (step === 2) {\n      if (resourceOperations === undefined) {\n        return <MASLoading />;\n      }\n      const menuAppendTo =\n        document.getElementById('manage-permissions-modal') || undefined;\n      return (\n        <>\n          <ExistingAclTable\n            existingAcls={acls.filter(\n              (i) =>\n                i.principal === `${selectedAccount.value}` ||\n                i.principal === '*'\n            )}\n            selectedAccountId={selectedAccount.value}\n            onRemove={(acl) =>\n              setRemoveAcls((prevState) => {\n                return [...prevState, acl];\n              })\n            }\n          />\n          <CreatePermissions\n            acls={newAcls}\n            setAcls={setNewAcls}\n            topicNames={topicNames}\n            consumerGroupIds={consumerGroupIds}\n            selectedAccount={selectedAccount.value}\n            setEscapeClosesModal={setEscapeClosesModal}\n            resourceOperations={resourceOperations}\n            menuAppendTo={menuAppendTo}\n          />\n        </>\n      );\n    }\n    return <></>;\n  };\n\n  const Account = () => {\n    if (step === 1) {\n      return (\n        <SelectAccount\n          id={selectedAccount}\n          setId={setSelectedAccount}\n          initialOptions={principals.getAllPrincipals()}\n          setEscapeClosesModal={setEscapeClosesModal}\n        />\n      );\n    }\n    return (\n      <FormGroupWithPopover\n        labelHead={t('permission.manage_permissions_dialog.account_id_title')}\n        fieldId='kafka-instance-name'\n        fieldLabel={t('permission.manage_permissions_dialog.account_id_title')}\n        labelBody={t('permission.manage_permissions_dialog.account_id_help')}\n        buttonAriaLabel={t(\n          'permission.manage_permissions_dialog.account_id_aria'\n        )}\n        isRequired={true}\n      >\n        {selectedAccount.value === '*'\n          ? t('permission.manage_permissions_dialog.all_accounts_title')\n          : selectedAccount.value}\n      </FormGroupWithPopover>\n    );\n  };\n\n  const setEscapeClosesModal = (closes: boolean) => {\n    escapeClosesModal.current = closes;\n  };\n\n  const onEscapePress = () => {\n    if (escapeClosesModal.current) {\n      hideModal();\n    }\n  };\n\n  const SubmitButton: React.FunctionComponent = () => {\n    if (step === 1) {\n      return (\n        <Button\n          variant='primary'\n          onClick={() => setStep(2)}\n          isDisabled={selectedAccount.value === undefined}\n        >\n          {t('permission.manage_permissions_dialog.step_1_submit_button')}\n        </Button>\n      );\n    }\n    return (\n      <Button\n        variant='primary'\n        onClick={save}\n        key={1}\n        isDisabled={\n          !newAcls.some((p) => isNewAclModified(p) || removeAcls.length > 0)\n        }\n      >\n        {t('permission.manage_permissions_dialog.step_2_submit_button')}\n      </Button>\n    );\n  };\n\n  const ModalForm: React.FunctionComponent = () => (\n    <Form>\n      <Grid hasGutter md={6}>\n        <GridItem span={12}>\n          <FormGroup\n            fieldId='kafka-instance-name'\n            label={t(\n              'permission.manage_permissions_dialog.kafka_instance_title'\n            )}\n          >\n            {kafkaName}\n          </FormGroup>\n        </GridItem>\n        <GridItem span={12}>\n          <Account />\n        </GridItem>\n      </Grid>\n      <Step2 />\n    </Form>\n  );\n\n  return (\n    <Modal\n      id='manage-permissions-modal'\n      variant={variant}\n      isOpen={true}\n      aria-label={t('permission.manage_permissions_dialog.aria_label')}\n      title={title}\n      showClose={true}\n      aria-describedby='modal-message'\n      onClose={hideModal}\n      onEscapePress={onEscapePress}\n      actions={[\n        <SubmitButton key={1} />,\n        <Button onClick={hideModal} key={2} variant='secondary'>\n          {t('permission.manage_permissions_dialog.cancel_button')}\n        </Button>,\n      ]}\n    >\n      <ModalForm />\n    </Modal>\n  );\n};\n\nexport default ManagePermissions;\n","import { useTranslation } from 'react-i18next';\n\nexport const useValidateTopic = (): {\n  validateName(name: string): string | undefined;\n} => {\n  const { t } = useTranslation();\n\n  return {\n    validateName: (name) => {\n      const legalNameChars = new RegExp('^[a-zA-Z0-9._-]+$');\n      if (name.length && !legalNameChars.test(name)) {\n        return t('topic.topic_name_helper_text');\n      } else if (name.length > 249) {\n        return t('topic.cannot_exceed_characters');\n      } else if (name === '.' || name === '..') {\n        return t('topic.invalid_name_with_dot');\n      }\n      return undefined;\n    },\n  };\n};\n"],"names":["FormGroupWithPopover","children","labelHead","fieldId","fieldLabel","labelBody","buttonAriaLabel","validated","helperText","helperTextInvalid","isRequired","FormGroup","label","labelIcon","Popover","headerContent","bodyContent","onClick","event","preventDefault","className","noVerticalAlign","SelectAccount","setId","id","initialOptions","setEscapeClosesModal","t","useTranslation","useState","isOpen","setIsOpen","clearSelection","value","undefined","errorMessage","Select","variant","SelectVariant","typeAheadAriaLabel","onToggle","newState","onSelect","selection","isPlaceholder","onClear","selections","isInputValuePersisted","placeholderText","isCreatable","menuAppendTo","maxHeight","isGrouped","SelectGroup","key","SelectOption","description","Divider","filter","principal","principalType","PrincipalType","map","index","displayName","CreateSelect","options","setSelected","selected","row","placeholder","P","option","isDisabled","disabled","title","CreateTypeahead","setValue","setOptions","useEffect","o","onCreateOption","newValue","createText","isNewAclModified","emptyAcl","createEmptyNewAcl","permission","patternType","resourceType","resource","operation","AclPermissionType","AclPatternType","CreatePermissions","acls","setAcls","topicNames","consumerGroupIds","selectedAccount","resourceOperations","validateName","tableColumns","columnTransforms","cellWidth","setPermissionType","prevState","v","k","setOperation","setResourceType","setPatternType","setResource","PatternTypeCell","acl","AclResourceType","sort","a","b","localeCompare","ResourceType","ResourceCell","toLowerCase","PermissionTypeCell","sentenceCase","OperationCell","toString","snakeCase","operationType","some","p","RemoveButtonCell","Tooltip","content","Button","icon","length","removeRow","GridItem","span","account_id","isHelperTextBeforeField","MASTable","tableProps","cells","rows","shouldDefaultCustomRowWrapper","TableVariant","canSelectAll","rowDataTestId","ExistingAclTable","existingAcls","selectedAccountId","onRemove","answer","item","RemoveButton","TrashIcon","hash","removed","AllAccountsLabel","Label","props","Trans","i18nKey","f","originalData","ManagePermissions","hideModal","onSave","kafkaName","config","useContext","permissionsService","setResourceOperations","getResourceOperations","ManagePermissionsModal","setSelectedAccount","step","setStep","newAcls","setNewAcls","removeAcls","setRemoveAcls","escapeClosesModal","useRef","principals","usePrincipals","save","valid","Object","assign","Error","addPermission","resourceName","deletePermission","AclPatternTypeFilter","permissionType","AclPermissionTypeFilter","AclResourceTypeFilter","AclOperationFilter","Step2","MASLoading","document","getElementById","i","Account","getAllPrincipals","closes","current","Modal","showClose","onClose","onEscapePress","actions","Form","Grid","hasGutter","md","useValidateTopic","name","legalNameChars","RegExp","test"],"sourceRoot":""}