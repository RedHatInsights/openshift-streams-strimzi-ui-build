(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[299],{6304:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var a=n(7522),o=(n(8612),(0,a.createContext)({}))},9843:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FederatedMainView:()=>y,default:()=>C});var a=n(7522),o=n.n(a),r=(n(6351),n(8612)),i=n(1064),l=n(9058),c=n(3006),s=function(e){var t=e.search,n=e.setSearch,a=e.onClear,i=(0,c.useTranslation)().t;return o().createElement(r.InputGroup,null,o().createElement(r.SearchInput,{name:"searchName",id:"search-topics-input",type:"search","aria-label":i("topic.topic_search_input"),placeholder:i("common.search"),value:t,onChange:function(e){n(e)},onClear:function(){a(),n("")}}))},u=n(1309),m=n(6295),p=n(699),d=n(9115),f=n(7955),b=n(6304),v=n(7194),g=n(1249),h=function(){return(h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},T=function(e){var t,n,T,E=e.onCreateTopic,k=e.getTopicDetailsPath,y=e.onClickTopic,C=e.onDeleteTopic,P=e.onError,S=(0,a.useState)(!0),_=S[0],w=S[1],N=(0,a.useState)(1),I=N[0],B=N[1],D=(0,a.useState)(10),x=D[0],K=D[1],R=(0,a.useState)(0),V=R[0],A=R[1],G=(0,a.useState)(""),L=G[0],j=G[1],F=(0,a.useState)(),M=F[0],O=F[1],z=(0,a.useState)(),H=z[0],W=z[1],Z=(0,a.useState)(!1),q=Z[0],J=Z[1],Q=(0,a.useState)(),U=Q[0],X=Q[1],Y=(0,c.useTranslation)().t,$=(0,a.useContext)(b.w).addAlert,ee=(0,a.useContext)(d.E),te=function(){return e=void 0,t=void 0,a=function(){var e,t;return function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,m.BB)(ee)];case 1:return(e=n.sent())&&(O(e),W(e)),[3,3];case 2:return t=n.sent(),P&&401===t.response.data.code?P(t.response.data.code,t.response.data.error_message):$(t.response.data.error_message,r.AlertVariant.danger),[3,3];case 3:return w(!1),[2]}}))},new((n=void 0)||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}));var e,t,n,a};(0,a.useEffect)((function(){w(!0),te()}),[q]),(0,l.K)((function(){return te()}),5e3);var ne=function(e,t){B(t),A(I*x)},ae=function(e,t){K(t)},oe=[{title:Y("common.name")},{title:Y("common.partitions"),transforms:[i.sortable]},{title:Y("topic.retention_time"),transforms:[i.sortable]},{title:Y("topic.retention_size"),transforms:[i.sortable]}],re=(null===(T=null==H?void 0:H.items)||void 0===T?void 0:T.map((function(e){var t,n,a,r,i;return[{title:o().createElement(v.Link,{"data-testid":"tableTopics-linkTopic",to:k(e.name),onClick:function(t){t.preventDefault(),y(e.name)}},null==e?void 0:e.name)},null===(t=e.partitions)||void 0===t?void 0:t.length,(0,g.B4)(Number((null===(a=null===(n=e.config)||void 0===n?void 0:n.filter((function(e){return"retention.ms"===e.key}))[0])||void 0===a?void 0:a.value)||0)),(0,g.yI)(Number((null===(i=null===(r=e.config)||void 0===r?void 0:r.filter((function(e){return"retention.bytes"===e.key}))[0])||void 0===i?void 0:i.value)||0))]})))||[];(0,a.useEffect)((function(){if(L&&""!=L.trim()&&(null==M?void 0:M.items)&&M.items.length>0){var e=null==M?void 0:M.items.filter((function(e){return(null==e?void 0:e.name)&&e.name.includes(L)}));W((function(t){return t?h(h({},t),{items:e}):void 0}))}else W(M)}),[L,M]);var ie=[(t={title:Y("common.delete")},t["data-testid"]="tableTopics-actionDelete",t.onClick=function(e,t){return function(e){(null==H?void 0:H.items)&&X(H.items[e].name),J(!0)}(t)},t),(n={title:Y("common.edit")},n["data-testid"]="tableTopics-actionEdit",n.onClick=function(e,t){return function(e){(null==H?void 0:H.items)&&y(H.items[e].name)}(t)},n)];return _?o().createElement(f.g,null):o().createElement(o().Fragment,null,q&&o().createElement(p.i,{topicName:U,setDeleteModal:J,deleteModal:q,onDeleteTopic:C}),o().createElement(r.Card,{className:"kafka-ui-m-full-height"},re.length<1&&L.length<1?o().createElement(u.u,{emptyStateProps:{variant:u.j.NoItems},titleProps:{title:Y("topic.empty_topics_title")},emptyStateBodyProps:{body:Y("topic.empty_topics_body")},buttonProps:{title:Y("topic.create_topic"),onClick:function(){return E()}}}):o().createElement(r.Card,null,o().createElement(r.Toolbar,null,o().createElement(r.ToolbarContent,null,o().createElement(r.ToolbarItem,{className:"pf-c-toolbar-item--search"},o().createElement(s,{onClear:function(){W(M)},search:L,setSearch:j})),o().createElement(r.ToolbarItem,null,o().createElement(r.Button,{id:"topic-list-create-topic-button",className:"topics-per-page","data-testid":"tabTopics-actionCreate",onClick:function(){E()}},Y("topic.create_topic"))),o().createElement(r.ToolbarItem,{variant:"pagination"},o().createElement(r.Pagination,{itemCount:re.length,perPage:x,page:I,onSetPage:ne,widgetId:"topic-list-pagination-top",onPerPageSelect:ae})))),o().createElement(i.Table,{"aria-label":Y("topic.topic_list_table"),variant:i.TableVariant.compact,cells:oe,rows:1!=I?re.slice(V,V+x):re.slice(0,x),actions:ie},o().createElement(i.TableHeader,null),o().createElement(i.TableBody,null))),re.length<1&&L.length>1&&o().createElement(u.u,{emptyStateProps:{variant:u.j.NoResult},titleProps:{title:Y("common.no_results_title")},emptyStateBodyProps:{body:Y("common.no_results_body")}}),re.length>1&&o().createElement(r.Card,null,o().createElement(r.Divider,null),o().createElement(r.Pagination,{itemCount:re.length,perPage:x,page:I,onSetPage:ne,widgetId:"topic-list-pagination-bottom",onPerPageSelect:ae,offset:0,variant:r.PaginationVariant.bottom}))))},E=n(6302),k=n(7950),y=function(e){var t,n=e.getToken,i=e.activeTab,l=void 0===i?0:i,s=e.apiBasePath,u=e.kafkaName,m=e.kafkaPageLink,p=e.onCreateTopic,f=e.getTopicDetailsPath,g=e.onClickTopic,h=e.addAlert,y=e.onDeleteConsumer,C=e.onDeleteTopic,P=e.onError,S={addAlert:h},_=(0,a.useState)(l),w=_[0],N=_[1],I=o().createRef(),B=o().createRef(),D=(0,c.useTranslation)().t;return o().createElement(v.BrowserRouter,null,o().createElement(c.I18nextProvider,{i18n:E.Z},o().createElement(d.E.Provider,{value:{basePath:s,getToken:n}},o().createElement(b.w.Provider,{value:S},(t=o().createElement(r.Breadcrumb,null,o().createElement(r.BreadcrumbItem,{to:m||"#"},"Kafka Instances"),o().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},u||D("common.kafka_instance_name"))),o().createElement(o().Fragment,null,o().createElement("section",{className:"pf-c-page__main-breadcrumb"},t),o().createElement(r.PageSection,{variant:"light"},o().createElement(r.Level,null,o().createElement(r.Title,{headingLevel:"h1"},u||D("common.kafka_instance_name")))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light,className:"pf-c-page__main-tabs",isWidthLimited:!0,padding:{default:"noPadding"}},o().createElement(r.Tabs,{activeKey:w,onSelect:function(e,t){N(t)},className:"pf-m-page-insets"},o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,"Topics"),eventKey:0,id:"topics-tab-section","aria-label":"Topics Tab.","data-testid":"pageKafka-tabTopics",tabContentId:"kafka-ui-TabcontentTopics",tabContentRef:I}),o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,"Consumer groups"),eventKey:1,id:"consumer-groups-tab-section","aria-label":"Consumer Groups Tab.","data-testid":"pageKafka-tabConsumers",tabContentId:"kafka-ui-TabcontentConsumers",tabContentRef:B,className:1===w?"kafka-ui--consumer-content":""}))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.default},o().createElement(r.TabContent,{eventKey:0,id:"kafka-ui-TabcontentTopics",ref:I,className:"kafka-ui-m-full-height","aria-label":"Topics."},o().createElement(T,{onCreateTopic:p,onClickTopic:g,getTopicDetailsPath:f,onDeleteTopic:C,onError:P})),o().createElement(r.TabContent,{eventKey:1,id:"kafka-ui-TabcontentConsumers",ref:B,className:"kafka-ui-m-full-height","aria-label":"Consumer groups.",hidden:!0},o().createElement(k.B,{onDeleteConsumerGroup:y,consumerGroupByTopic:!1})))))))))};const C=y}}]);
//# sourceMappingURL=299.9b6bada3.bundle.js.map