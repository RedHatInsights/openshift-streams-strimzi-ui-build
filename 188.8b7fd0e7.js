"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[188],{38296:(e,t,n)=>{function a(...e){const t=[],n={}.hasOwnProperty;return e.filter(Boolean).forEach((e=>{const o=typeof e;if("string"===o||"number"===o)t.push(e);else if(Array.isArray(e)&&e.length){const n=a(...e);n&&t.push(n)}else if("object"===o)for(const a in e)n.call(e,a)&&e[a]&&t.push(a)})),t.join(" ")}n.r(t),n.d(t,{css:()=>a})},97416:(e,t,n)=>{n.d(t,{L:()=>s});var a=n(75418),o=n.n(a),r=n(84669),i=function(){return(i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},s=function(e){var t=e.toolbarProps,n=e.toggleGroupProps,a=e.toolbarItems,s=e.toggleGroupItems,c=t.id,u=t.clearAllFilters,m=t.collapseListedFiltersBreakpoint,p=void 0===m?"md":m,d=t.inset,f=l(t,["id","clearAllFilters","collapseListedFiltersBreakpoint","inset"]);return o().createElement(o().Fragment,null,o().createElement(r.Toolbar,i({id:c,clearAllFilters:u,inset:d,collapseListedFiltersBreakpoint:p},f),o().createElement(r.ToolbarContent,null,n&&o().createElement(r.ToolbarToggleGroup,i({toggleIcon:n.toggleIcon},n),s),null==a?void 0:a.map((function(e,t){var n=e.key,a=void 0===n?"mas":n,s=e.variant,c=e.className,u=e.id,m=e.alignment,p=e.item,d=l(e,["key","variant","className","id","alignment","item"]);return o().createElement(r.ToolbarItem,i({key:a+"-"+t,variant:s,className:c,id:u,alignment:m},d),p)})))))}},65535:(e,t,n)=>{n.d(t,{v:()=>A});var a=n(75418),o=n.n(a),r=n(54532),i=n(84669),l=n(64517),s=n(4055),c=(n(41781),n(76621)),u=n(27577),m=n(41861),p=n(52049),d=n(28942),f=n(82639),b=n(97416),g=function(e){var t=e.deleteSelectedEnabled,n=e.onDeleteSelected,l=(0,r.useTranslation)().t,s=(0,a.useState)(!1),c=s[0],u=s[1],m=function(){var e=document.getElementById("permissions-toolbar-kebab-toggle");null==e||e.focus()},p=[o().createElement(i.DropdownItem,{key:"delete_selected",onClick:n,isDisabled:!t},l("permission.table.delete_selected"))];return o().createElement(i.Dropdown,{onSelect:function(){u((function(e){return!e})),m()},toggle:o().createElement(i.KebabToggle,{onToggle:function(e){u(e)},id:"permissions-toolbar-kebab-toggle"}),isOpen:c,isPlain:!0,dropdownItems:p})},v=function(e){var t=e.total,n=void 0===t?0:t,a=e.page,l=e.perPage,s=e.setFilteredValue,c=e.openManagePermissions,u=e.onDeleteSelected,m=e.deletedSelectedEnabled,p=(0,r.useTranslation)().t,d=o().createElement(o().Fragment,null),v=[{item:o().createElement(i.Button,{id:"permissions-toolbar-manage-permissions-button","data-testid":"actionManagePermissions",onClick:c},p("permission.table.manage_button"))},{item:o().createElement(g,{deleteSelectedEnabled:m,onDeleteSelected:u})}];return n>0&&v.push({item:o().createElement(f.wu,{widgetId:"permissions-pagination-options-menu-top",itemCount:n,page:a,perPage:l,titles:{paginationTitle:p("common.minimal_pagination"),perPageSuffix:p("common.per_page_suffix"),toFirstPage:p("common.to_first_page"),toPreviousPage:p("common.to_previous_page"),toLastPage:p("common.to_last_page"),toNextPage:p("common.to_next_page"),optionsToggle:p("common.options_toggle"),currPage:p("common.curr_page")},isCompact:!0}),variant:"pagination",alignment:{default:"alignRight"}}),o().createElement(b.L,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s("")},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:"",breakpoint:"md"},toggleGroupItems:d,toolbarItems:v})},h=n(63052),k=n(58785),y=n(91070),T=function(e){var t=e.openManagePermissions,n=(0,r.useTranslation)().t;return o().createElement(y.u,{emptyStateProps:{variant:y.j.NoResult},titleProps:{title:n("permission.table.no_results_title")},emptyStateBodyProps:{body:n("permission.table.no_results_body")},buttonProps:{title:n("permission.table.manage_permissions_button"),onClick:t,"data-testid":"actionManagePermissions"}})},E=n(70853),P=function(){return(P=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},w=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},_=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},S=function(e){var t=e.permissionsService,n=e.kafkaName,l=e.topicNames,s=e.consumerGroupIds,b=(0,r.useTranslation)().t,g=(0,a.useState)(""),y=g[0],S=g[1],I=((0,m.dd)()||{}).showModal,C=(0,a.useState)(),x=C[0],F=C[1],N=function(){return w(void 0,void 0,void 0,(function(){var e;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.getPermissions({resourceName:""!==y?y:void 0})];case 1:return e=n.sent(),F((function(t){var n;return{items:null===(n=e.items)||void 0===n?void 0:n.map((function(e){var n,a=null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.filter((function(t){return t.hash()===e.hash()})),o=0!==(null==a?void 0:a.length)&&(null==a?void 0:a.every((function(e){return e.selected})))||!1;return P({selected:o},e)})),page:e.page,size:e.size,total:e.total}})),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))};(0,a.useEffect)((function(){N()}),[]),(0,h.K)((function(){return N()}),5e3);var L=[k.QG,k.ev,k.C8],O=function(e){I&&I(p.w.ManagePermissions,{selectedAccountId:e,kafkaName:n,acls:(null==x?void 0:x.items)||[],topicNames:l,consumerGroupIds:s,onSave:function(){return w(void 0,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return[4,N()];case 1:return e.sent(),[2]}}))}))}})};return void 0===x||void 0===x.items||0===x.items.length?o().createElement(T,null):o().createElement(o().Fragment,null,o().createElement(v,{total:x.total||0,page:x.page||1,perPage:x.size||10,openManagePermissions:function(){return O()},setFilteredValue:S,filteredValue:y,deletedSelectedEnabled:x.items.some((function(e){return e.selected})),onDeleteSelected:function(){var e;null===(e=null==x?void 0:x.items)||void 0===e||e.filter((function(e){return e.selected})).forEach((function(e){t.deletePermission({resourceName:e.resourceName,patternType:(0,c.L2)(e.patternType,E.AclPatternTypeFilter),permissionType:(0,c.L2)(e.permission,E.AclPermissionTypeFilter),resourceType:(0,c.L2)(e.resourceType,E.AclResourceTypeFilter),operation:(0,c.L2)(e.operation,E.AclOperationFilter),principal:"User:"+e.principal}).then((function(){return N()}))})),N()}}),o().createElement(d.w,{tableProps:{cells:[{title:""},{title:""},{title:""},{title:""}],rows:x.items.map((function(e,t){return{cells:L.map((function(n){return n(e,t)})),selected:e.selected,originalData:e}})),"aria-label":b("permission.table.permission_list_table"),shouldDefaultCustomRowWrapper:!0,variant:u.TableVariant.compact,onSelect:function(e,t,n){F(-1===n?function(e){var n;if(e)return P({items:null===(n=null==e?void 0:e.items)||void 0===n?void 0:n.map((function(e){return e.selected=t,e}))},e)}:function(e){if(e){var a=null==e?void 0:e.items;return void 0!==a&&(a[n].selected=t),P({items:a},e)}})},actionResolver:function(e,n){var a,o,r=n.rowIndex;return[(a={title:b("permission.table.row_kebab.manage")},a["data-testid"]="permission-table-row-manage",a.onClick=function(){void 0!==(null==x?void 0:x.items)&&void 0!==r&&O(x.items[r].principal)},a),(o={title:b("permission.table.row_kebab.delete")},o["data-testid"]="permission-table-row-delete",o.onClick=function(){return function(e){if(void 0!==e&&void 0!==(null==x?void 0:x.items)){var n=x.items[e];t.deletePermission({resourceName:n.resourceName,patternType:(0,c.L2)(n.patternType,E.AclPatternTypeFilter),permissionType:(0,c.L2)(n.permission,E.AclPermissionTypeFilter),resourceType:(0,c.L2)(n.resourceType,E.AclResourceTypeFilter),operation:(0,c.L2)(n.operation,E.AclOperationFilter),principal:"User:"+n.principal}).then((function(){return N()}))}}(r)},o)]},canSelectAll:!1},rowDataTestId:"tablePermissions-row"}),o().createElement(f.wu,{widgetId:"permissions-pagination-options-menu-bottom",itemCount:x.total||0,variant:i.PaginationVariant.bottom,page:x.page,perPage:x.size,titles:{paginationTitle:b("common.full_pagination"),perPageSuffix:b("common.per_page_suffix"),toFirstPage:b("common.to_first_page"),toPreviousPage:b("common.to_previous_page"),toLastPage:b("common.to_last_page"),toNextPage:b("common.to_next_page"),optionsToggle:b("common.options_toggle"),currPage:b("common.curr_page")}}))},I=n(3654),C=n(60540),x=n(10708),F=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((a=a.apply(e,t||[])).next())}))},N=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};const L=function(e){var t=e.kafkaName,n=(0,a.useContext)(I.E),r=(0,c.qK)(n),i=(0,a.useState)([]),l=i[0],s=i[1],u=(0,a.useState)([]),m=u[0],p=u[1];return(0,a.useEffect)((function(){F(void 0,void 0,void 0,(function(){var e,t,a;return N(this,(function(o){switch(o.label){case 0:return[4,(0,C.BB)(n)];case 1:return e=o.sent(),t=null===(a=e.items)||void 0===a?void 0:a.map((function(e){return e.name||""})),s(t||[]),[2]}}))}))}),[n]),(0,a.useEffect)((function(){F(void 0,void 0,void 0,(function(){var e,t,a;return N(this,(function(o){switch(o.label){case 0:return[4,(0,x.e5)(n)];case 1:return e=o.sent(),t=null===(a=e.items)||void 0===a?void 0:a.map((function(e){return e.groupId||""})),p(t||[]),[2]}}))}))}),[n]),o().createElement(S,{permissionsService:r,kafkaName:t,topicNames:l,consumerGroupIds:m})};var O=n(95216),D=(0,a.lazy)((function(){return Promise.all([n.e(68),n.e(380)]).then(n.bind(n,93380))})),K=(0,a.lazy)((function(){return n.e(131).then(n.bind(n,70705))})),A=function(){var e=(0,r.useTranslation)().t,t=(0,l.S)()||{},n=t.kafkaPageLink,c=t.kafkaName,u=t.handleInstanceDrawer,m=t.setIsOpenDeleteInstanceModal,p=t.showMetrics,d=t.activeTab,f=(0,O.usePrincipals)(),b=(0,a.useState)(d||1),g=b[0],v=b[1],h=o().createRef(),k=o().createRef(),y=o().createRef(),T=o().createRef(),E=(0,a.useState)(),P=E[0],w=E[1],_=function(e){u&&u(!0,e)},S=[o().createElement(i.DropdownItem,{key:"view-kafka",onClick:function(){return _("details")}},e("common.view_instance")),o().createElement(i.DropdownItem,{key:"connect-kafka",onClick:function(){return _("connection")}},e("common.view_connection")),o().createElement(i.DropdownItem,{key:"delete-kafka",onClick:function(){m&&m(!0)}},e("common.delete_instance"))],I=o().createElement(i.Breadcrumb,null,o().createElement(i.BreadcrumbItem,{to:n||"#"},e("common.kafka_instance")),o().createElement(i.BreadcrumbItem,{to:"#",isActive:!0},c||e("common.kafka_instance_name")));return o().createElement(o().Fragment,null,o().createElement("section",{className:"pf-c-page__main-breadcrumb"},I),o().createElement(i.PageSection,{variant:i.PageSectionVariants.light},o().createElement(i.Level,null,o().createElement(i.Title,{headingLevel:"h1"},c||e("common.kafka_instance_name")),o().createElement(i.Dropdown,{onSelect:function(){w(!P)},toggle:o().createElement(i.KebabToggle,{onToggle:function(e){w(e)},id:"toggle-data-plane"}),isOpen:P,isPlain:!0,dropdownItems:S,position:i.DropdownPosition.right}))),o().createElement(o().Suspense,{fallback:o().createElement(s.y,null)},o().createElement(i.PageSection,{variant:i.PageSectionVariants.light,padding:{default:"noPadding"},className:"pf-c-page__main-tabs"},o().createElement(i.Tabs,{activeKey:g,onSelect:function(e,t){v(t)},"data-testid":"pageKafka-tabProperties",className:"pf-m-page-insets"},o().createElement(i.Tab,{title:o().createElement(i.TabTitleText,null,e("dashboard.dashboard")),eventKey:1,"data-testid":"pageKafka-tabDashboard",id:"dashboard-tab-section","aria-label":e("dashboard.dashboard"),tabContentRef:y,tabContentId:"kafka-ui-TabcontentDashboard"}),o().createElement(i.Tab,{title:o().createElement(i.TabTitleText,null,e("topic.topics")),eventKey:2,"data-testid":"pageKafka-tabTopics",id:"topics-tab-section","aria-label":e("topic.topics"),tabContentRef:k,tabContentId:"kafka-ui-TabcontentTopicsList"}),o().createElement(i.Tab,{title:o().createElement(i.TabTitleText,null,e("consumerGroup.consumer_groups")),eventKey:3,"data-testid":"pageKafka-tabConsumers",id:"consumer-groups-tab-section","aria-label":e("consumerGroup.consumer_groups"),tabContentRef:h,tabContentId:"kafka-ui-TabcontentConsumersList"}),void 0!==f?o().createElement(i.Tab,{title:o().createElement(i.TabTitleText,null,e("permission.tab.label")),eventKey:4,"data-testid":"pageKafka-tabPermissions",id:"permissions-tab-section","aria-label":e("permission.tab.label"),tabContentRef:T,tabContentId:"kafka-ui-TabcontentPermissions"}):o().createElement(o().Fragment,null))),o().createElement(i.PageSection,{isFilled:!0},o().createElement(i.TabContent,{eventKey:1,ref:y,id:"kafka-ui-TabcontentDashboard",className:"kafka-ui-m-full-height","aria-label":e("dashboard.dashboard"),hidden:1!==g},p),o().createElement(i.TabContent,{eventKey:2,ref:k,id:"kafka-ui-TabcontentTopicsList",className:"kafka-ui-m-full-height","aria-label":e("topic.topics"),hidden:2!==g},o().createElement(D,null)),o().createElement(i.TabContent,{eventKey:3,ref:h,id:"kafka-ui-TabcontentConsumersList",className:"kafka-ui-m-full-height","aria-label":e("consumerGroup.consumer_groups"),hidden:3!=g},o().createElement(K,{consumerGroupByTopic:!1})),void 0!==f?o().createElement(i.TabContent,{eventKey:4,ref:T,id:"kafka-ui-TabcontentPermissions",className:"kafka-ui-m-full-height","aria-label":e("permission.tab.label"),hidden:!0},o().createElement(L,{kafkaName:c})):o().createElement(o().Fragment,null))))}}}]);
//# sourceMappingURL=188.8b7fd0e7.js.map