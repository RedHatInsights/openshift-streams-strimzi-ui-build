(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[486],{3486:(e,t,n)=>{"use strict";n.d(t,{e:()=>C});var a=n(7522),i=n.n(a),r=n(4082),o=n(8183),l=function(e){var t=e.isSwitchChecked,n=e.setIsSwitchChecked,a=e.kafkaName,l=e.kafkaPageLink,c=(0,o.useTranslation)().t,s=i().createElement(r.Breadcrumb,null,i().createElement(r.BreadcrumbItem,{to:l||"#"},"Kafka Instances"),i().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},a||c("common.kafka_instance_name")),i().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},c("topic.create_topic")));return i().createElement(i().Fragment,null,i().createElement("section",{className:"pf-c-page__main-breadcrumb"},s),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(r.Title,{headingLevel:"h1",size:"2xl"},c("topic.create_topic")),i().createElement("br",null),i().createElement(r.Switch,{id:"simple-switch",label:c("topic.show_all_options"),labelOff:c("topic.show_all_options"),isChecked:t,onChange:n,className:"create-topic-wizard"})))},c=(n(3174),function(e){var t=e.topicNameInput,n=e.setTopicNameInput,a=e.topicNameValidated,l=e.setTopicNameValidated,c=e.invalidText,s=e.setInvalidText,m=(0,o.useTranslation)().t;return i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormSection,{title:m("topic.topic_name"),id:"topic-name",titleElement:"h2"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.p},m("topic.topic_name_info")),i().createElement(r.Text,{component:r.TextVariants.small},m("topic.topic_name_info_note"))),i().createElement(r.FormGroup,{label:m("topic.topic_name"),fieldId:"step-topic-name-form",helperText:m("topic.topic_name_helper_text"),helperTextInvalid:c,validated:a,isRequired:!0},i().createElement(r.TextInput,{isRequired:!0,type:"text",id:"step-topic-name-input",name:"step-topic-name",value:t,onChange:function(e){!function(e){var t=new RegExp("^[0-9A-Za-z_-]+$");e.length&&!t.test(e)?(s(m("topic.topic_name_helper_text")),l("error")):e.length>249?(l("error"),s(m("topic.cannot_exceed_characters"))):l("default")}(e),n(e)},placeholder:m("topic.enter_name"),validated:a}))))}),s=function(e){var t=e.partitionTouchspinValue,n=e.setPartitionTouchspinValue,a=(0,o.useTranslation)().t;return i().createElement(r.Form,null,i().createElement(r.FormSection,{title:a("topic.partitions"),id:"partitions",titleElement:"h2"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.p},a("topic.partition_info")),i().createElement(r.Text,{component:r.TextVariants.small},a("topic.partition_info_note"))),i().createElement(r.FormGroup,{label:"Partitions",fieldId:"step-topic-name-form",helperText:a("topic.partition_helper_text"),isRequired:!0},i().createElement(r.NumberInput,{onPlus:function(){n(t+1)},onMinus:function(){n(t-1)},value:t,inputName:"input",onChange:function(e){var t=Number(e.target.value);t<1&&(t=1),n(t)},widthChars:20,min:1}))))},m=function(e){var t,n,l=e.setMsgRetentionValue,c=e.currentPeriod,s=e.currentSize,m=e.setCurrentPeriod,u=e.setCurrentSize,p=e.setRetentionSize,d=(0,o.useTranslation)().t;!function(e){e[e.MILLISECOND=1]="MILLISECOND",e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(t||(t={})),function(e){e[e.BYTE=1]="BYTE",e[e.KILOBYTE=1e3]="KILOBYTE",e[e.MEGABYTE=1e6]="MEGABYTE",e[e.GIGABYTE=1e9]="GIGABYTE",e[e.TERABYTE=1e12]="TERABYTE",e.CUSTOM="custom",e[e.UNLIMITED=-1]="UNLIMITED"}(n||(n={}));var E=(0,a.useState)(7),f=E[0],T=E[1],h=(0,a.useState)(1),S=h[0],k=h[1],v=(0,a.useState)(!1),b=v[0],C=v[1],I=(0,a.useState)(!1),g=I[0],y=I[1],_=(0,a.useState)(!1),x=_[0],N=_[1],L=(0,a.useState)(!1),M=L[0],D=L[1],w=(0,a.useState)(t.DAY),U=w[0],B=w[1],O=(0,a.useState)(n.BYTE),A=O[0],V=O[1];(0,a.useEffect)((function(){c===t.DAY?l(t.DAY):c===t.WEEK?l(t.WEEK):c===t.UNLIMITED?l(t.UNLIMITED):c===t.CUSTOM&&l(U*f),s===n.UNLIMITED?p(n.UNLIMITED):s===n.CUSTOM&&p(A*S)}),[c,s,f,S,U,A]);var F=function(e,a){var i=a.target.name;"radioDay"===i?m(t.DAY):"radioWeek"===i?m(t.WEEK):"radioUnlimitedTime"===i?m(t.UNLIMITED):"radioCustomTime"===i&&m(t.CUSTOM),"radioCustomSize"===i?u(n.CUSTOM):"radioUnlimitedSize"===i&&u(n.UNLIMITED)};return i().createElement(i().Fragment,null,i().createElement(r.Form,{onSubmit:function(e){return e.preventDefault()}},i().createElement(r.FormSection,{title:d("topic.message_retention"),id:"message-retention",titleElement:"h2"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.p},d("topic.message_retention_info")),i().createElement(r.Text,{component:r.TextVariants.small},d("topic.message_retention_info_note"))),i().createElement(r.FormGroup,{fieldId:"form-group-retention-time-in-wizard",label:d("topic.retention_time")},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:c===t.DAY,name:"radioDay",onChange:F,label:"A day","aria-label":"A day",id:"radio-controlled-1",value:"day"}),i().createElement(r.Radio,{isChecked:c===t.WEEK,name:"radioWeek",onChange:F,label:"A week","aria-label":"A week",id:"radio-controlled-2",value:"week"}),i().createElement(r.Radio,{isChecked:c===t.CUSTOM,name:"radioCustomTime",onChange:F,label:"Custom duration","aria-label":"custom input",id:"radio-controlled-4",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){T(f-1)},onPlus:function(){T(f+1)},value:f,onChange:function(e){T(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){C(e)},onSelect:function(e,n){"days"===n?B(t.DAY):"unlimited"===n?B(t.UNLIMITED):"milliseconds"===n?B(t.MILLISECOND):"seconds"===n?B(t.SECOND):"minutes"===n?B(t.MINUTE):"hours"===n&&B(t.HOUR),N(n),C(!1)},selections:x,isOpen:b},i().createElement(r.SelectOption,{key:0,value:"days",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:1,value:"seconds"}),i().createElement(r.SelectOption,{key:2,value:"minutes"}),i().createElement(r.SelectOption,{key:3,value:"hours"}),i().createElement(r.SelectOption,{key:4,value:"milliseconds"}))))),i().createElement(r.Radio,{isChecked:c===t.UNLIMITED,name:"radioUnlimitedTime",onChange:F,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-3",value:"unlimited"}))),i().createElement(r.FormGroup,{fieldId:"form-group-retention-size-in-wizard",label:"Retention size"},i().createElement(r.Stack,{hasGutter:!0},i().createElement(r.Radio,{isChecked:s===n.UNLIMITED,name:"radioUnlimitedSize",onChange:F,label:"Unlimited","aria-label":"Unlimited",id:"radio-controlled-6",value:"unlimited"}),i().createElement(r.Radio,{isChecked:s===n.CUSTOM,name:"radioCustomSize",onChange:F,label:"Custom size","aria-label":"custom input",id:"radio-controlled-5",value:"custom"}),i().createElement("div",{className:"kafka-ui--radio__parameters"},i().createElement(r.Flex,null,i().createElement(r.FlexItem,null,i().createElement(r.NumberInput,{onMinus:function(){k(S-1)},onPlus:function(){k(S+1)},value:S,onChange:function(e){k(Number(e.target.value))},min:0})),i().createElement(r.FlexItem,null,i().createElement(r.Select,{variant:r.SelectVariant.single,"aria-label":"Select Input",onToggle:function(e){y(e)},onSelect:function(e,t){"unlimited"===t?V(n.UNLIMITED):"bytes"===t?V(n.BYTE):"kilobytes"===t?V(n.KILOBYTE):"megabytes"===t?V(n.MEGABYTE):"gigabytes"===t?V(n.GIGABYTE):"terabytes"===t&&V(n.TERABYTE),D(t),y(!1)},selections:M,isOpen:g},i().createElement(r.SelectOption,{key:5,value:"bytes",isPlaceholder:!0}),i().createElement(r.SelectOption,{key:6,value:"kilobytes"}),i().createElement(r.SelectOption,{key:7,value:"megabytes"}),i().createElement(r.SelectOption,{key:8,value:"gigabytes"}),i().createElement(r.SelectOption,{key:9,value:"terabytes"}))))))))))},u=n(7253),p=function(e){var t=e.replicationFactor,n=e.minInSyncReplica,a=(0,o.useTranslation)().t;return i().createElement(r.Form,null,i().createElement(r.FormSection,{title:a("common.replicas"),id:"replica-section",titleElement:"h2"},i().createElement(r.TextContent,null,i().createElement(r.Text,{component:r.TextVariants.p},a("topic.replicas_info")),i().createElement(r.Text,{component:r.TextVariants.small},a("topic.replicas_detail"))),i().createElement(r.Alert,{variant:"info",isInline:!0,title:a("topic.replicas_helper_text")}),i().createElement(u.R,{fieldId:"replicas",btnAriaLabel:a("common.replicas"),fieldLabel:a("common.replicas"),fieldValue:t.toString(),popoverBody:a("topic.replicas_description"),popoverHeader:a("topic.replicas")}),i().createElement(u.R,{fieldId:"min-insync-replicas",btnAriaLabel:"topic detail min-in-sync replica",fieldLabel:"Minimum in-sync replicas",fieldValue:n.toString(),popoverBody:a("topic.min_insync_replicas_description"),popoverHeader:a("topic.min_insync_replicas")})))},d=n(3921),E=n(7887),f=n(1249),T=n(9115),h=n(7830),S=n(6304),k=n(6295),v=function(e){var t=e.isLoading,n=e.onValidate,a=e.topicNameValidated,l=e.closeWizard,c=(0,o.useTranslation)().t;return i().createElement(r.WizardFooter,null,i().createElement(r.WizardContextConsumer,null,(function(e){var o=e.activeStep,s=e.onNext,m=e.onBack;return o.name==c("topic.topic_name")?i().createElement(i().Fragment,null,i().createElement(r.Button,{variant:"primary",type:"submit",isLoading:t,onClick:function(){return n(s)},isDisabled:"default"!=a},c("common.next")),i().createElement(r.Button,{variant:"secondary",isDisabled:!0},c("common.back")),i().createElement(r.Button,{variant:"link",onClick:l},c("common.cancel"))):"Replicas"==o.name?i().createElement(i().Fragment,null,i().createElement(r.Button,{variant:"primary",type:"submit",onClick:s},c("common.finish")),i().createElement(r.Button,{variant:"secondary",onClick:m},c("common.back")),i().createElement(r.Button,{variant:"link",onClick:l},c("common.cancel"))):i().createElement(i().Fragment,null,i().createElement(r.Button,{variant:"primary",type:"submit",onClick:s},c("common.next")),i().createElement(r.Button,{variant:"secondary",onClick:m},c("common.back")),i().createElement(r.Button,{variant:"link",onClick:l},c("common.cancel")))})))},b=function(e){var t=e.setIsCreateTopic,n=e.isSwitchChecked,l=e.onCloseCreateTopic,u=(0,a.useContext)(T.E),b=(0,o.useTranslation)().t,C=(0,a.useContext)(S.w).addAlert,I=(0,a.useState)(1),g=I[0],y=I[1],_=(0,a.useState)(1),x=_[0],N=_[1],L=(0,a.useState)(""),M=L[0],D=L[1],w=(0,a.useState)(1),U=w[0],B=w[1],O=(0,a.useState)(3)[0],A=(0,a.useState)(2)[0],V=(0,a.useState)("default"),F=V[0],P=V[1],z=(0,a.useState)(!1),R=z[0],Y=z[1],G=(0,a.useState)(""),W=G[0],K=G[1],H=(0,a.useState)({name:"",numPartitions:"1","retention.ms":"7","retention.ms.unit":"days","retention.bytes":"-1","retention.bytes.unit":"bytes","cleanup.policy":"delete"}),q=H[0],J=H[1],Z=i().useState(6048e5),$=Z[0],j=Z[1],Q=i().useState(-1),X=Q[0],ee=Q[1],te=function(){t&&t(!1)},ne=function(){var e=n?(0,f.hM)((0,f.L3)(q)):{name:M,settings:{numPartitions:U,config:[{key:"retention.ms",value:g.toString()},{key:"retention.bytes",value:x.toString()}]}};new E.M2(new h.VK({basePath:null==u?void 0:u.basePath,accessToken:null==u?void 0:u.getToken})).createTopic(e).then((function(e){200===e.status&&C(b("topic.topic_successfully_created"),r.AlertVariant.success),te()})).catch((function(e){C(e.response.data.error_message,r.AlertVariant.danger),te()}))},ae=[{name:b("topic.topic_name"),enableNext:""!==M.trim()&&"default"===F,component:i().createElement(c,{topicNameInput:M,setTopicNameInput:D,topicNameValidated:F,setTopicNameValidated:P,invalidText:W,setInvalidText:K})},{name:b("common.partitions"),canJumpTo:""!==M.trim(),component:i().createElement(s,{partitionTouchspinValue:U,setPartitionTouchspinValue:B})},{name:b("topic.message_retention"),canJumpTo:""!==M.trim(),component:i().createElement(m,{setMsgRetentionValue:y,currentPeriod:$,currentSize:X,setCurrentPeriod:j,setCurrentSize:ee,setRetentionSize:N})},{name:b("common.replicas"),canJumpTo:""!==M.trim(),component:i().createElement(p,{replicationFactor:O,minInSyncReplica:A}),nextButtonText:b("common.finish")}],ie=b("topic.wizard_title");return i().createElement(i().Fragment,null,n?i().createElement(i().Fragment,null,i().createElement(r.Divider,{className:"kafka-ui--divider--FlexShrink"}),i().createElement(r.PageSection,{variant:r.PageSectionVariants.light},i().createElement(d.W,{isCreate:!0,saveTopic:ne,handleCancel:l,topicData:q,setTopicData:J}))):i().createElement(r.PageSection,{variant:r.PageSectionVariants.light,type:r.PageSectionTypes.wizard,isFilled:!0},i().createElement(r.Wizard,{navAriaLabel:ie+" steps",mainAriaLabel:ie+" content",steps:ae,onClose:te,onSave:ne,"data-testid":"topicBasicCreate-Wizard",footer:i().createElement(v,{isLoading:R,onValidate:function(e){M.length<1?(K(b("topic.required")),P("error")):(Y(!0),function(e,t){var n,a,i,r;n=void 0,a=void 0,r=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,k.BN)(e,u)];case 1:return n.sent()&&(K(b("topic.already_exists",{name:e})),P("error"),Y(!1)),[3,3];case 2:return"404"==n.sent().response.status&&(P("default"),Y(!1),t()),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{c(r.next(e))}catch(e){t(e)}}function l(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,l)}c((r=r.apply(n,a||[])).next())}))}(M,e))},topicNameValidated:F,closeWizard:te})})))},C=function(e){var t=e.setIsCreateTopic,n=e.kafkaInstanceLink,r=e.kafkaName,o=e.kafkaPageLink,c=e.onCloseCreateTopic,s=(0,a.useState)(!1),m=s[0],u=s[1];return i().createElement(i().Fragment,null,i().createElement(l,{isSwitchChecked:m,setIsSwitchChecked:u,kafkaName:r,kafkaInstanceLink:n,kafkaPageLink:o}),i().createElement(b,{isSwitchChecked:m,setIsCreateTopic:t,onCloseCreateTopic:c}))}}}]);
//# sourceMappingURL=486.b0df813d.bundle.js.map