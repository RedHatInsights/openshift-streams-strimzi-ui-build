"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[7290],{37290:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var o=n(75418),i=n.n(o),r=n(31521),a=n(84669),l=n(60540),u=n(3654),c=n(5736),s=n(46332),d=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((o=o.apply(e,t||[])).next())}))},f=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};const p=function(e){var t=e.topicName,n=e.onDeleteTopic,p=e.refreshTopics,v=e.hideModal,h=(0,o.useContext)(u.E),m=(0,r.useTranslation)().t,b=(0,o.useState)(""),w=b[0],y=b[1],g=((0,s.useAlert)()||{addAlert:function(){}}).addAlert,k=(0,o.useState)(!1),T=k[0],P=k[1],x=function(){v()};return i().createElement(a.Modal,{variant:a.ModalVariant.small,isOpen:!0,"aria-label":m("topic.delete_modal_title"),title:m("topic.delete_modal_title"),titleIconVariant:"warning",showClose:!0,"aria-describedby":"modal-message",onClose:x,actions:[i().createElement(a.Button,{variant:"danger",onClick:function(){return d(void 0,void 0,void 0,(function(){var e,o,i;return f(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t?(P(!0),[4,(0,l.BK)(t,h).then((function(){g({title:m("topic.topic_successfully_deleted",{name:t}),variant:a.AlertVariant.success}),n&&n(),p&&p()}))]):[3,2];case 1:r.sent(),r.label=2;case 2:return[3,4];case 3:return e=r.sent(),P(!1),o=void 0,e&&(0,c.I)(e)&&(o=null===(i=e.response)||void 0===i?void 0:i.data.error_message),g({title:o||"",variant:a.AlertVariant.danger}),[3,4];case 4:return x(),[2]}}))}))},key:1,"data-testid":"modalDeleteTopic-buttonDelete",isDisabled:"DELETE"!=w.toUpperCase(),isLoading:T},m("common.delete")),i().createElement(a.Button,{variant:"link",onClick:x,key:2},m("common.cancel"))]},i().createElement(a.Text,{id:"modal-message"}," ",i().createElement("label",{htmlFor:"instance-name-input",dangerouslySetInnerHTML:{__html:m("common.confirm_delete_modal_text",{name:t})}})),i().createElement("br",null),i().createElement("label",{htmlFor:"delete-text-input"},m("common.confirm_delete")),i().createElement(a.TextInput,{value:w,id:"delete-text-input",name:"delete-text-input",type:"text",onChange:function(e){y(e)},autoFocus:!0}))}},60540:(e,t,n)=>{n.d(t,{BB:()=>u,Rh:()=>c,eR:()=>d,BN:()=>f,BK:()=>p});var o,i=n(82625),r=n(27577),a=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((o=o.apply(e,t||[])).next())}))},l=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};!function(e){e.name="name",e.partitions="partitions",e.retentionMs="retention.ms",e.retentionSize="retention.bytes"}(o||(o={}));var u=function(e,t,n,o,u,c,s){return void 0===c&&(c=r.SortByDirection.asc),a(void 0,void 0,Promise,(function(){var r;return l(this,(function(a){switch(a.label){case 0:return[4,null==e?void 0:e.getToken()];case 1:return r=a.sent(),[4,new i.TopicsApi(new i.Configuration({accessToken:r,basePath:null==e?void 0:e.basePath})).getTopics(u,t,n,o,void 0,c,s)];case 2:return[2,a.sent().data]}}))}))},c=function(e,t){return a(void 0,void 0,Promise,(function(){var n,o;return l(this,(function(r){switch(r.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=r.sent(),[4,new i.TopicsApi(new i.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=r.sent().data,[2,s(o)]}}))}))},s=function(e){var t,n,o,i={name:"",numPartitions:"0"};return e&&e.name&&(i.name=e.name),null===(t=e.config)||void 0===t||t.forEach((function(e){e.key&&(i[e.key]=e.value)})),i.numPartitions=(null===(n=null==e?void 0:e.partitions)||void 0===n?void 0:n.length.toString())||"0",i.replicationFactor=(null==e?void 0:e.partitions)&&(null===(o=null==e?void 0:e.partitions[0].replicas)||void 0===o?void 0:o.length.toString())||"0",i},d=function(e,t,n){return a(void 0,void 0,Promise,(function(){var o;return l(this,(function(r){switch(r.label){case 0:return[4,null==n?void 0:n.getToken()];case 1:return o=r.sent(),[4,new i.TopicsApi(new i.Configuration({accessToken:o,basePath:null==n?void 0:n.basePath})).updateTopic(e,t)];case 2:return[2,r.sent().status]}}))}))},f=function(e,t){return a(void 0,void 0,Promise,(function(){var n,o,r,a,u,c;return l(this,(function(l){switch(l.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=l.sent(),[4,new i.TopicsApi(new i.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=l.sent(),(r=o.data).config=r.config||[],r.config.push({key:"replicationFactor",value:null===(c=null===(u=null===(a=o.data)||void 0===a?void 0:a.partitions)||void 0===u?void 0:u.map((function(e){var t;return null===(t=e.replicas)||void 0===t?void 0:t.length})).reduce((function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e+t})))||void 0===c?void 0:c.toString()}),[2,o.data]}}))}))},p=function(e,t){return a(void 0,void 0,Promise,(function(){var n;return l(this,(function(o){switch(o.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=o.sent(),[4,new i.TopicsApi(new i.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).deleteTopic(e)];case 2:return o.sent(),[2]}}))}))}},5736:(e,t,n)=>{n.d(t,{I:()=>o});var o=function(e){return void 0!==e}}}]);
