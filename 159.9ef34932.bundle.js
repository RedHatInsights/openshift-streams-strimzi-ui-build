(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[159],{472:(e,t,a)=>{"use strict";t.Lf={name:"EllipsisVIcon",height:512,width:192,svgPath:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z",yOffset:0,xOffset:0},t.HJ=a(5183).createIcon(t.Lf),t.ZP=t.HJ},2159:(e,t,a)=>{"use strict";a.d(t,{v:()=>w});var n=a(7522),o=a.n(n),i=a(8183),r=a(4082),l=a(472),c=a(5399),s=a(1826),u=a(4369),p=a(9941),m=a(4426),d=a(9937),g=a(7009),f=a(3575),b=a(2273),v=function(e){var t=e.total,a=void 0===t?0:t,l=e.page,c=e.perPage,s=e.setFilteredValue,u=e.filteredValue,p=void 0===u?"":u,m=e.onCreateTopic,g=(0,i.useTranslation)().t,v=(0,n.useState)(""),h=v[0],T=v[1],E=o().createElement(o().Fragment,null,o().createElement(r.ToolbarFilter,{chips:p?[p]:[],deleteChip:function(){s("")},categoryName:""},o().createElement(r.InputGroup,null,o().createElement(r.TextInput,{name:"searchName",id:"search-topics-input",type:"search","aria-label":g("topic.topic_search_input"),placeholder:g("common.search"),value:h,onChange:function(e){T(e)}}),o().createElement(r.Button,{variant:r.ButtonVariant.control,isDisabled:!h.length,onClick:function(){s(h),T("")},"aria-label":g("topic.topic_search")},o().createElement(f.SearchIcon,null))))),_=[{item:o().createElement(r.Button,{id:"topic-list-create-topic-button",className:"topics-per-page","data-testid":"tabTopics-actionCreate",onClick:m},g("topic.create_topic"))}];return a>0&&_.push({item:o().createElement(d.w,{widgetId:"consumer-group-pagination-options-menu-top",itemCount:a,page:l,perPage:c,titles:{paginationTitle:g("common.minimal_pagination"),perPageSuffix:g("common.per_page_suffix"),toFirstPage:g("common.to_first_page"),toPreviousPage:g("common.to_previous_page"),toLastPage:g("common.to_last_page"),toNextPage:g("common.to_next_page"),optionsToggle:g("common.options_toggle"),currPage:g("common.curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),o().createElement(b.L,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s("")},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:"",breakpoint:"md"},toggleGroupItems:E,toolbarItems:_})},h=a(3555),T=a(8416),E=function(e){var t,a=e.total,n=e.page,l=e.perPage,s=e.setFilteredValue,f=e.filteredValue,b=e.onCreateTopic,E=e.topicItems,_=e.rowDataTestId,k=e.onEdit,P=e.onDeleteTopic,y=e.refreshTopics,C=(0,i.useTranslation)().t,S=(0,T.QK)().showModal,w=(0,g.S)(),I=w.onConnectToRoute,N=w.getConnectToRoutePath,x=[{title:C("common.name")},{title:C("common.partitions"),transforms:[u.sortable]},{title:C("topic.retention_time"),transforms:[u.sortable]},{title:C("topic.retention_size"),transforms:[u.sortable]}],L=function(e,t,a){var n,o,i,r,l,c=t.name,s=void 0===c?"":c;"delete"===a?(l=s,S(T.Ny.DELETE_TOPIC,{topicName:l,onDeleteTopic:P,refreshTopics:y})):"edit"===a&&k&&k(s),null===(r=null===(i=null===(o=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.parentElement)||void 0===i?void 0:i.previousSibling)||void 0===r||r.focus()},V=(t=[],null==E||E.map((function(e){var a,n,i=e.name,r=e.partitions,l=e.config;t.push({cells:[{title:o().createElement(c.Link,{"data-testid":"tableTopics-linkTopic",to:N&&N("topics/"+i,i)||"",onClick:function(e){e.preventDefault(),I&&I("topics/"+i)}},i)},null==r?void 0:r.length,(0,h.B4)(Number((null===(a=null==l?void 0:l.filter((function(e){return"retention.ms"===e.key}))[0])||void 0===a?void 0:a.value)||0)),(0,h.yI)(Number((null===(n=null==l?void 0:l.filter((function(e){return"retention.bytes"===e.key}))[0])||void 0===n?void 0:n.value)||0))],originalData:e})})),t);return o().createElement(o().Fragment,null,o().createElement(v,{total:a,page:n,perPage:l,onCreateTopic:b,setFilteredValue:s,filteredValue:f}),o().createElement(p.w,{tableProps:{cells:x,rows:V,"aria-label":C("topic.topic_list_table"),actionResolver:function(e){var t,a,n=e.originalData;return[(t={title:C("common.delete")},t["data-testid"]="tableTopics-actionDelete",t.onClick=function(e){return L(e,n,"delete")},t),(a={title:C("common.edit")},a["data-testid"]="tableTopics-actionEdit",a.onClick=function(e){return L(e,n,"edit")},a)]},shouldDefaultCustomRowWrapper:!0,variant:u.TableVariant.compact},rowDataTestId:_||"tableTopics-row"}),(null==E?void 0:E.length)<1&&f.length>0&&o().createElement(m.u,{emptyStateProps:{variant:m.j.NoResult},titleProps:{title:C("common.no_results_title")},emptyStateBodyProps:{body:C("common.no_results_body")}}),a>0&&o().createElement(d.w,{widgetId:"consumer-group-pagination-options-menu-bottom",itemCount:a,variant:r.PaginationVariant.bottom,page:n,perPage:l,titles:{paginationTitle:C("common.full_pagination"),perPageSuffix:C("common.per_page_suffix"),toFirstPage:C("common.to_first_page"),toPreviousPage:C("common.to_previous_page"),toLastPage:C("common.to_last_page"),toNextPage:C("common.to_next_page"),optionsToggle:C("common.options_toggle"),currPage:C("common.curr_page")}}))},_=a(7887),k=a(1302),P=a(6585),y=a(7265),C=function(e){var t=e.onCreateTopic,a=e.onEditTopic,l=(0,g.S)(),u=l.dispatchKafkaAction,p=l.onError,d=(0,i.useTranslation)().t,f=(0,y.useAlert)().addAlert,b=(0,n.useContext)(P.E),v=(0,c.useLocation)(),T=new URLSearchParams(v.search),C=parseInt(T.get("page")||"",10)||1,S=parseInt(T.get("perPage")||"",10)||10,w=(0,n.useState)(),I=w[0],N=w[1],x=(0,n.useState)(),L=x[0],V=x[1],F=(0,n.useState)(""),B=F[0],D=F[1],K=(0,n.useState)(0),R=K[0],G=K[1];(0,n.useEffect)((function(){A()}),[B]),(0,s.K)((function(){return A()}),5e3),(0,n.useEffect)((function(){var e=Number(S)*Number(C-1);G(e)}),[C,S]);var A=function(){return e=void 0,t=void 0,n=function(){var e;return function(e,t){var a,n,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],n=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,k.BB)(b,B).then((function(e){N(e),V(null==e?void 0:e.items)}))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),p&&401===e.response.data.code?p(e.response.data.code,e.response.data.error_message):f({title:e.response.data.error_message,variant:r.AlertVariant.danger}),[3,3];case 3:return[2]}}))},new((a=void 0)||(a=Promise))((function(o,i){function r(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}));var e,t,a,n};return o().createElement(o().Fragment,null,o().createElement(r.Card,{className:"kafka-ui-m-full-height"},void 0===L?o().createElement(r.PageSection,{className:"kafka-ui-m-full-height",variant:r.PageSectionVariants.light,padding:{default:"noPadding"}},o().createElement(_.y,null)):L.length<1&&B.length<1?o().createElement(r.Card,{className:"kafka-ui-m-full-height"},o().createElement(m.u,{emptyStateProps:{variant:m.j.NoItems},titleProps:{title:d("topic.empty_topics_title")},emptyStateBodyProps:{body:d("topic.empty_topics_body")},buttonProps:{title:d("topic.create_topic"),onClick:function(){t&&t(),u&&u(h.wT.CreateTopic)}}})):L?o().createElement(E,{total:(null==I?void 0:I.count)||0,page:C,perPage:S,onCreateTopic:t,topicItems:B?null==L?void 0:L.slice(0,S):null==L?void 0:L.slice(R,R+S),filteredValue:B,setFilteredValue:D,refreshTopics:A,onEdit:a}):o().createElement(o().Fragment,null)))},S=a(2269),w=(a(1781),function(e){var t=e.onCreateTopic,a=e.onEditTopic,c=e.activeTab,s=(0,i.useTranslation)().t,u=(0,g.S)(),p=u.kafkaPageLink,m=u.kafkaName,d=(0,n.useState)(c),f=d[0],b=d[1],v=o().createRef(),h=o().createRef(),T=o().createElement(r.Breadcrumb,null,o().createElement(r.BreadcrumbItem,{to:p||"#"},s("common.kafka_instance")),o().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},m||s("common.kafka_instance_name")));return o().createElement(o().Fragment,null,o().createElement("section",{className:"pf-c-page__main-breadcrumb"},T),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light},o().createElement(r.Level,null,o().createElement(r.Title,{headingLevel:"h1"},m||s("common.kafka_instance_name")),o().createElement(r.Button,{variant:"plain",iconPosition:"right"},o().createElement(l.ZP,null)))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light,padding:{default:"noPadding"},className:"pf-c-page__main-tabs"},o().createElement(r.Tabs,{activeKey:f,onSelect:function(e,t){b(t)},"data-testid":"pageKafka-tabProperties",className:"pf-m-page-insets"},o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,s("topic.topics")),eventKey:1,"data-testid":"pageKafka-tabTopics",id:"topics-tab-section","aria-label":s("topic.topics"),tabContentRef:h,tabContentId:"kafka-ui-TabcontentTopicsList"}),o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,s("consumerGroup.consumer_groups")),eventKey:2,"data-testid":"pageKafka-tabConsumers",id:"consumer-groups-tab-section","aria-label":s("consumerGroup.consumer_groups"),tabContentRef:v,tabContentId:"kafka-ui-TabcontentConsumersList"}))),o().createElement(r.PageSection,{isFilled:!0},o().createElement(r.TabContent,{eventKey:1,ref:h,id:"kafka-ui-TabcontentTopicsList",className:"kafka-ui-m-full-height","aria-label":s("topic.topics")},o().createElement(C,{onCreateTopic:t,onEditTopic:a})),o().createElement(r.TabContent,{eventKey:2,ref:v,id:"kafka-ui-TabcontentConsumersList",className:"kafka-ui-m-full-height","aria-label":s("consumerGroup.consumer_groups"),hidden:!0},o().createElement(S.J,{consumerGroupByTopic:!1}))))})}}]);
//# sourceMappingURL=159.9ef34932.bundle.js.map