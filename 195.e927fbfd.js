"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[195],{41272:(e,n,r)=>{r.d(n,{Q:()=>o});var t=r(84669),i=r(34046),a=r(75418),s=r.n(a),o=function(e){var n=e.children,r=e.labelHead,a=e.fieldId,o=e.fieldLabel,l=e.labelBody,c=e.buttonAriaLabel,u=e.validated,p=e.helperText,m=e.helperTextInvalid,d=e.isRequired;return s().createElement(t.FormGroup,{fieldId:a,label:o,validated:u,helperText:p,helperTextInvalid:m,isRequired:d,labelIcon:s().createElement(t.Popover,{headerContent:s().createElement("div",null,r),bodyContent:s().createElement("div",null,l)},s().createElement("button",{"aria-label":c,onClick:function(e){return e.preventDefault()},className:"pf-c-form__group-label-help"},s().createElement(i.ZP,{noVerticalAlign:!0})))},n)}},26380:(e,n,r)=>{r.r(n),r.d(n,{ManagePermissions:()=>j,ManagePermissionsModal:()=>H,default:()=>W});var t=r(75418),i=r.n(t),a=r(84669),s=r(11593),o=r(76621),l=r(3654),c=r(95216),u=r(41272),p=function(e){var n=e.setId,r=e.id,o=e.initialOptions,l=e.setEscapeClosesModal,p=(0,s.useTranslation)().t,m=(0,t.useState)(!1),d=m[0],_=m[1],v=function(){n({value:void 0}),_(!1)};return i().createElement(u.Q,{labelHead:p("permission.manage_permissions_dialog.account_id_title"),fieldId:"kafka-instance-name",fieldLabel:p("permission.manage_permissions_dialog.account_id_title"),labelBody:p("permission.manage_permissions_dialog.account_id_help"),buttonAriaLabel:p("permission.manage_permissions_dialog.account_id_aria"),isRequired:!0,helperTextInvalid:r.errorMessage,validated:r.validated||"default"},i().createElement(a.Select,{variant:a.SelectVariant.typeahead,typeAheadAriaLabel:p("permission.manage_permissions_dialog.account_id_typeahead_aria"),onToggle:function(e){l(!e),_(e)},onSelect:function(e,r,t){""===r&&(r=void 0),t?v():n((function(){return void 0===r?{value:r,validated:"error",errorMessage:p("permission.manage_permissions_dialog.must_select_account_error")}:{validated:"success",value:r}})),_(!1)},onClear:v,selections:r.value,isOpen:d,isInputValuePersisted:!0,placeholderText:p("permission.manage_permissions_dialog.account_id_typeahead_placeholder"),isCreatable:!1,menuAppendTo:"parent",maxHeight:400,validated:r.validated||"default",isGrouped:!0},[i().createElement(a.SelectGroup,{key:"all_accounts_group"},i().createElement(a.SelectOption,{key:"*",value:"*",description:p("permission.manage_permissions_dialog.all_accounts_description")},p("permission.manage_permissions_dialog.all_accounts_title"))),i().createElement(a.Divider,{key:"divider"}),i().createElement(a.SelectGroup,{label:p("permission.manage_permissions_dialog.all_accounts_service_account_group"),key:"service_accounts_group"},o.filter((function(e){return e.principalType===c.PrincipalType.ServiceAccount})).map((function(e,n){return i().createElement(a.SelectOption,{key:n,value:e.id,description:e.displayName},e.id)}))),i().createElement(a.Divider,{key:"divider"}),i().createElement(a.SelectGroup,{label:p("permission.manage_permissions_dialog.all_accounts_user_account_group"),key:"user_accounts_group"},o.filter((function(e){return e.principalType===c.PrincipalType.UserAccount})).map((function(e,n){return i().createElement(a.SelectOption,{key:n,value:e.id,description:e.displayName},e.id)})))]))},m=r(70853),d=r(27577),_=r(28942),v=r(80887),f=r(77221),g=function(){return g=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},g.apply(this,arguments)},y=function(e){var n=e.options,r=e.setSelected,o=e.selected,l=e.row,c=e.id,p=e.placeholder,m=e.setEscapeClosesModal,d=e.onSelect,_=e.menuAppendTo,y=e.onClear,h=(0,s.useTranslation)().t,T=(0,t.useState)(!1),b=T[0],E=T[1],A=function(){r(l,y()),E(!1)};return i().createElement(u.Q,{labelHead:h("permission.manage_permissions_dialog.assign_permissions."+c+".popover_head"),fieldId:c,labelBody:h("permission.manage_permissions_dialog.assign_permissions."+c+".popover_label"),buttonAriaLabel:h("`permission.manage_permissions_dialog.assign_permissions.${id}.aria`"),isRequired:!0,helperTextInvalid:o.errorMessage,validated:o.validated||"default"},i().createElement(v.P,{variant:a.SelectVariant.single,onToggle:function(e){m(!e),E(e)},onSelect:function(e,n,t){""===n&&(n=void 0),t?A():(r(l,n),E(!1),d(n))},onClear:A,selections:o.value,isOpen:b,isInputValuePersisted:!0,placeholderText:p,validated:o.validated||"default",menuAppendTo:_,maxHeight:200},n.map((function(e,n){return i().createElement(f.SelectOption,g({isDisabled:e.disabled,key:n,value:e.value},e.description&&{description:e.description}),e.title)}))))},h=r(73866),T=r(54283),b=function(){return b=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},b.apply(this,arguments)},E=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,a=n.length;i<a;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},A=function(e){var n=e.row,r=e.setValue,o=e.value,l=e.initialOptions,c=e.id,p=e.placeholder,m=e.onSelect,d=e.setEscapeClosesModal,_=e.menuAppendTo,g=(0,s.useTranslation)().t,y=(0,t.useState)(!1),h=y[0],T=y[1],A=(0,t.useState)([]),w=A[0],k=A[1];(0,t.useEffect)((function(){k(l().map((function(e){return{value:e}})))}),[l]);var C=function(){r(n,void 0),T(!1)};return i().createElement(u.Q,{labelHead:g("permission.manage_permissions_dialog.assign_permissions."+c+".popover_head"),fieldId:c,labelBody:g("permission.manage_permissions_dialog.assign_permissions."+c+".popover_label"),buttonAriaLabel:g("`permission.manage_permissions_dialog.assign_permissions.${id}.aria`"),isRequired:!0,helperTextInvalid:o.errorMessage,validated:o.validated||"default"},i().createElement(v.P,{variant:a.SelectVariant.typeahead,typeAheadAriaLabel:g("permission.manage_permissions_dialog.assign_permissions.resource_name_aria"),onToggle:function(e){d(!e),T(e)},onSelect:function(e,t,i){""===t&&(t=void 0),i?C():(r(n,t),T(!1),m(t))},onClear:C,selections:o.value,isOpen:h,isInputValuePersisted:!0,placeholderText:p,isCreatable:!0,onCreateOption:function(e){k(E(E([],w,!0),[{value:e}],!1))},createText:g("permission.manage_permissions_dialog.assign_permissions.resource_name_typeahead_create_text"),validated:o.validated||"default",menuAppendTo:_,maxHeight:200},w.map((function(e,n){return i().createElement(f.SelectOption,b({isDisabled:e.disabled,key:n,value:e.value},e.description&&{description:e.description}))}))))},w=r(20777),k=r(90966),C=function(e){var n=x();return!(e.permission.value===n.permission.value&&e.patternType.value===n.patternType.value&&e.resourceType.value===n.resourceType.value&&e.resource.value===n.resource.value&&e.operation.value===n.operation.value)},x=function(){return{permission:{value:m.AclPermissionType.Allow},operation:{value:void 0},resourceType:{value:void 0},patternType:{value:m.AclPatternType.Prefixed},resource:{value:void 0}}},S=r(87892),I=r(18129),P=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,a=n.length;i<a;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},M=function(e){var n=e.acls,r=e.setAcls,t=e.topicNames,l=e.consumerGroupIds,c=e.selectedAccount,u=e.setEscapeClosesModal,p=e.resourceOperations,v=e.menuAppendTo,f=(0,I.N)().validateName,g=(0,s.useTranslation)().t,b=[{title:g("permission.table.resource_column_title"),columnTransforms:[(0,d.cellWidth)(20)]},{title:"",columnTransforms:[(0,d.cellWidth)(15)]},{title:"",columnTransforms:[(0,d.cellWidth)(25)]},{title:g("permission.table.permissions_column_title"),columnTransforms:[(0,d.cellWidth)(20)]},{title:"",columnTransforms:[(0,d.cellWidth)(20)]}],E=function(e,n){r((function(r){return r.map((function(r,t){return t===e&&(r.permission={value:n}),r}))}))},M=function(e,n){r((function(r){return r.map((function(r,t){return t===e&&(r.operation={value:n}),r}))}))},O=function(e,n){r((function(r){return r.map((function(r,t){return t===e&&(r.resourceType={value:n}),r}))}))},N=function(e,n){r((function(r){return r.map((function(r,t){return t===e&&(r.patternType={value:n}),r}))}))},G=function(e,n){r((function(r){return r.map((function(r,t){return t===e&&(r.resource={value:n}),r}))}))},R=function(e){var n=e.acl,t=e.row;return n.resourceType.value===m.AclResourceType.Cluster?i().createElement(i().Fragment,null):i().createElement(y,{options:(0,o.t)().map((function(e){return{value:e,title:e===m.AclPatternType.Prefixed?g("permission.manage_permissions_dialog.assign_permissions.pattern_type_prefixed"):g("permission.manage_permissions_dialog.assign_permissions.pattern_type_literal"),description:e===m.AclPatternType.Prefixed?g("permission.manage_permissions_dialog.assign_permissions.pattern_type_prefixed_help"):g("permission.manage_permissions_dialog.assign_permissions.pattern_type_literal_help")}})).sort((function(e,n){return n.value.localeCompare(e.value)})),selected:n.patternType,setSelected:N,row:t,id:"pattern-type",setEscapeClosesModal:u,menuAppendTo:v,onClear:function(){return x().patternType.value},onSelect:function(e){r((function(n){return void 0===e?(n[t].patternType.validated="error",n[t].patternType.validated=g("permission.manage_permissions_dialog.assign_permissions.must_select_pattern_type_error")):n[t].patternType.validated="success",n}))}})},F=function(e){var n=e.row,t=e.acl;return i().createElement(y,{options:(0,o.yN)().map((function(e){return{value:e,title:(0,S.s)(e)}})),selected:t.resourceType,setSelected:O,row:n,id:"resource-type",placeholder:g("permission.manage_permissions_dialog.assign_permissions.resource_type_placeholder"),setEscapeClosesModal:u,menuAppendTo:v,onClear:function(){return x().resourceType.value},onSelect:function(e){r((function(r){return void 0===e?(r[n].resourceType.validated="error",r[n].resourceType.errorMessage=g("permission.manage_permissions_dialog.assign_permissions.must_select_resource_type_error")):r[n].resourceType.validated="success",r}))}})},L=function(e){var n,a=e.row,s=e.acl;return s.resourceType.value===m.AclResourceType.Cluster?i().createElement(i().Fragment,null):i().createElement(A,{row:a,value:s.resource,setValue:G,id:"resource",placeholder:g("permission.manage_permissions_dialog.assign_permissions.pattern_type_"+((null===(n=s.patternType.value)||void 0===n?void 0:n.toLowerCase())||"prefixed")+"_placeholder"),setEscapeClosesModal:u,menuAppendTo:v,initialOptions:function(){return s.resourceType.value===m.AclResourceType.Topic?t:s.resourceType.value===m.AclResourceType.Group?l:[]},onSelect:function(e){var n=f(e);void 0!==n?r((function(e){return e[a].resource.validated="error",e[a].resource.errorMessage=n,e})):void 0!==e&&r((function(e){return e[a].resource.validated="success",e}))}})},B=function(e){var n=e.acl,t=e.row;return i().createElement(y,{options:(0,o.mv)().map((function(e){return{value:e,title:(0,h.sentenceCase)(e)}})),selected:n.permission,setSelected:E,row:t,id:"permission-type",setEscapeClosesModal:u,menuAppendTo:v,onClear:function(){return x().permission.value},onSelect:function(e){r((function(n){return void 0===e?(n[t].permission.validated="error",n[t].permission.errorMessage=g("permission.manage_permissions_dialog.assign_permissions.must_select_permission_error")):n[t].permission.validated="success",n}))}})},D=function(e){var n=e.acl,t=e.row;return i().createElement(y,{options:(0,o.G6)().filter((function(e){if(void 0===n.resourceType.value||""===n.resourceType.value.toString())return!0;var r=(0,T.snakeCase)(n.resourceType.value.toString()),t=(0,T.snakeCase)(e);return p[r].some((function(e){return e===t}))})).map((function(e){return{value:e,title:(0,h.sentenceCase)(e)}})),selected:n.operation,setSelected:M,row:t,id:"operation",placeholder:g("permission.manage_permissions_dialog.assign_permissions.operation_placeholder"),setEscapeClosesModal:u,menuAppendTo:v,onClear:function(){return x().operation.value},onSelect:function(e){r((function(n){return void 0===e?(n[t].operation.validated="error",n[t].operation.errorMessage=g("permission.manage_permissions_dialog.assign_permissions.must_select_operation_error")):n[t].operation.validated="success",n}))}})},V=function(e){var n=e.row,t=e.acl;return i().createElement(a.Tooltip,{content:g("permission.manage_permissions_dialog.assign_permissions.remove_row_help")},i().createElement(a.Button,{variant:"link",icon:i().createElement(k.ZP,null),onClick:function(){return function(e){r((function(n){return n.length>1?n.filter((function(n,r){return r!==e})):[x()]}))}(n)},isDisabled:!C(t)}))};return i().createElement(a.GridItem,{span:12},i().createElement(a.FormGroup,{fieldId:"createPermissions",label:g("permission.manage_permissions_dialog.assign_permissions.title"),helperText:"*"===c?g("permission.manage_permissions_dialog.assign_permissions.help_all_accounts"):g("permission.manage_permissions_dialog.assign_permissions.help",{account_id:c}),isHelperTextBeforeField:!0},i().createElement(_.w,{tableProps:{cells:b,rows:n.map((function(e,n){return{cells:[{title:i().createElement(F,{row:n,acl:e})},{title:i().createElement(R,{row:n,acl:e})},{title:i().createElement(L,{acl:e,row:n})},{title:i().createElement(B,{acl:e,row:n})},{title:i().createElement("div",{className:"pf-u-display-flex pf-u-justify-content-space-between"},i().createElement("div",null,i().createElement(D,{acl:e,row:n})),i().createElement("div",null,i().createElement(V,{acl:e,row:n})))}]}})),"aria-label":g("permission.table.table.permission_list_table"),shouldDefaultCustomRowWrapper:!0,variant:d.TableVariant.compact,canSelectAll:!1},rowDataTestId:"tablePermissions-row"}),i().createElement(a.Button,{variant:"link",icon:i().createElement(w.ZP,null),onClick:function(){r((function(e){return P(P([],e,!0),[x()],!1)}))}},g("permission.manage_permissions_dialog.assign_permissions.add_row"))))},O=r(4055),N=r(58785),G=r(70251),R=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,a=n.length;i<a;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},F=function(e){var n=e.existingAcls,r=e.selectedAccountId,o=e.onRemove,l=(0,s.useTranslation)().t,c=(0,t.useState)([]),u=c[0],p=c[1];(0,t.useEffect)((function(){p(n.map((function(e,n){var r=e;return r.index=n,r})))}),[n]);var m=[{title:l("permission.table.resource_column_title"),columnTransforms:[(0,d.cellWidth)(60)]},{title:l("permission.table.permissions_column_title"),columnTransforms:[(0,d.cellWidth)(20)]},{title:"",columnTransforms:[(0,d.cellWidth)(20)]}],v=[N.C8,N.ev,function(e){var n=function(){return i().createElement("div",{className:"pf-u-display-flex pf-u-justify-content-flex-end"},i().createElement(a.Button,{variant:"link",icon:i().createElement(G.TrashIcon,null),onClick:function(){return n=e,p(u.map((function(e){return e.hash()===n.hash()&&(e.removed=!0),e}))),void o(n);var n}}))},t=function(){return i().createElement("div",{className:"pf-u-display-flex pf-u-justify-content-flex-end"},i().createElement(a.Label,{variant:"outline"},l("permission.table.all_accounts")))};return"*"===r&&"*"===e.principal?{title:i().createElement(i().Fragment,null,i().createElement(t,null)," ",i().createElement(n,null)),props:{}}:"*"===e.principal?{title:i().createElement(t,null),props:{}}:{title:i().createElement(n,null),props:{}}}];if(void 0===r||0===u.length)return i().createElement(i().Fragment,null);return i().createElement(a.GridItem,{span:12},i().createElement(a.FormGroup,{fieldId:"selectedAccount",label:l("permission.manage_permissions_dialog.edit_existing.title"),helperText:i().createElement((function(){return"*"===r?l("permission.manage_permissions_dialog.edit_existing.all_accounts_help"):i().createElement(s.Trans,{i18nKey:"permission.manage_permissions_dialog.edit_existing.help"},"Review the list of existing permissions for the selected account. The list includes account-specific permissions and permissions applied to all accounts within this Kafka instance. Permissions labeled"," ",i().createElement("strong",null,"All accounts")," cannot be removed when an individual account ID is selected.")}),null),isHelperTextBeforeField:!0},i().createElement(_.w,{tableProps:{cells:m,rows:R([],u.filter((function(e){return!e.removed})).map((function(e,n){return{cells:v.map((function(r){return r(e,n)})),originalData:e}})),!0),"aria-label":l("permission.table.table.permission_list_table"),shouldDefaultCustomRowWrapper:!0,variant:d.TableVariant.compact,canSelectAll:!1},rowDataTestId:"tablePermissions-row"})))},L=function(){return L=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},L.apply(this,arguments)},B=function(e,n,r,t){return new(r||(r=Promise))((function(i,a){function s(e){try{l(t.next(e))}catch(e){a(e)}}function o(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,o)}l((t=t.apply(e,n||[])).next())}))},D=function(e,n){var r,t,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,t=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(e){a=[6,e],t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},V=function(e,n,r){if(r||2===arguments.length)for(var t,i=0,a=n.length;i<a;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))},j=function(e){var n=e.hideModal,r=e.onSave,a=e.kafkaName,s=e.selectedAccountId,c=e.acls,u=e.topicNames,p=e.consumerGroupIds,m=(0,t.useContext)(l.E),d=(0,o.qK)(m),_=(0,t.useState)(),v=_[0],f=_[1];return(0,t.useEffect)((function(){B(void 0,void 0,void 0,(function(){var e;return D(this,(function(n){switch(n.label){case 0:return[4,d.getResourceOperations()];case 1:return e=n.sent(),f(e),[2]}}))}))}),[]),i().createElement(H,{topicNames:u,consumerGroupIds:p,acls:c,resourceOperations:v,hideModal:n,selectedAccountId:s,onSave:r,kafkaName:a})},H=function(e){var n=e.hideModal,r=e.onSave,d=e.kafkaName,_=e.selectedAccountId,v=e.acls,f=e.topicNames,g=e.consumerGroupIds,y=e.resourceOperations,h=(0,s.useTranslation)().t,T=(0,t.useState)({value:_}),b=T[0],E=T[1],A=(0,t.useState)(void 0===_?1:2),w=A[0],k=A[1],S=(0,t.useState)([x()]),P=S[0],N=S[1],G=(0,t.useState)([]),R=G[0],j=G[1],H=(0,t.useRef)(!0),W=(0,I.N)().validateName,q=(0,c.usePrincipals)(),Q=(0,t.useContext)(l.E),K=(0,o.qK)(Q),Z=function(){return B(void 0,void 0,void 0,(function(){var e,t,i,a,s,l;return D(this,(function(c){switch(c.label){case 0:if(e=!0,void 0===b.value?(E((function(e){return L(L({},e),{validated:"error",errorMessage:h("permission.manage_permissions_dialog.must_select_account_error")})})),e=!1):E((function(e){return L(L({},e),{validated:"success"})})),N((function(n){return n.map((function(n){if(C(n)){var r=Object.assign({},n);if(void 0===n.resourceType.value?(r.resourceType.validated="error",r.resourceType.errorMessage=h("permission.manage_permissions_dialog.assign_permissions.must_select_resource_type_error"),e=!1):r.resourceType.validated="success",n.resourceType.value!==m.AclResourceType.Cluster){if(void 0===n.resource.value)r.resource.validated="error",r.resource.errorMessage=h("permission.manage_permissions_dialog.assign_permissions.must_select_resource_error"),e=!1;else{var t=W(n.resource.value);void 0!==t?(r.resource.validated="error",r.resource.errorMessage=t,e=!1):r.resource.validated="success"}void 0===n.patternType.value?(r.patternType.validated="error",r.patternType.errorMessage=h("permission.manage_permissions_dialog.assign_permissions.must_select_pattern_type_error"),e=!1):r.patternType.validated="success"}return void 0===n.permission.value?(r.permission.validated="error",r.permission.errorMessage=h("permission.manage_permissions_dialog.assign_permissions.must_select_permission_error"),e=!1):r.permission.validated="success",void 0===n.operation.value?(r.operation.validated="error",r.operation.errorMessage=h("permission.manage_permissions_dialog.assign_permissions.must_select_operation_error"),e=!1):r.operation.validated="success",r}return n}))})),!e)return[3,11];t=0,i=P.filter((function(e){return C(e)})),c.label=1;case 1:if(!(t<i.length))return[3,4];if(void 0===(l=i[t]).resourceType.value)throw Error("resourceType must not be undefined");if(l.resourceType.value!==m.AclResourceType.Cluster){if(void 0===l.resource.value)throw Error("resource must not be undefined");if(void 0===l.patternType.value)throw Error("patternType must not be undefined")}else l.resource.value="kafka-cluster",l.patternType.value=m.AclPatternType.Literal;if(void 0===l.permission.value)throw Error("permission must not be undefined");if(void 0===l.operation.value)throw Error("operation must not be undefined");return[4,K.addPermission({resourceName:l.resource.value,patternType:l.patternType.value,permission:l.permission.value,resourceType:l.resourceType.value,operation:l.operation.value,principal:"User:"+b.value})];case 2:c.sent(),c.label=3;case 3:return t++,[3,1];case 4:a=0,s=R,c.label=5;case 5:return a<s.length?(l=s[a],[4,K.deletePermission({resourceName:l.resourceName,patternType:(0,o.L2)(l.patternType,m.AclPatternTypeFilter),permissionType:(0,o.L2)(l.permission,m.AclPermissionTypeFilter),resourceType:(0,o.L2)(l.resourceType,m.AclResourceTypeFilter),operation:(0,o.L2)(l.operation,m.AclOperationFilter),principal:"User:"+b.value})]):[3,8];case 6:c.sent(),c.label=7;case 7:return a++,[3,5];case 8:return r?[4,r()]:[3,10];case 9:c.sent(),c.label=10;case 10:n(),c.label=11;case 11:return[2]}}))}))},U=function(){if(2===w){if(void 0===y)return i().createElement(O.y,null);var e=document.getElementById("manage-permissions-modal")||void 0;return i().createElement(i().Fragment,null,i().createElement(F,{existingAcls:v.filter((function(e){return e.principal===""+b.value||"*"===e.principal})),selectedAccountId:b.value,onRemove:function(e){return j((function(n){return V(V([],n,!0),[e],!1)}))}}),i().createElement(M,{acls:P,setAcls:N,topicNames:f,consumerGroupIds:g,selectedAccount:b.value,setEscapeClosesModal:z,resourceOperations:y,menuAppendTo:e}))}return i().createElement(i().Fragment,null)},$=function(){return 1===w?i().createElement(p,{id:b,setId:E,initialOptions:q.getAllPrincipals(),setEscapeClosesModal:z}):i().createElement(u.Q,{labelHead:h("permission.manage_permissions_dialog.account_id_title"),fieldId:"kafka-instance-name",fieldLabel:h("permission.manage_permissions_dialog.account_id_title"),labelBody:h("permission.manage_permissions_dialog.account_id_help"),buttonAriaLabel:h("permission.manage_permissions_dialog.account_id_aria"),isRequired:!0},"*"===b.value?h("permission.manage_permissions_dialog.all_accounts_title"):b.value)},z=function(e){H.current=e};return i().createElement(a.Modal,{id:"manage-permissions-modal",variant:a.ModalVariant.large,isOpen:!0,"aria-label":h("permission.manage_permissions_dialog.aria_label"),title:h("permission.manage_permissions_dialog.title"),showClose:!0,"aria-describedby":"modal-message",onClose:n,onEscapePress:function(){H.current&&n()},actions:[i().createElement((function(){return 1===w?i().createElement(a.Button,{variant:"primary",onClick:function(){return k(2)},isDisabled:void 0===b.value},h("permission.manage_permissions_dialog.step_1_submit_button")):i().createElement(a.Button,{variant:"primary",onClick:Z,key:1,isDisabled:!P.some((function(e){return C(e)||R.length>0}))},h("permission.manage_permissions_dialog.step_2_submit_button"))}),{key:1}),i().createElement(a.Button,{onClick:n,key:2,variant:"secondary"},h("permission.manage_permissions_dialog.cancel_button"))]},i().createElement((function(){return i().createElement(a.Form,null,i().createElement(a.Grid,{hasGutter:!0,md:6},i().createElement(a.GridItem,{span:12},i().createElement(a.FormGroup,{fieldId:"kafka-instance-name",label:h("permission.manage_permissions_dialog.kafka_instance_title")},d)),i().createElement(a.GridItem,{span:12},i().createElement($,null))),i().createElement(U,null))}),null))};const W=j},18129:(e,n,r)=>{r.d(n,{N:()=>i});var t=r(11593),i=function(){var e=(0,t.useTranslation)().t;return{validateName:function(n){var r=new RegExp("^[a-zA-Z0-9._-]+$");return n.length&&!r.test(n)?e("topic.topic_name_helper_text"):n.length>249?e("topic.cannot_exceed_characters"):"."===n||".."===n?e("topic.invalid_name_with_dot"):void 0}}}}}]);
//# sourceMappingURL=195.e927fbfd.js.map