{"version":3,"file":"2546.342143d4.js","mappings":"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","sources":["webpack://kafka-ui/./src/modules/ConsumerGroups/dialogs/DeleteConsumerGroup/DeleteConsumerGroup.tsx","webpack://kafka-ui/./src/services/consumer-groups.ts","webpack://kafka-ui/./src/utils/axios.ts"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Alert,\n  AlertVariant,\n  Button,\n  ButtonVariant,\n  Modal,\n  ModalVariant,\n  Text,\n} from '@patternfly/react-core';\nimport { deleteConsumerGroup } from '@app/services';\nimport { ConfigContext } from '@app/contexts';\nimport { ConsumerGroupStateEnum } from '@rhoas/kafka-instance-sdk';\nimport { isAxiosError } from '@app/utils/axios';\nimport {\n  BaseModalProps,\n  DeleteConsumerGroupProps,\n  useAlert,\n} from '@rhoas/app-services-ui-shared';\n\nconst DeleteConsumerGroup: React.FC<\n  DeleteConsumerGroupProps & BaseModalProps\n> = ({ consumerName, refreshConsumerGroups, hideModal, state }) => {\n  const { t } = useTranslation(['kafkaTemporaryFixMe']);\n  const config = useContext(ConfigContext);\n  const { addAlert } = useAlert() || {\n    addAlert: () => {\n      // No-op\n    },\n  };\n  const isConsumerConnected = state === ConsumerGroupStateEnum.Stable;\n\n  const onClose = () => {\n    hideModal();\n  };\n\n  const onDelete = async () => {\n    try {\n      if (consumerName) {\n        await deleteConsumerGroup(consumerName, config).then(() => {\n          addAlert({\n            variant: AlertVariant.success,\n            title: t('consumerGroup.consumergroup_successfully_deleted', {\n              name: consumerName,\n            }),\n          });\n\n          refreshConsumerGroups && refreshConsumerGroups();\n        });\n      }\n    } catch (err) {\n      let message: string | undefined;\n      if (err && isAxiosError(err)) {\n        message = err.response?.data.error_message;\n      }\n      addAlert({\n        variant: AlertVariant.danger,\n        title: message || '',\n      });\n    }\n    onClose();\n  };\n\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      isOpen={true}\n      aria-label={t('consumerGroup.delete')}\n      title={t('consumerGroup.delete')}\n      showClose={true}\n      aria-describedby='modal-message'\n      onClose={onClose}\n      actions={[\n        <Button\n          variant={ButtonVariant.primary}\n          onClick={onDelete}\n          key={1}\n          isDisabled={isConsumerConnected}\n        >\n          {t('common.delete')}\n        </Button>,\n        <Button variant='link' onClick={onClose} key={2}>\n          {t('common.cancel')}\n        </Button>,\n      ]}\n    >\n      {!isConsumerConnected && (\n        <Text id='modal-message'>\n          <label\n            htmlFor='instance-name-input'\n            dangerouslySetInnerHTML={{\n              __html: t('common.confirm_delete_modal_text', {\n                name: consumerName,\n              }),\n            }}\n          />\n        </Text>\n      )}\n      {isConsumerConnected && (\n        <Alert\n          className='modal-alert'\n          variant='danger'\n          isInline\n          title={t('consumerGroup.delete_consumer_connected_alert_title', {\n            name: consumerName,\n          })}\n        >\n          <p>{t('consumerGroup.delete_consumer_connected_alert_body')}</p>\n        </Alert>\n      )}\n    </Modal>\n  );\n};\n\nexport default DeleteConsumerGroup;\n","import { AxiosResponse } from 'axios';\nimport {\n  Configuration,\n  ConsumerGroup,\n  ConsumerGroupList,\n  ConsumerGroupResetOffsetParametersOffsetEnum,\n  ConsumerGroupResetOffsetResult,\n  GroupsApi,\n} from '@rhoas/kafka-instance-sdk';\nimport { IConfiguration } from '@app/contexts';\nimport { SortByDirection } from '@patternfly/react-table';\n\nconst getConsumerGroups = async (\n  config: IConfiguration | undefined,\n  offset?: number,\n  limit?: number,\n  size?: number,\n  page?: number,\n  topic?: string,\n  groupIdFilter?: string,\n  order: SortByDirection = SortByDirection.asc,\n  orderKey?: 'name' | undefined\n): Promise<ConsumerGroupList> => {\n  const accessToken = await config?.getToken();\n\n  const api = new GroupsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response: AxiosResponse<ConsumerGroupList> =\n    await api.getConsumerGroups(\n      offset,\n      limit,\n      size,\n      page,\n      topic,\n      groupIdFilter,\n      order,\n      orderKey\n    );\n  return response.data;\n};\n\nconst deleteConsumerGroup = async (\n  consumerGroupId: string,\n  config: IConfiguration | undefined\n): Promise<void> => {\n  const accessToken = await config?.getToken();\n\n  const api = new GroupsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  await api.deleteConsumerGroupById(consumerGroupId);\n  return;\n};\n\nconst getConsumerGroupDetail = async (\n  consumerGroupId: string,\n  config: IConfiguration | undefined\n): Promise<ConsumerGroup> => {\n  const accessToken = await config?.getToken();\n\n  const api = new GroupsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response: AxiosResponse<ConsumerGroup> = await api.getConsumerGroupById(\n    consumerGroupId\n  );\n  return response.data;\n};\n\nconst consumerGroupResetOffset = async (\n  config: IConfiguration | undefined,\n  consumerGroupId: string,\n  offset: ConsumerGroupResetOffsetParametersOffsetEnum,\n  topic: string,\n  partitions: number[],\n  value?: string\n): Promise<AxiosResponse<ConsumerGroupResetOffsetResult>> => {\n  const accessToken = await config?.getToken();\n\n  const api = new GroupsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response: AxiosResponse<ConsumerGroupResetOffsetResult> =\n    await api.resetConsumerGroupOffset(consumerGroupId, {\n      value,\n      offset,\n      topics: [{ topic, partitions }],\n    });\n  return response;\n};\n\nexport {\n  getConsumerGroups,\n  deleteConsumerGroup,\n  getConsumerGroupDetail,\n  consumerGroupResetOffset,\n};\n","import { AxiosError } from 'axios';\n\nexport type ErrorData = {\n  code: number;\n  error_message: string;\n};\n\nexport const isAxiosError = (\n  error: unknown\n): error is AxiosError<ErrorData> => {\n  return (error as AxiosError<ErrorData>) !== undefined;\n};\n"],"names":["consumerName","refreshConsumerGroups","hideModal","state","t","useTranslation","config","useContext","addAlert","useAlert","isConsumerConnected","ConsumerGroupStateEnum","onClose","Modal","variant","ModalVariant","isOpen","title","showClose","actions","Button","ButtonVariant","onClick","then","AlertVariant","name","message","response","data","error_message","key","isDisabled","Text","id","htmlFor","dangerouslySetInnerHTML","__html","Alert","className","isInline","getConsumerGroups","offset","limit","size","page","topic","groupIdFilter","order","orderKey","SortByDirection","Promise","getToken","accessToken","GroupsApi","Configuration","basePath","deleteConsumerGroup","consumerGroupId","deleteConsumerGroupById","consumerGroupResetOffset","partitions","value","resetConsumerGroupOffset","topics","isAxiosError","error","undefined"],"sourceRoot":""}