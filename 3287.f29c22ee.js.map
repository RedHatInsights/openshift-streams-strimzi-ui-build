{"version":3,"file":"3287.f29c22ee.js","mappings":"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","sources":["webpack://kafka-ui/./node_modules/@patternfly/react-icons/dist/js/icons/help-icon.js","webpack://kafka-ui/./src/components/TextWithLabelPopover/TextWithLabelPopover.tsx","webpack://kafka-ui/./src/constant/constants.ts","webpack://kafka-ui/./src/contexts/federated.ts","webpack://kafka-ui/./src/modules/Topics/pages/TopicDetail/TopicDetailFederated.tsx","webpack://kafka-ui/./src/services/topics.ts","webpack://kafka-ui/./src/utils/axios.ts"],"sourcesContent":["\"use strict\"\nexports.__esModule = true;\nexports.HelpIconConfig = {\n  name: 'HelpIcon',\n  height: 1024,\n  width: 1024,\n  svgPath: 'M521.3,576 C627.5,576 713.7,502 713.7,413.7 C713.7,325.4 627.6,253.6 521.3,253.6 C366,253.6 334.5,337.7 329.2,407.2 C329.2,414.3 335.2,416 343.5,416 L445,416 C450.5,416 458,415.5 460.8,406.5 C460.8,362.6 582.9,357.1 582.9,413.6 C582.9,441.9 556.2,470.9 521.3,473 C486.4,475.1 447.3,479.8 447.3,521.7 L447.3,553.8 C447.3,570.8 456.1,576 472,576 C487.9,576 521.3,576 521.3,576 M575.3,751.3 L575.3,655.3 C575.313862,651.055109 573.620137,646.982962 570.6,644 C567.638831,640.947672 563.552355,639.247987 559.3,639.29884 L463.3,639.29884 C459.055109,639.286138 454.982962,640.979863 452,644 C448.947672,646.961169 447.247987,651.047645 447.29884,655.3 L447.29884,751.3 C447.286138,755.544891 448.979863,759.617038 452,762.6 C454.961169,765.652328 459.047645,767.352013 463.3,767.30116 L559.3,767.30116 C563.544891,767.313862 567.617038,765.620137 570.6,762.6 C573.659349,759.643612 575.360354,755.553963 575.3,751.3 M512,896 C300.2,896 128,723.9 128,512 C128,300.3 300.2,128 512,128 C723.8,128 896,300.2 896,512 C896,723.8 723.7,896 512,896 M512.1,0 C229.7,0 0,229.8 0,512 C0,794.2 229.8,1024 512.1,1024 C794.4,1024 1024,794.3 1024,512 C1024,229.7 794.4,0 512.1,0',\n  yOffset: 0,\n  xOffset: 0,\n};\nexports.HelpIcon = require('../createIcon').createIcon(exports.HelpIconConfig);\nexports[\"default\"] = exports.HelpIcon;","import { Popover, FormGroup, TextInput } from '@patternfly/react-core';\nimport React from 'react';\nimport HelpIcon from '@patternfly/react-icons/dist/js/icons/help-icon';\n\nimport './TextWithLabelPopover.css';\n\nexport interface TextWithLabelPopoverProps {\n  /** Field id */\n  fieldId: string;\n  /** Field label */\n  fieldLabel: string;\n  /** Field value */\n  fieldValue?: string;\n  /** Header text for popover label */\n  popoverHeader: string;\n  /** Body text for popover label */\n  popoverBody: string;\n  /** Aria label for popover button */\n  btnAriaLabel: string;\n  /** Indicates if unlimited should be shown for negative numbers */\n  showUnlimited?: boolean;\n}\n\nexport const TextWithLabelPopover: React.FC<TextWithLabelPopoverProps> = ({\n  fieldId,\n  fieldLabel,\n  btnAriaLabel,\n  fieldValue,\n  popoverBody,\n  popoverHeader,\n  showUnlimited,\n}) => {\n  const preventButtonSubmit = (event) => event.preventDefault();\n\n  let displayText = '-';\n\n  if (\n    showUnlimited === true &&\n    fieldValue !== undefined &&\n    parseInt(fieldValue) < 0\n  ) {\n    displayText = 'Unlimited';\n  } else if (fieldValue) {\n    displayText = fieldValue;\n  }\n\n  return (\n    <FormGroup\n      fieldId={fieldId}\n      label={fieldLabel}\n      className='kafka-ui-form-group--readonly'\n      labelIcon={\n        <Popover\n          headerContent={<div>{popoverHeader}</div>}\n          bodyContent={<div>{popoverBody}</div>}\n        >\n          <button\n            aria-label={btnAriaLabel}\n            onClick={preventButtonSubmit}\n            className='pf-c-form__group-label-help'\n          >\n            <HelpIcon noVerticalAlign />\n          </button>\n        </Popover>\n      }\n    >\n      <TextInput\n        isReadOnly\n        type='text'\n        id={fieldId}\n        name={fieldId}\n        value={displayText}\n      />\n    </FormGroup>\n  );\n};\n","export const DEFAULT_REPLICAS = '3';\nexport const DEFAULT_MIN_CLEANBLE_RATIO = '0.5';\nexport const DEFAULT_MIN_INSYNC_REPLICAS = '2';\nexport const DEFAULT_SEGMENT_TIME = '604800000 milliseconds (7 days)';\nexport const DEFAULT_MAX_MESSAGE_TIMESTAMP_DIFF =\n  '9223372036854775807 milliseconds';\nexport const DEFAULT_SEGMENT_INDEX_SIZE = '10485760 bytes (10 mebibytes)';\nexport const DEFAULT_INDEX_INTERVAL_SIZE = '4096 bytes (4 kibibytes)';\nexport const DEFAULT_LOG_SEGMENT_SIZE = '1073741824 bytes (1 gibibyte)';\nexport const DEFAULT_DELETE_RETENTION_TIME = '86400000 milliseconds (1 day)';\nexport const DEFAULT_SEGMENT_JITTER_TIME = '0 milliseconds';\nexport const DEFAULT_FILE_DELETE_DELAY = '60000 milliseconds (1 minute)';\nexport const DEFAULT_MAXIMUM_MESSAGE_BYTES = '1048588 bytes';\nexport const DEFAULT_MESSAGE_TIMESTAMP_TYPE = 'CreateTime';\nexport const DEFAULT_MINIMUM_COMPACTION_LAG_TIME = '0 milliseconds';\nexport const DEFAULT_FLUSH_INTERVAL_MESSAGES = '9223372036854775807 messages';\nexport const DEFAULT_FLUSH_INTERVAL_TIME = '9223372036854775807 milliseconds';\nexport const MIN_PARTITIONS = 1;\nexport const MAX_PARTITIONS = 100;\n","import React, { useContext } from 'react';\nimport { DeleteInstanceProps } from '@rhoas/app-services-ui-shared';\n\nexport type FederatedProps = Pick<DeleteInstanceProps, 'kafka'> & {\n  activeTab?: number;\n  kafkaName?: string;\n  kafkaPageLink?: string;\n  kafkaInstanceLink?: string;\n  topicName?: string;\n  onError?: (errorCode: number, message?: string) => void;\n  handleInstanceDrawer?: (isOpen: boolean, activeTab?: string) => void;\n  setIsOpenDeleteInstanceModal?: (isOpenModal: boolean) => void;\n  showMetrics?: JSX.Element | undefined;\n  onClickCreateTopic?: () => void;\n  onEditTopic?: (topicName: string | undefined) => void;\n  onCancelUpdateTopic?: () => void;\n  updateTopic?: (topicName?: string | undefined) => void;\n  showSchemas?: JSX.Element | undefined;\n};\n\nexport const FederatedContext = React.createContext<FederatedProps | undefined>(\n  undefined\n);\nexport const useFederated = (): FederatedProps | undefined =>\n  useContext(FederatedContext);\n","import React, { FunctionComponent } from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { TopicDetailPage } from '@app/modules/Topics/pages/TopicDetail';\nimport {\n  ConfigContext,\n  FederatedContext,\n  FederatedProps,\n  IConfiguration,\n} from '@app/contexts';\nimport kafkai18n from '@app/i18n';\nimport { KafkaModalLoader } from '@app/components/KafkaModal';\nimport { ModalProvider } from '@rhoas/app-services-ui-components';\n\nexport type TopicDetailFederatedProps = FederatedProps &\n  IConfiguration & {\n    apiBasePath: string;\n  };\n\nconst TopicDetailFederated: FunctionComponent<TopicDetailFederatedProps> = ({\n  getToken,\n  apiBasePath,\n  kafkaName,\n  onError,\n  kafkaPageLink,\n  kafkaInstanceLink,\n  showSchemas,\n}) => {\n  return (\n    <I18nextProvider i18n={kafkai18n}>\n      <ConfigContext.Provider value={{ basePath: apiBasePath, getToken }}>\n        <FederatedContext.Provider\n          value={{\n            activeTab: 2,\n            onError,\n            kafkaName,\n            kafkaPageLink,\n            kafkaInstanceLink,\n            showSchemas,\n          }}\n        >\n          <ModalProvider>\n            <TopicDetailPage />\n            <KafkaModalLoader />\n          </ModalProvider>\n        </FederatedContext.Provider>\n      </ConfigContext.Provider>\n    </I18nextProvider>\n  );\n};\n\nexport default TopicDetailFederated;\n","import { AxiosResponse } from 'axios';\nimport {\n  ConfigEntry,\n  TopicsApi,\n  Topic,\n  TopicSettings,\n  TopicsList,\n} from '@rhoas/kafka-instance-sdk';\nimport { Configuration } from '@rhoas/kafka-instance-sdk';\nimport { IConfiguration } from '@app/contexts';\nimport { IAdvancedTopic } from '@app/modules/Topics/components/CreateTopicWizard/CreateTopicWizard';\nimport { SortByDirection } from '@patternfly/react-table';\n\nexport enum OrderKey {\n  name = 'name',\n  partitions = 'partitions',\n  retentionMs = 'retention.ms',\n  retentionSize = 'retention.bytes',\n}\n\nexport const getTopics = async (\n  config: IConfiguration | undefined,\n  limit?: number,\n  size?: number,\n  filter?: string,\n  offset?: number | undefined,\n  order: SortByDirection = SortByDirection.asc,\n  orderKey?: OrderKey\n): Promise<TopicsList> => {\n  const accessToken = await config?.getToken();\n\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response: AxiosResponse<TopicsList> = await api.getTopics(\n    offset,\n    limit,\n    size,\n    filter,\n    undefined,\n    order,\n    orderKey\n  );\n  return response.data;\n};\n\nexport const getTopicDetail = async (\n  topicName: string,\n  config: IConfiguration | undefined\n): Promise<IAdvancedTopic> => {\n  const accessToken = await config?.getToken();\n\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const { data } = await api.getTopic(topicName);\n\n  return convertTopicResponse(data);\n};\n\nconst convertTopicResponse = (topic: Topic): IAdvancedTopic => {\n  const topicObj: IAdvancedTopic = { name: '', numPartitions: '0' };\n  if (topic && topic.name) topicObj.name = topic.name;\n\n  topic.config?.forEach((config) => {\n    if (config.key) {\n      topicObj[config.key] = config.value;\n    }\n  });\n\n  topicObj.numPartitions = topic?.partitions?.length.toString() || '0';\n\n  topicObj.replicationFactor =\n    (topic?.partitions && topic?.partitions[0].replicas?.length.toString()) ||\n    '0';\n\n  return topicObj;\n};\n\nexport const updateTopicModel = async (\n  topicName: string,\n  topicSettings: TopicSettings,\n  config: IConfiguration | undefined\n): Promise<number> => {\n  const accessToken = await config?.getToken();\n\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response: AxiosResponse<Topic> = await api.updateTopic(\n    topicName,\n    topicSettings\n  );\n  return response.status;\n};\n\nexport const getTopic = async (\n  topicName: string,\n  config: IConfiguration | undefined\n): Promise<Topic> => {\n  const accessToken = await config?.getToken();\n\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  const response = await api.getTopic(topicName);\n\n  const answer = response.data;\n  answer.config = answer.config || ([] as ConfigEntry[]);\n  answer.config.push({\n    key: 'replicationFactor',\n    value: response.data?.partitions\n      ?.map((p) => p.replicas?.length)\n      .reduce(\n        (previousValue = 0, currentValue = 0) => previousValue + currentValue\n      )\n      ?.toString(),\n  });\n  return response.data;\n};\n\nexport const deleteTopic = async (\n  topicName: string,\n  config: IConfiguration | undefined\n): Promise<void> => {\n  const accessToken = await config?.getToken();\n\n  const api = new TopicsApi(\n    new Configuration({\n      accessToken,\n      basePath: config?.basePath,\n    })\n  );\n  await api.deleteTopic(topicName);\n  return;\n};\n","import { AxiosError } from 'axios';\n\nexport type ErrorData = {\n  code: number;\n  error_message: string;\n};\n\nexport const isAxiosError = (\n  error: unknown\n): error is AxiosError<ErrorData> => {\n  return (error as AxiosError<ErrorData>) !== undefined;\n};\n"],"names":["exports","name","height","width","svgPath","yOffset","xOffset","TextWithLabelPopover","fieldId","fieldLabel","btnAriaLabel","fieldValue","popoverBody","popoverHeader","displayText","undefined","parseInt","FormGroup","label","className","labelIcon","Popover","headerContent","bodyContent","onClick","event","preventDefault","noVerticalAlign","TextInput","isReadOnly","type","id","value","DEFAULT_REPLICAS","DEFAULT_MIN_CLEANBLE_RATIO","DEFAULT_MIN_INSYNC_REPLICAS","DEFAULT_SEGMENT_TIME","DEFAULT_MAX_MESSAGE_TIMESTAMP_DIFF","DEFAULT_SEGMENT_INDEX_SIZE","DEFAULT_INDEX_INTERVAL_SIZE","DEFAULT_LOG_SEGMENT_SIZE","DEFAULT_DELETE_RETENTION_TIME","DEFAULT_SEGMENT_JITTER_TIME","DEFAULT_FILE_DELETE_DELAY","DEFAULT_MAXIMUM_MESSAGE_BYTES","DEFAULT_MESSAGE_TIMESTAMP_TYPE","DEFAULT_MINIMUM_COMPACTION_LAG_TIME","DEFAULT_FLUSH_INTERVAL_MESSAGES","DEFAULT_FLUSH_INTERVAL_TIME","MIN_PARTITIONS","MAX_PARTITIONS","FederatedContext","useFederated","useContext","getToken","apiBasePath","kafkaName","onError","kafkaPageLink","kafkaInstanceLink","showSchemas","I18nextProvider","i18n","basePath","activeTab","ModalProvider","OrderKey","getTopics","config","limit","size","filter","offset","order","orderKey","SortByDirection","Promise","accessToken","TopicsApi","Configuration","data","getTopicDetail","topicName","getTopic","convertTopicResponse","topic","topicObj","numPartitions","forEach","key","partitions","length","toString","replicationFactor","replicas","updateTopicModel","topicSettings","updateTopic","status","response","answer","push","map","p","reduce","previousValue","currentValue","deleteTopic","isAxiosError","error"],"sourceRoot":""}