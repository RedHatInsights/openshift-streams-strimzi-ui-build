"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[302],{38296:(e,t,n)=>{function o(...e){const t=[],n={}.hasOwnProperty;return e.filter(Boolean).forEach((e=>{const r=typeof e;if("string"===r||"number"===r)t.push(e);else if(Array.isArray(e)&&e.length){const n=o(...e);n&&t.push(n)}else if("object"===r)for(const o in e)n.call(e,o)&&e[o]&&t.push(o)})),t.join(" ")}n.r(t),n.d(t,{css:()=>o})},97416:(e,t,n)=>{n.d(t,{L:()=>s});var o=n(75418),r=n.n(o),i=n(84669),a=function(){return a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},s=function(e){var t=e.toolbarProps,n=e.toggleGroupProps,o=e.toolbarItems,s=e.toggleGroupItems,u=t.id,c=t.clearAllFilters,p=t.collapseListedFiltersBreakpoint,f=void 0===p?"md":p,d=t.inset,m=l(t,["id","clearAllFilters","collapseListedFiltersBreakpoint","inset"]);return r().createElement(r().Fragment,null,r().createElement(i.Toolbar,a({id:u,clearAllFilters:c,inset:d,collapseListedFiltersBreakpoint:f},m),r().createElement(i.ToolbarContent,null,n&&r().createElement(i.ToolbarToggleGroup,a({},n,{toggleIcon:n.toggleIcon}),s),null==o?void 0:o.map((function(e,t){var n=e.key,o=void 0===n?"mas":n,s=e.variant,u=e.className,c=e.id,p=e.alignment,f=e.item,d=l(e,["key","variant","className","id","alignment","item"]);return r().createElement(i.ToolbarItem,a({key:o+"-"+t,variant:s,className:u,id:c,alignment:p},d),f)})))))}},9837:(e,t,n)=>{n.r(t),n.d(t,{PermissionsTableView:()=>A,default:()=>I});var o=n(75418),r=n.n(o),i=n(76621),a=n(11593),l=n(84669),s=n(27577),u=n(30782),c=n(76752),p=n(28942),f=n(82639),d=n(97416),m=function(e){var t=e.deleteSelectedEnabled,n=e.onDeleteSelected,i=(0,a.useTranslation)().t,s=(0,o.useState)(!1),u=s[0],c=s[1],p=function(){var e=document.getElementById("permissions-toolbar-kebab-toggle");null==e||e.focus()},f=[r().createElement(l.DropdownItem,{key:"delete_selected",onClick:n,isDisabled:!t},i("permission.table.delete_selected"))];return r().createElement(l.Dropdown,{onSelect:function(){c((function(e){return!e})),p()},toggle:r().createElement(l.KebabToggle,{onToggle:function(e){c(e)},id:"permissions-toolbar-kebab-toggle"}),isOpen:u,isPlain:!0,dropdownItems:f})},v=function(e){var t=e.total,n=void 0===t?0:t,o=e.page,i=e.perPage,s=e.setFilteredValue,u=e.openManagePermissions,c=e.onDeleteSelected,p=e.deletedSelectedEnabled,v=(0,a.useTranslation)().t,g=r().createElement(r().Fragment,null),b=[{item:r().createElement(l.Button,{id:"permissions-toolbar-manage-permissions-button","data-testid":"actionManagePermissions",onClick:u},v("permission.table.manage_button"))},{item:r().createElement(m,{deleteSelectedEnabled:p,onDeleteSelected:c})}];return n>0&&b.push({item:r().createElement(f.wu,{widgetId:"permissions-pagination-options-menu-top",itemCount:n,page:o,perPage:i,titles:{paginationTitle:v("common.minimal_pagination"),perPageSuffix:v("common.per_page_suffix"),toFirstPage:v("common.to_first_page"),toPreviousPage:v("common.to_previous_page"),toLastPage:v("common.to_last_page"),toNextPage:v("common.to_next_page"),optionsToggle:v("common.options_toggle"),currPage:v("common.curr_page")},isCompact:!0}),variant:"pagination",alignment:{default:"alignRight"}}),r().createElement(d.L,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s("")},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:"",breakpoint:"md"},toggleGroupItems:g,toolbarItems:b})},g=n(63052),b=n(58785),h=n(91070),y=function(e){var t=e.openManagePermissions,n=(0,a.useTranslation)().t;return r().createElement(h.u,{emptyStateProps:{variant:h.j.NoResult},titleProps:{title:n("permission.table.no_results_title")},emptyStateBodyProps:{body:n("permission.table.no_results_body")},buttonProps:{title:n("permission.table.manage_permissions_button"),onClick:t,"data-testid":"actionManagePermissions"}})},w=n(70853),P=function(){return P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},P.apply(this,arguments)},k=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},T=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},_=function(e){var t=e.permissionsService,n=e.kafkaName,d=e.topicNames,m=e.consumerGroupIds,h=(0,a.useTranslation)().t,_=(0,o.useState)(""),S=_[0],E=_[1],x=((0,u.dd)()||{}).showModal,C=(0,o.useState)(),F=C[0],A=C[1],I=function(){return k(void 0,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.getPermissions({resourceName:""!==S?S:void 0})];case 1:return e=n.sent(),A((function(t){var n;return{items:null===(n=e.items)||void 0===n?void 0:n.map((function(e){var n,o=null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.filter((function(t){return t.hash()===e.hash()})),r=0!==(null==o?void 0:o.length)&&(null==o?void 0:o.every((function(e){return e.selected})))||!1;return P({selected:r},e)})),page:e.page,size:e.size,total:e.total}})),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))};(0,o.useEffect)((function(){I()}),[]),(0,g.K)((function(){return I()}),5e3);var O=[b.QG,b.ev,b.C8],G=function(e){x&&x(c.w.KafkaManagePermissions,{selectedAccountId:e,kafkaName:n,acls:(null==F?void 0:F.items)||[],topicNames:d,consumerGroupIds:m,onSave:function(){return k(void 0,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,I()];case 1:return e.sent(),[2]}}))}))}})};return void 0===F||void 0===F.items||0===F.items.length?r().createElement(y,null):r().createElement(r().Fragment,null,r().createElement(v,{total:F.total||0,page:F.page||1,perPage:F.size||10,openManagePermissions:function(){return G()},setFilteredValue:E,filteredValue:S,deletedSelectedEnabled:F.items.some((function(e){return e.selected})),onDeleteSelected:function(){var e;null===(e=null==F?void 0:F.items)||void 0===e||e.filter((function(e){return e.selected})).forEach((function(e){t.deletePermission({resourceName:e.resourceName,patternType:(0,i.L2)(e.patternType,w.AclPatternTypeFilter),permissionType:(0,i.L2)(e.permission,w.AclPermissionTypeFilter),resourceType:(0,i.L2)(e.resourceType,w.AclResourceTypeFilter),operation:(0,i.L2)(e.operation,w.AclOperationFilter),principal:"User:"+e.principal}).then((function(){return I()}))})),I()}}),r().createElement(p.w,{tableProps:{cells:[{title:""},{title:""},{title:""},{title:""}],rows:F.items.map((function(e,t){return{cells:O.map((function(n){return n(e,t)})),selected:e.selected,originalData:e}})),"aria-label":h("permission.table.permission_list_table"),shouldDefaultCustomRowWrapper:!0,variant:s.TableVariant.compact,onSelect:function(e,t,n){A(-1===n?function(e){var n;if(e)return P({items:null===(n=null==e?void 0:e.items)||void 0===n?void 0:n.map((function(e){return e.selected=t,e}))},e)}:function(e){if(e){var o=null==e?void 0:e.items;return void 0!==o&&(o[n].selected=t),P({items:o},e)}})},actionResolver:function(e,n){var o,r,a=n.rowIndex,l=[(o={title:h("permission.table.row_kebab.manage")},o["data-testid"]="permission-table-row-manage",o.onClick=function(){void 0!==(null==F?void 0:F.items)&&void 0!==a&&G(F.items[a].principal)},o),(r={title:h("permission.table.row_kebab.delete")},r["data-testid"]="permission-table-row-delete",r.onClick=function(){return function(e){if(void 0!==e&&void 0!==(null==F?void 0:F.items)){var n=F.items[e];t.deletePermission({resourceName:n.resourceName,patternType:(0,i.L2)(n.patternType,w.AclPatternTypeFilter),permissionType:(0,i.L2)(n.permission,w.AclPermissionTypeFilter),resourceType:(0,i.L2)(n.resourceType,w.AclResourceTypeFilter),operation:(0,i.L2)(n.operation,w.AclOperationFilter),principal:"User:"+n.principal}).then((function(){return I()}))}}(a)},r)];return l},canSelectAll:!1},rowDataTestId:"tablePermissions-row"}),r().createElement(f.wu,{widgetId:"permissions-pagination-options-menu-bottom",itemCount:F.total||0,variant:l.PaginationVariant.bottom,page:F.page,perPage:F.size,titles:{paginationTitle:h("common.full_pagination"),perPageSuffix:h("common.per_page_suffix"),toFirstPage:h("common.to_first_page"),toPreviousPage:h("common.to_previous_page"),toLastPage:h("common.to_last_page"),toNextPage:h("common.to_next_page"),optionsToggle:h("common.options_toggle"),currPage:h("common.curr_page")}}))},S=n(3654),E=n(60540),x=n(10708),C=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},F=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},A=function(e){var t=e.kafkaName,n=(0,o.useContext)(S.E),a=(0,i.qK)(n),l=(0,o.useState)([]),s=l[0],u=l[1],c=(0,o.useState)([]),p=c[0],f=c[1];return(0,o.useEffect)((function(){C(void 0,void 0,void 0,(function(){var e,t,o;return F(this,(function(r){switch(r.label){case 0:return[4,(0,E.BB)(n)];case 1:return e=r.sent(),t=null===(o=e.items)||void 0===o?void 0:o.map((function(e){return e.name||""})),u(t||[]),[2]}}))}))}),[n]),(0,o.useEffect)((function(){C(void 0,void 0,void 0,(function(){var e,t,o;return F(this,(function(r){switch(r.label){case 0:return[4,(0,x.e5)(n)];case 1:return e=r.sent(),t=null===(o=e.items)||void 0===o?void 0:o.map((function(e){return e.groupId||""})),f(t||[]),[2]}}))}))}),[n]),r().createElement(_,{permissionsService:a,kafkaName:t,topicNames:s,consumerGroupIds:p})};const I=A},10708:(e,t,n)=>{n.d(t,{e5:()=>l,T3:()=>s,v:()=>u});var o=n(70853),r=n(27577),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},a=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},l=function(e,t,n,l,s,u,c,p,f){return void 0===p&&(p=r.SortByDirection.asc),i(void 0,void 0,Promise,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return[4,null==e?void 0:e.getToken()];case 1:return r=i.sent(),[4,new o.GroupsApi(new o.Configuration({accessToken:r,basePath:null==e?void 0:e.basePath})).getConsumerGroups(t,n,l,s,u,c,p,f)];case 2:return[2,i.sent().data]}}))}))},s=function(e,t){return i(void 0,void 0,Promise,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=r.sent(),[4,new o.GroupsApi(new o.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).deleteConsumerGroupById(e)];case 2:return r.sent(),[2]}}))}))},u=function(e,t,n,r,l,s){return i(void 0,void 0,Promise,(function(){var i;return a(this,(function(a){switch(a.label){case 0:return[4,null==e?void 0:e.getToken()];case 1:return i=a.sent(),[4,new o.GroupsApi(new o.Configuration({accessToken:i,basePath:null==e?void 0:e.basePath})).resetConsumerGroupOffset(t,{value:s,offset:n,topics:[{topic:r,partitions:l}]})];case 2:return[2,a.sent()]}}))}))}},60540:(e,t,n)=>{n.d(t,{BB:()=>s,Rh:()=>u,eR:()=>p,BN:()=>f,BK:()=>d});var o,r=n(70853),i=n(27577),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},l=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){e.name="name",e.partitions="partitions",e.retentionMs="retention.ms",e.retentionSize="retention.bytes"}(o||(o={}));var s=function(e,t,n,o,s,u,c){return void 0===u&&(u=i.SortByDirection.asc),a(void 0,void 0,Promise,(function(){var i;return l(this,(function(a){switch(a.label){case 0:return[4,null==e?void 0:e.getToken()];case 1:return i=a.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:i,basePath:null==e?void 0:e.basePath})).getTopics(s,t,n,o,void 0,u,c)];case 2:return[2,a.sent().data]}}))}))},u=function(e,t){return a(void 0,void 0,Promise,(function(){var n,o;return l(this,(function(i){switch(i.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=i.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=i.sent().data,[2,c(o)]}}))}))},c=function(e){var t,n,o,r={name:"",numPartitions:"0"};return e&&e.name&&(r.name=e.name),null===(t=e.config)||void 0===t||t.forEach((function(e){e.key&&(r[e.key]=e.value)})),r.numPartitions=(null===(n=null==e?void 0:e.partitions)||void 0===n?void 0:n.length.toString())||"0",r.replicationFactor=(null==e?void 0:e.partitions)&&(null===(o=null==e?void 0:e.partitions[0].replicas)||void 0===o?void 0:o.length.toString())||"0",r},p=function(e,t,n){return a(void 0,void 0,Promise,(function(){var o;return l(this,(function(i){switch(i.label){case 0:return[4,null==n?void 0:n.getToken()];case 1:return o=i.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:o,basePath:null==n?void 0:n.basePath})).updateTopic(e,t)];case 2:return[2,i.sent().status]}}))}))},f=function(e,t){return a(void 0,void 0,Promise,(function(){var n,o,i,a,s,u;return l(this,(function(l){switch(l.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=l.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=l.sent(),(i=o.data).config=i.config||[],i.config.push({key:"replicationFactor",value:null===(u=null===(s=null===(a=o.data)||void 0===a?void 0:a.partitions)||void 0===s?void 0:s.map((function(e){var t;return null===(t=e.replicas)||void 0===t?void 0:t.length})).reduce((function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e+t})))||void 0===u?void 0:u.toString()}),[2,o.data]}}))}))},d=function(e,t){return a(void 0,void 0,Promise,(function(){var n;return l(this,(function(o){switch(o.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=o.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).deleteTopic(e)];case 2:return o.sent(),[2]}}))}))}}}]);
//# sourceMappingURL=302.4d08fff1.js.map