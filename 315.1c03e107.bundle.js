"use strict";(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[315],{38296:(e,t,n)=>{function o(...e){const t=[],n={}.hasOwnProperty;return e.filter(Boolean).forEach((e=>{const r=typeof e;if("string"===r||"number"===r)t.push(e);else if(Array.isArray(e)&&e.length){const n=o(...e);n&&t.push(n)}else if("object"===r)for(const o in e)n.call(e,o)&&e[o]&&t.push(o)})),t.join(" ")}n.d(t,{i:()=>o})},19937:(e,t,n)=>{n.d(t,{w:()=>s});var o=n(93264),r=n.n(o),a=n(55399),i=n(46999),l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},s=function(e){var t=e.page,n=e.perPage,s=void 0===n?10:n,u=e.itemCount,p=e.variant,d=void 0===p?i.PaginationVariant.top:p,f=e.isCompact,m=e.titles,g=c(e,["page","perPage","itemCount","variant","isCompact","titles"]),v=(0,a.useHistory)(),b=(0,a.useLocation)(),h=new URLSearchParams(b.search),y=(0,o.useCallback)((function(e,t){h.set(e,t.toString())}),[h]),w=(0,o.useCallback)((function(e,t){y("page",t.toString()),v.push({search:h.toString()})}),[y,v,h]),P=(0,o.useCallback)((function(e,t){y("page","1"),y("perPage",t.toString()),v.push({search:h.toString()})}),[y,v,h]);return r().createElement(i.Pagination,l({itemCount:u,perPage:s,page:t,onSetPage:w,variant:d,onPerPageSelect:P,isCompact:f},g,{titles:m}))}},89941:(e,t,n)=>{n.d(t,{w:()=>m});var o=n(93264),r=n.n(o),a=n(14697),i=n(38296),l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},s=(0,o.createContext)({activeRow:"",onRowClick:function(){return""},loggedInUser:""}),u=s.Provider,p=function(e){var t=(0,o.useContext)(s),n=t.activeRow,a=t.onRowClick,u=t.rowDataTestId,p=e||{},d=p.trRef,f=p.className,m=p.rowProps,g=p.row,v=c(p,["trRef","className","rowProps","row"]),b=m.rowIndex,h=g.isExpanded,y=g.originalData;return r().createElement("tr",l({"data-testid":u,tabIndex:0,ref:d,className:(0,i.i)(f,"pf-c-table-row__item",n&&n===(null==y?void 0:y.rowId)&&"pf-m-selected pf-m-selectable"),hidden:void 0!==h&&!h,onClick:function(e){return a&&a(e,b,g)}},v))},d=function(){return(d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},f=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},m=function(e){var t=e.tableProps,n=e.tableHeaderProps,o=e.tableBodyProps,l=e.children,c=e.activeRow,s=e.onRowClick,m=e.rowDataTestId,g=e.loggedInUser,v=t.cells,b=t.rows,h=t.actionResolver,y=t.onSort,w=t.sortBy,P=t["aria-label"],T=t.variant,k=t.className,S=t.shouldDefaultCustomRowWrapper,E=void 0!==S&&S,_=f(t,["cells","rows","actionResolver","onSort","sortBy","aria-label","variant","className","shouldDefaultCustomRowWrapper"]);return E&&(_.rowWrapper=p),r().createElement(u,{value:{activeRow:c,onRowClick:s,rowDataTestId:m,loggedInUser:g}},r().createElement(a.Table,d({className:(0,i.i)(E&&"mas--table-view__table",k),cells:v,variant:T,rows:b,"aria-label":P,actionResolver:h,onSort:y,sortBy:w},_),r().createElement(a.TableHeader,d({},n)),r().createElement(a.TableBody,d({},o)),l))}},22273:(e,t,n)=>{n.d(t,{L:()=>c});var o=n(93264),r=n.n(o),a=n(46999),i=function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},c=function(e){var t=e.toolbarProps,n=e.toggleGroupProps,o=e.toolbarItems,c=e.toggleGroupItems,s=t.id,u=t.clearAllFilters,p=t.collapseListedFiltersBreakpoint,d=void 0===p?"md":p,f=t.inset,m=l(t,["id","clearAllFilters","collapseListedFiltersBreakpoint","inset"]);return r().createElement(r().Fragment,null,r().createElement(a.Toolbar,i({id:s,clearAllFilters:u,inset:f,collapseListedFiltersBreakpoint:d},m),r().createElement(a.ToolbarContent,null,n&&r().createElement(a.ToolbarToggleGroup,i({toggleIcon:n.toggleIcon},n),c),null==o?void 0:o.map((function(e,t){var n=e.key,o=void 0===n?"mas":n,c=e.variant,s=e.className,u=e.id,p=e.alignment,d=e.item,f=l(e,["key","variant","className","id","alignment","item"]);return r().createElement(a.ToolbarItem,i({key:o+"-"+t,variant:c,className:s,id:u,alignment:p},f),d)})))))}},94315:(e,t,n)=>{n.r(t),n.d(t,{Topics:()=>C,default:()=>O});var o=n(93264),r=n.n(o),a=n(55399),i=n(54532),l=n(46999),c=n(51826),s=n(14697),u=n(89941),p=n(4426),d=n(19937),f=n(37009),m=n(97059),g=n(22273),v=function(e){var t=e.total,n=void 0===t?0:t,a=e.page,c=e.perPage,s=e.setFilteredValue,u=e.filteredValue,p=void 0===u?"":u,f=e.onCreateTopic,v=(0,i.useTranslation)().t,b=(0,o.useState)(""),h=b[0],y=b[1],w=r().createElement(r().Fragment,null,r().createElement(l.ToolbarFilter,{chips:p?[p]:[],deleteChip:function(){s("")},categoryName:""},r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:"searchName",id:"search-topics-input",type:"search","aria-label":v("topic.topic_search_input"),placeholder:v("common.search"),value:h,onChange:function(e){y(e)}}),r().createElement(l.Button,{variant:l.ButtonVariant.control,isDisabled:!h.length,onClick:function(){s(h),y("")},"aria-label":v("topic.topic_search")},r().createElement(m.SearchIcon,null))))),P=[{item:r().createElement(l.Button,{id:"topic-list-create-topic-button",className:"topics-per-page","data-testid":"actionCreateTopic",onClick:f},v("topic.create_topic"))}];return n>0&&P.push({item:r().createElement(d.w,{widgetId:"consumer-group-pagination-options-menu-top",itemCount:n,page:a,perPage:c,titles:{paginationTitle:v("common.minimal_pagination"),perPageSuffix:v("common.per_page_suffix"),toFirstPage:v("common.to_first_page"),toPreviousPage:v("common.to_previous_page"),toLastPage:v("common.to_last_page"),toNextPage:v("common.to_next_page"),optionsToggle:v("common.options_toggle"),currPage:v("common.curr_page")}}),variant:"pagination",alignment:{default:"alignRight"}}),r().createElement(g.L,{toolbarProps:{id:"instance-toolbar",clearAllFilters:function(){s("")},collapseListedFiltersBreakpoint:"md",inset:{xl:"insetLg"}},toggleGroupProps:{toggleIcon:"",breakpoint:"md"},toggleGroupItems:w,toolbarItems:P})},b=n(53555),h=n(47443),y=n(47408),w=function(e){var t,n=e.total,o=e.page,c=e.perPage,m=e.setFilteredValue,g=e.filteredValue,w=e.onCreateTopic,P=e.topicItems,T=e.rowDataTestId,k=e.onEdit,S=e.onDeleteTopic,E=e.refreshTopics,_=e.onSort,C=e.sortBy,O=(0,i.useTranslation)().t,x=(0,h.dd)().showModal,I=(0,f.S)(),j=I.onConnectToRoute,B=I.getConnectToRoutePath,R=[{title:O("common.name")},{title:O("common.partitions"),transforms:[s.sortable]},{title:O("topic.retention_time"),transforms:[s.sortable]},{title:O("topic.retention_size"),transforms:[s.sortable]}],N=function(e,t,n){var o,r,a,i,l,c=t.name,s=void 0===c?"":c;"delete"===n?(l=s,x(y.w.DeleteTopic,{topicName:l,onDeleteTopic:S,refreshTopics:E})):"edit"===n&&k&&k(s),null===(i=null===(a=null===(r=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.parentElement)||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.previousSibling)||void 0===i||i.focus()},F=(t=[],null==P||P.map((function(e){var n,o,i=e.name,l=e.partitions,c=e.config;t.push({cells:[{title:r().createElement(a.Link,{"data-testid":"tableTopics-linkTopic",to:B&&B("topics/"+i,i)||"",onClick:function(e){e.preventDefault(),j&&j("topics/"+i)}},i)},null==l?void 0:l.length,(0,b.B4)(Number((null===(n=null==c?void 0:c.filter((function(e){return"retention.ms"===e.key}))[0])||void 0===n?void 0:n.value)||0)),(0,b.yI)(Number((null===(o=null==c?void 0:c.filter((function(e){return"retention.bytes"===e.key}))[0])||void 0===o?void 0:o.value)||0))],originalData:e})})),t);return r().createElement(r().Fragment,null,r().createElement(v,{total:n,page:o,perPage:c,onCreateTopic:w,setFilteredValue:m,filteredValue:g}),r().createElement(u.w,{tableProps:{cells:R,rows:F,"aria-label":O("topic.topic_list_table"),actionResolver:function(e){var t,n,o=e.originalData;return[(t={title:O("common.delete")},t["data-testid"]="tableTopics-actionDelete",t.onClick=function(e){return N(e,o,"delete")},t),(n={title:O("common.edit")},n["data-testid"]="tableTopics-actionEdit",n.onClick=function(e){return N(e,o,"edit")},n)]},shouldDefaultCustomRowWrapper:!0,variant:s.TableVariant.compact,onSort:_,sortBy:C},rowDataTestId:T||"tableTopics-row"}),(null==P?void 0:P.length)<1&&g.length>0&&r().createElement(p.u,{emptyStateProps:{variant:p.j.NoResult},titleProps:{title:O("common.no_results_title")},emptyStateBodyProps:{body:O("common.no_results_body")}}),n>0&&r().createElement(d.w,{widgetId:"consumer-group-pagination-options-menu-bottom",itemCount:n,variant:l.PaginationVariant.bottom,page:o,perPage:c,titles:{paginationTitle:O("common.full_pagination"),perPageSuffix:O("common.per_page_suffix"),toFirstPage:O("common.to_first_page"),toPreviousPage:O("common.to_previous_page"),toLastPage:O("common.to_last_page"),toNextPage:O("common.to_next_page"),optionsToggle:O("common.options_toggle"),currPage:O("common.curr_page")}}))},P=n(87887),T=n(71302),k=n(26585),S=n(30621),E=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function l(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))},_=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},C=function(e){var t=e.onCreateTopic,n=e.onEditTopic,s=(0,f.S)(),u=s.dispatchKafkaAction,d=s.onError,m=(0,i.useTranslation)().t,g=(0,S.useAlert)().addAlert,v=(0,o.useContext)(k.E),h=(0,a.useLocation)(),y=new URLSearchParams(h.search),C=parseInt(y.get("page")||"",10)||1,O=parseInt(y.get("perPage")||"",10)||10,x=(0,o.useState)(),I=(x[0],x[1]),j=(0,o.useState)(),B=j[0],R=j[1],N=(0,o.useState)(""),F=N[0],D=N[1],A=(0,o.useState)(0),L=A[0],V=A[1],G=(0,o.useState)(),U=G[0],W=G[1],H=(0,o.useState)(),K=H[0],z=H[1],M=(0,o.useState)({index:0,direction:"asc"}),q=M[0],J=M[1];(0,o.useEffect)((function(){Y()}),[F,U,K]),(0,c.K)((function(){return Y()}),5e3),(0,o.useEffect)((function(){var e=Number(O)*Number(C-1);V(e)}),[C,O]);var Q=function(){t&&t(),u&&u(b.wT.CreateTopic)},X=function(e,t,n){z({0:"name",1:"partitions",2:"retention.ms",3:"retention.bytes"}[t]),W(n),J({index:t,direction:n})},Y=function(){return E(void 0,void 0,void 0,(function(){var e;return _(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,T.BB)(v,100,O,F,L,U,K).then((function(e){I(e),R(null==e?void 0:e.items)}))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),d&&401===e.response.data.code?d(e.response.data.code,e.response.data.error_message):g({title:e.response.data.error_message,variant:l.AlertVariant.danger}),[3,3];case 3:return[2]}}))}))};return r().createElement(r().Fragment,null,r().createElement(l.Card,{className:"kafka-ui-m-full-height","data-ouia-page-id":"tableTopics"},void 0===B?r().createElement(l.PageSection,{className:"kafka-ui-m-full-height",variant:l.PageSectionVariants.light,padding:{default:"noPadding"}},r().createElement(P.y,null)):B.length<1&&F.length<1?r().createElement(p.u,{emptyStateProps:{variant:p.j.NoItems,"data-ouia-page-id":"emptyStateTopics"},titleProps:{title:m("topic.empty_topics_title")},emptyStateBodyProps:{body:m("topic.empty_topics_body")},buttonProps:{title:m("topic.create_topic"),onClick:Q,"data-testid":"actionCreateTopic"}}):B?r().createElement(w,{total:B.length||0,page:C,perPage:O,onCreateTopic:t,topicItems:F?null==B?void 0:B.slice(0,O):null==B?void 0:B.slice(L,L+O),filteredValue:F,setFilteredValue:D,refreshTopics:Y,onEdit:n,onSort:X,sortBy:q}):r().createElement(r().Fragment,null)))};const O=C},71302:(e,t,n)=>{n.d(t,{BB:()=>c,Rh:()=>s,eR:()=>p,BN:()=>d,BK:()=>f});var o,r=n(28696),a=n(14697),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function l(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))},l=function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};!function(e){e.name="name",e.partitions="partitions",e.retentionMs="retention.ms",e.retentionSize="retention.bytes"}(o||(o={}));var c=function(e,t,n,o,c,s,u){return void 0===s&&(s=a.SortByDirection.asc),i(void 0,void 0,void 0,(function(){var a;return l(this,(function(i){switch(i.label){case 0:return[4,null==e?void 0:e.getToken()];case 1:return a=i.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:a,basePath:null==e?void 0:e.basePath})).getTopics(c,t,n,o,void 0,s,u)];case 2:return[2,i.sent().data]}}))}))},s=function(e,t){return i(void 0,void 0,void 0,(function(){var n,o;return l(this,(function(a){switch(a.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=a.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=a.sent().data,[2,u(o)]}}))}))},u=function(e){var t,n,o,r={};return r.name=e.name,null===(t=e.config)||void 0===t||t.forEach((function(e){e.key&&(r[e.key]=e.value)})),r.numPartitions=(null===(n=null==e?void 0:e.partitions)||void 0===n?void 0:n.length.toString())||"0",r.replicationFactor=(null==e?void 0:e.partitions)&&(null===(o=null==e?void 0:e.partitions[0].replicas)||void 0===o?void 0:o.length.toString())||"0",r},p=function(e,t,n){return i(void 0,void 0,void 0,(function(){var o;return l(this,(function(a){switch(a.label){case 0:return[4,null==n?void 0:n.getToken()];case 1:return o=a.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:o,basePath:null==n?void 0:n.basePath})).updateTopic(e,t)];case 2:return[2,a.sent().status]}}))}))},d=function(e,t){return i(void 0,void 0,void 0,(function(){var n,o,a,i,c,s;return l(this,(function(l){switch(l.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=l.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).getTopic(e)];case 2:return o=l.sent(),(a=o.data).config=a.config||[],a.config.push({key:"replicationFactor",value:null===(s=null===(c=null===(i=o.data)||void 0===i?void 0:i.partitions)||void 0===c?void 0:c.map((function(e){var t;return null===(t=e.replicas)||void 0===t?void 0:t.length})).reduce((function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e+t})))||void 0===s?void 0:s.toString()}),[2,o.data]}}))}))},f=function(e,t){return i(void 0,void 0,void 0,(function(){var n;return l(this,(function(o){switch(o.label){case 0:return[4,null==t?void 0:t.getToken()];case 1:return n=o.sent(),[4,new r.TopicsApi(new r.Configuration({accessToken:n,basePath:null==t?void 0:t.basePath})).deleteTopic(e)];case 2:return o.sent(),[2]}}))}))}}}]);
//# sourceMappingURL=315.1c03e107.bundle.js.map