(self.webpackChunkkafka_ui=self.webpackChunkkafka_ui||[]).push([[299],{6304:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var n=a(7522),o=(a(4082),(0,n.createContext)({}))},9843:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FederatedMainView:()=>C,default:()=>y});var n=a(7522),o=a.n(n),r=(a(6351),a(4082)),i=a(4369),l=a(9058),c=a(8183),s=a(3575),u=function(e){var t=e.search,a=e.setSearch,n=e.setFilteredTopics,i=e.setSearchTopicName,l=(0,c.useTranslation)().t;return o().createElement(r.InputGroup,null,o().createElement(r.TextInput,{name:"searchName",id:"search-topics-input",type:"search","aria-label":l("topic.topic_search_input"),placeholder:l("common.search"),value:t,onChange:function(e){a(e)}}),o().createElement(r.Button,{variant:r.ButtonVariant.control,isDisabled:!t.length,onClick:function(){i(t),n(!0),a("")},"aria-label":l("topic.topic_search")},o().createElement(s.SearchIcon,null)))},m=a(1309),p=a(6295),d=a(699),f=a(9115),b=a(7955),v=a(6304),T=a(5399),g=a(1249),h=function(e){var t,a,s,h=e.onCreateTopic,E=e.getTopicDetailsPath,k=e.onClickTopic,C=e.onDeleteTopic,y=e.onError,P=(0,n.useState)(!0),S=P[0],_=P[1],w=(0,n.useState)(1),B=w[0],N=w[1],I=(0,n.useState)(10),D=I[0],x=I[1],K=(0,n.useState)(0),V=K[0],F=K[1],R=(0,n.useState)(""),A=R[0],G=R[1],L=(0,n.useState)(),M=L[0],j=L[1],z=(0,n.useState)(!1),H=z[0],W=z[1],Z=(0,n.useState)(!1),q=Z[0],J=Z[1],O=(0,n.useState)(""),Q=O[0],U=O[1],X=(0,n.useState)(),Y=X[0],$=X[1],ee=(0,c.useTranslation)().t,te=(0,n.useContext)(v.w).addAlert,ae=(0,n.useContext)(f.E),ne=function(){return e=void 0,t=void 0,n=function(){var e,t;return function(e,t){var a,n,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],n=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),q?[3,2]:[4,(0,p.BB)(ae)];case 1:return(e=a.sent())&&j(e),[3,4];case 2:return[4,(0,p.BB)(ae,Q)];case 3:(e=a.sent())&&j(e),a.label=4;case 4:return[3,6];case 5:return t=a.sent(),y&&401===t.response.data.code?y(t.response.data.code,t.response.data.error_message):te(t.response.data.error_message,r.AlertVariant.danger),[3,6];case 6:return _(!1),[2]}}))},new((a=void 0)||(a=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(e){r(e)}}function l(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}));var e,t,a,n};(0,n.useEffect)((function(){ne()}),[H,Q]),(0,l.K)((function(){return ne()}),5e3);var oe=function(e,t){N(t),F(B*D)},re=function(e,t){x(t)},ie=[{title:ee("common.name")},{title:ee("common.partitions"),transforms:[i.sortable]},{title:ee("topic.retention_time"),transforms:[i.sortable]},{title:ee("topic.retention_size"),transforms:[i.sortable]}],le=function(){J(!1),U("")},ce=(null===(s=null==M?void 0:M.items)||void 0===s?void 0:s.map((function(e){var t,a,n,r,i;return[{title:o().createElement(T.Link,{"data-testid":"tableTopics-linkTopic",to:E(e.name),onClick:function(t){t.preventDefault(),k(e.name)}},null==e?void 0:e.name)},null===(t=e.partitions)||void 0===t?void 0:t.length,(0,g.B4)(Number((null===(n=null===(a=e.config)||void 0===a?void 0:a.filter((function(e){return"retention.ms"===e.key}))[0])||void 0===n?void 0:n.value)||0)),(0,g.yI)(Number((null===(i=null===(r=e.config)||void 0===r?void 0:r.filter((function(e){return"retention.bytes"===e.key}))[0])||void 0===i?void 0:i.value)||0))]})))||[],se=[(t={title:ee("common.delete")},t["data-testid"]="tableTopics-actionDelete",t.onClick=function(e,t){return function(e){(null==M?void 0:M.items)&&$(M.items[e].name),W(!0)}(t)},t),(a={title:ee("common.edit")},a["data-testid"]="tableTopics-actionEdit",a.onClick=function(e,t){return function(e){(null==M?void 0:M.items)&&k(M.items[e].name)}(t)},a)];return S?o().createElement(b.g,null):o().createElement(o().Fragment,null,H&&o().createElement(d.i,{topicName:Y,setDeleteModal:W,deleteModal:H,onDeleteTopic:C}),o().createElement(r.Card,{className:"kafka-ui-m-full-height"},ce.length<1&&Q.length<1?o().createElement(m.u,{emptyStateProps:{variant:m.j.NoItems},titleProps:{title:ee("topic.empty_topics_title")},emptyStateBodyProps:{body:ee("topic.empty_topics_body")},buttonProps:{title:ee("topic.create_topic"),onClick:function(){return h()}}}):o().createElement(r.Card,null,o().createElement(r.Toolbar,null,o().createElement(r.ToolbarContent,null,o().createElement(r.ToolbarItem,{className:"pf-c-toolbar-item--search"},o().createElement(u,{search:A,setSearch:G,setFilteredTopics:J,setSearchTopicName:U})),o().createElement(r.ToolbarItem,null,o().createElement(r.Button,{id:"topic-list-create-topic-button",className:"topics-per-page","data-testid":"tabTopics-actionCreate",onClick:function(){h()}},ee("topic.create_topic"))),o().createElement(r.ToolbarItem,{variant:"pagination"},o().createElement(r.Pagination,{itemCount:ce.length,perPage:D,page:B,onSetPage:oe,widgetId:"topic-list-pagination-top",onPerPageSelect:re})))),q&&o().createElement(r.Toolbar,null,o().createElement(r.ToolbarContent,null,o().createElement(r.ToolbarItem,null,o().createElement(r.Chip,{key:"topicFilterChip",onClick:le},Q),o().createElement(r.Button,{variant:"link",onClick:le,"aria-label":"clear-filters"},ee("common.clear_filters"))))),o().createElement(i.Table,{"aria-label":ee("topic.topic_list_table"),variant:i.TableVariant.compact,cells:ie,rows:1!=B?ce.slice(V,V+D):ce.slice(0,D),actions:se},o().createElement(i.TableHeader,null),o().createElement(i.TableBody,null))),o().createElement(r.Divider,null),ce.length<1&&Q.length>0&&o().createElement(m.u,{emptyStateProps:{variant:m.j.NoResult},titleProps:{title:ee("common.no_results_title")},emptyStateBodyProps:{body:ee("common.no_results_body")}}),ce.length>0&&o().createElement(r.Card,null,o().createElement(r.Divider,null),o().createElement(r.Pagination,{itemCount:ce.length,perPage:D,page:B,onSetPage:oe,widgetId:"topic-list-pagination-bottom",onPerPageSelect:re,offset:0,variant:r.PaginationVariant.bottom}))))},E=a(6302),k=a(7950),C=function(e){var t,a=e.getToken,i=e.activeTab,l=void 0===i?0:i,s=e.apiBasePath,u=e.kafkaName,m=e.kafkaPageLink,p=e.onCreateTopic,d=e.getTopicDetailsPath,b=e.onClickTopic,g=e.addAlert,C=e.onDeleteConsumer,y=e.onDeleteTopic,P=e.onError,S={addAlert:g},_=(0,n.useState)(l),w=_[0],B=_[1],N=o().createRef(),I=o().createRef(),D=(0,c.useTranslation)().t;return o().createElement(T.BrowserRouter,null,o().createElement(c.I18nextProvider,{i18n:E.Z},o().createElement(f.E.Provider,{value:{basePath:s,getToken:a}},o().createElement(v.w.Provider,{value:S},(t=o().createElement(r.Breadcrumb,null,o().createElement(r.BreadcrumbItem,{to:m||"#"},"Kafka Instances"),o().createElement(r.BreadcrumbItem,{to:"#",isActive:!0},u||D("common.kafka_instance_name"))),o().createElement(o().Fragment,null,o().createElement("section",{className:"pf-c-page__main-breadcrumb"},t),o().createElement(r.PageSection,{variant:"light"},o().createElement(r.Level,null,o().createElement(r.Title,{headingLevel:"h1"},u||D("common.kafka_instance_name")))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.light,className:"pf-c-page__main-tabs",isWidthLimited:!0,padding:{default:"noPadding"}},o().createElement(r.Tabs,{activeKey:w,onSelect:function(e,t){B(t)},className:"pf-m-page-insets"},o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,"Topics"),eventKey:0,id:"topics-tab-section","aria-label":"Topics Tab.","data-testid":"pageKafka-tabTopics",tabContentId:"kafka-ui-TabcontentTopics",tabContentRef:N}),o().createElement(r.Tab,{title:o().createElement(r.TabTitleText,null,"Consumer groups"),eventKey:1,id:"consumer-groups-tab-section","aria-label":"Consumer Groups Tab.","data-testid":"pageKafka-tabConsumers",tabContentId:"kafka-ui-TabcontentConsumers",tabContentRef:I,className:1===w?"kafka-ui--consumer-content":""}))),o().createElement(r.PageSection,{variant:r.PageSectionVariants.default},o().createElement(r.TabContent,{eventKey:0,id:"kafka-ui-TabcontentTopics",ref:N,className:"kafka-ui-m-full-height","aria-label":"Topics."},o().createElement(h,{onCreateTopic:p,onClickTopic:b,getTopicDetailsPath:d,onDeleteTopic:y,onError:P})),o().createElement(r.TabContent,{eventKey:1,id:"kafka-ui-TabcontentConsumers",ref:I,className:"kafka-ui-m-full-height","aria-label":"Consumer groups.",hidden:!0},o().createElement(k.B,{onDeleteConsumerGroup:C,consumerGroupByTopic:!1})))))))))};const y=C}}]);
//# sourceMappingURL=299.d340459d.bundle.js.map